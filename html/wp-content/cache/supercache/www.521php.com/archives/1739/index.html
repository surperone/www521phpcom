<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="robots" content="all" />
<title>一键式虚拟主机搭建shell脚本 | 我爱你PHP张存超技术博客</title> 
 
<meta name="description" content="今天下午写了一个简单的一键式自动虚拟主机搭建shell脚本，脚本实现自动配置nginx虚拟主机，自动创建ftp账户，自动创建数据库，用户，并自动实现mysql自动定时备份，日志切割，程序备份。

这里因为其他..." />
<meta name="keywords" content="Linux, mysql, nginx, shell, " />
	
<link href="http://www.521php.com/wp-content/themes/zeke/style.css" rel="stylesheet" type="text/css" />
<link href="http://www.521php.com/wp-content/themes/zeke/miaov_style.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="http://www.521php.com/wp-content/themes/zeke/comments-ajax.js"></script>
<link rel='stylesheet' id='crayon-css'  href='http://www.521php.com/wp-content/plugins/crayon-syntax-highlighter/css/min/crayon.min.css?ver=2.2.0' type='text/css' media='all' />
<link rel='stylesheet' id='crayon-theme-ado-css'  href='http://www.521php.com/wp-content/plugins/crayon-syntax-highlighter/themes/ado/ado.css?ver=2.2.0' type='text/css' media='all' />
<link rel='stylesheet' id='crayon-font-courier-new-css'  href='http://www.521php.com/wp-content/plugins/crayon-syntax-highlighter/fonts/courier-new.css?ver=2.2.0' type='text/css' media='all' />
<script type='text/javascript' src='http://www.521php.com/wp-includes/js/jquery/jquery.js?ver=1.7.1'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var CrayonSyntaxSettings = {"version":"2.2.0","is_admin":"0","ajaxurl":"http:\/\/www.521php.com\/wp-admin\/admin-ajax.php","prefix":"crayon-","setting":"crayon-setting","selected":"crayon-setting-selected","changed":"crayon-setting-changed","special":"crayon-setting-special","orig_value":"data-orig-value","debug":""};;
var CrayonSyntaxStrings = {"copy":"\u4f7f\u7528 %s \u590d\u5236\uff0c\u4f7f\u7528 %s \u7c98\u8d34\u3002","minimize":"Click To Expand Code"};
/* ]]> */
</script>
<script type='text/javascript' src='http://www.521php.com/wp-content/plugins/crayon-syntax-highlighter/js/min/crayon.min.js?ver=2.2.0'></script>
<script type='text/javascript' src='http://www.521php.com/wp-includes/js/comment-reply.js?ver=20090102'></script>
<link rel='prev' title='shell脚本做nginx日志分析工具' href='http://www.521php.com/archives/1735/' />
<link rel='next' title='php批量去除指定目录的bom头' href='http://www.521php.com/archives/1746/' />
<link rel='canonical' href='http://www.521php.com/archives/1739/' />
<link rel='shortlink' href='http://www.521php.com/?p=1739' />
<link rel="Shortcut Icon" type="image/x-icon" href="http://www.521php.com/favicon.ico" /><!--[if lt IE 7]>
<script type="text/javascript" src="/wp-content/themes/MRjs/iepngfix_tilebg.js"></script>
<script type="text/javascript">
// <![CDATA[
if((window.navigator.appName.toUpperCase().indexOf("MICROSOFT")>=0)&&(document.execCommand))
try{
document.execCommand("BackgroundImageCache", false, true);
}
catch(e){}
// ]]>
</script>
<![endif]-->
</head>

<body>
<div id="wrap">
<!--头部-->
	<div id="header">
    	<div id="top">
        	<div class="mrlogo"><a href="http://www.521php.com/" title="  一键式虚拟主机搭建shell脚本-php个人博客,php技术博客,php博客">  一键式虚拟主机搭建shell脚本-php个人博客,php技术博客,php博客</a></div>
            <div class="search"><form method="get" target="_blank" id="searchform" action="http://www.521php.com/so.php">
<input type="hidden" name="url" value="521php.com" />
            <input class="field" name="s" id="s" type="text" value="百度谷歌一起搜！" onfocus="this.value=&#39;&#39;;" onblur="if(this.value==&#39;&#39;){this.value=&#39;百度谷歌一起搜！&#39;;}" />
            <input name="" type="submit" value="" class="so"id="go"  onmouseout="this.className=&#39;so&#39;" onmouseover="this.className=&#39;soHover&#39;" />
            </form></div>
        </div>
        <div id="nav">
        	<div class="menuL"><ul id="menu" class="menu"><li id="menu-item-480" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-480"><a title="返回首页" href="http://www.521php.com/"><span>首页</span></a></li>
<li id="menu-item-41" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-41"><a title="心情随笔" href="http://www.521php.com/archives/category/cclog/"><span>随笔</span></a></li>
<li id="menu-item-43" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-43"><a title="php技术" href="http://www.521php.com/archives/category/lovephp/"><span>我爱PHP</span></a></li>
<li id="menu-item-182" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-182"><a title="博采众长" href="http://www.521php.com/archives/category/team/"><span>博采众长</span></a></li>
<li id="menu-item-1749" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-1749"><a href="http://www.521php.com/archives/category/linux/"><span>Linux</span></a></li>
<li id="menu-item-514" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-514"><a title="小功能" href="http://www.521php.com/archives/category/gongneng/"><span>小功能</span></a></li>
<li id="menu-item-479" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-479"><a title="联系我" href="http://www.521php.com/message/"><span>关于我</span></a></li>
<li id="menu-item-1139" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-1139"><a title="相册集" href="/xiangce/"><span>相册</span></a></li>
<li id="menu-item-993" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-993"><a title="友情链接" href="http://www.521php.com/flink/"><span>兄弟链</span></a></li>
<li id="menu-item-1613" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-1613"><a title="cclovepp" href="http://love.521php.com"><span>CClovePP</span></a></li>
<li id="menu-item-1540" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1540"><a href="http://www.521php.com/video/"><span>我爱直播</span></a></li>
<li id="menu-item-1239" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1239"><a title="我爱外链" href="http://www.521php.com/wailian/"><span>外链自助</span></a></li>
</ul><span class="bgic"><img src="/images/bgic.gif"></span></div>
            <div class="rss_ico"><a href="http://www.521php.com/feed/" target="_blank" rel="nofollow" title="RSS订阅">RSS订阅</a></div>
        </div>
    </div>
<!--头部End-->
<div class="share_more" id="share_more" style="DISPLAY: none; LEFT: 160px; POSITION: absolute; TOP: 442px;">
<p onMouseOver="share_more_element.style.display='block';" onmouseout="share_more_element.style.display='none';">
<A class=share>分享到...</A> 
<A class="qqt" href="javascript:doShare('qqt');">腾讯微博</A>
<A class="sinat" href="javascript:doShare('sinat');">新浪微博</A>
<A class="qqpeng" href="javascript:doShare('qqpeng');">QQ朋友</A>
<A class="renren" href="javascript:doShare('renren');">人人网</A>
<A class="douban" href="javascript:doShare('douban');">豆瓣</A></p></div>
<SCRIPT type=text/javascript>
var share_more_element = null;
var share_postid = -1;
var postArray = [];
function getPos(obj){
	var pos = [];
	pos[0] = obj.offsetLeft;//X
	pos[1] = obj.offsetTop;//Y
	while (obj = obj.offsetParent){
		pos[0] += obj.offsetLeft;
		pos[1] += obj.offsetTop;
	}
	return pos;
}
//显示隐藏层
function share_more(postid, obj){
	share_postid = postid;
	var objPos = getPos(obj);
	objPos[0]-=7;objPos[1]-=5;
	if(share_more_element == null)share_more_element=document.getElementById("share_more");
	share_more_element.style.left=objPos[0]+"px";
	share_more_element.style.top=objPos[1]+"px";
	share_more_element.style.display="block";
}
//添加收藏夹
function doShare(stype){
	stitle = postArray[share_postid][0];
	surl = postArray[share_postid][1];
	sdire = postArray[share_postid][2];
	sbanner = postArray[share_postid][3];
	
	blogtitle = '张存超技术博客';
	bloghome = 'http://www.521php.com';
	
	stitle = blogtitle + ' - ' + stitle;
	
	switch(stype){
		case "fav":
			if (document.all){
				window.external.addFavorite(surl,stitle);
			}
			else if (window.sidebar){
				window.sidebar.addPanel(stitle,surl, "");
			}
			else{
				alert("抱歉,您的浏览器不支持添加到收藏夹,换个浏览器试试?");
			}
			break;
		//腾讯微博
		case "qqt":
			u=encodeURIComponent(surl);
			t=encodeURIComponent('#博客#：' + stitle);
			b=encodeURIComponent(sbanner);
			su=encodeURIComponent(bloghome);
			window.open('http://v.t.qq.com/share/share.php?title='+t+'&url='+u+'&site='+su+'&pic='+b,'_blank');	
			break;
		//新浪微博
		case "sinat":
			u=encodeURIComponent(surl);
			t=encodeURIComponent('#博客#：' + stitle);
			b=encodeURIComponent(sbanner);
			su=encodeURIComponent(bloghome);
			window.open('http://v.t.sina.com.cn/share/share.php?title='+t+'&url='+u+'&site='+su+'&pic='+b,'_blank');	
			break;
		//QQ朋友
		case "qqpeng":
			u=encodeURIComponent(surl);
			t=encodeURIComponent(stitle);
			b=encodeURIComponent(sbanner);
			su=encodeURIComponent(bloghome);
			window.open('http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?to=pengyou&title='+t+'&url='+u+'&site='+su+'&pic='+b,'_blank');	
			break;
		//谷歌
		case "googlereader":
			u=encodeURIComponent(surl);
			t=encodeURIComponent(stitle);
			su=encodeURIComponent(bloghome);
			st=encodeURIComponent(blogtitle);
			window.open('http://www.google.com/reader/link?url='+u+'&title='+t+'&snippet=&srcTitle='+st+'&srcUrl='+su,'_blank');
			break;
		//人人网
		case "renren":
			u=encodeURIComponent(surl);
			t=encodeURIComponent(stitle);
			window.open('http://share.renren.com/share/buttonshare.do?link='+u+'&title='+t+'source=&sourceUrl=','_blank');
			break;
		//豆瓣
		case "douban":
			u=encodeURIComponent(surl);
			t=encodeURIComponent(stitle);
			window.open('http://www.douban.com/recommend/?url='+u+'&title='+t,'_blank');
			break;
	}
}
</SCRIPT>

<SCRIPT>postArray[0]=[];postArray[0][0]="张存超技术博客";postArray[0][1]="http://www.521php.com";postArray[0][2]="张存超技术博客 - http://www.521php.com";postArray[0][3]="http://www.521php.com/logo.png";</SCRIPT><!--中间内容-->
    <div id="container">
    	<div id="content">
	<div class="content_text">
          <div class="content_t_top"><!--样式头部--></div>
           		<div class="content_t_main"><div style="margin-left: 20px;">
<!--淘宝内容页推广start-->
		<script type="text/javascript">
     document.write('<a href="http://www.buydazhe.com" title="买就打折网" target="_blank"><img src="http://www.buydazhe.com/them/img/banner1.png" width="640" height="73" /></a>');
</script>
<!--淘宝内容页推广end--></div></div>
<div class="content_t_bot"><!--样式尾部--></div>
</div>
        	<div class="content_text">
            	<div class="content_t_top"><!--样式头部--></div>
           		<div class="content_t_main">
               		<!--ContentTitle-->
                    					<div class="ContentTitle">
                    	<div class="Data">
                        	<div class="DataLeft"><p class="monthB">27</p><p class="dateA">05-2014</p> </div>
                        </div>
                        <div class="Title">
                        	<H3><a href="http://www.521php.com/archives/1739/" rel="bookmark">一键式虚拟主机搭建shell脚本</a></H3>
                            <ul>
                            	<li class="mrinc name">地狱中仰望天堂</li>
                                <li class="mrinc date">2014-05-27</li>
                                <li class="mrinc folder"><a href="http://www.521php.com/archives/category/linux/" title="查看 Linux 中的全部文章" rel="category tag">Linux</a>,<a href="http://www.521php.com/archives/category/gongneng/" title="查看 小功能 中的全部文章" rel="category tag">小功能</a>,<a href="http://www.521php.com/archives/category/lovephp/" title="查看 我爱PHP 中的全部文章" rel="category tag">我爱PHP</a>,<a href="http://www.521php.com/archives/category/tj/" title="查看 推荐文章 中的全部文章" rel="category tag">推荐文章</a></li>
                                <LI class="mrinc browse"><a href="#">浏览:53</a></LI>
                          		<LI class="mrinc like"><a href="http://www.521php.com/archives/1739/#respond" title="《一键式虚拟主机搭建shell脚本》上的评论">无评论</a></LI>
                                <li class="mrinc admin"></li>
                            </ul>
                        </div>
                    </div><!--content_banner-->
                    <div class="content_banner">
                    	
                        <div class="text" id="a1739"><p>今天下午写了一个简单的一键式自动虚拟主机搭建shell脚本，脚本实现自动配置nginx虚拟主机，自动创建ftp账户，自动创建数据库，用户，并自动实现mysql自动定时备份，日志切割，程序备份。</p>
<p>这里因为其他原因，就将备份机制去掉了，代码如下。</p>
<p>首先需要一个基础的nginx虚拟主机配置文件，一般情况下，我们配置虚拟主机都是建一个vhost目录，这里我在/etc/nginx下面建了一个default.conf文件</p><!-- Crayon Syntax Highlighter v2.2.0 -->

		<div id="crayon-53a0396ddd9e6" class="crayon-syntax crayon-theme-ado crayon-font-courier-new crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover wrap" style=" max-width: 645px; margin-top: 12px; margin-bottom: 12px; float: left; clear: both; font-size: 13px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover hide delay" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><div class="crayon-button crayon-nums-button" title="切换显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 18.2px !important; line-height: 18.2px !important;"></div>
			<div class="crayon-plain-wrap"><textarea  class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;">
log_format  #host#  '$remote_addr - $remote_user [$time_local] "$request" '
             '$status $body_bytes_sent "$http_referer" '
             '"$http_user_agent" $http_x_forwarded_for';
server {
        listen       80;
    server_name  #host#;
    root  #hosts#/#host#/html;
    index index.html index.htm index.php default.html default.htm default.php;
        location / {
                autoindex  on;
        }
        error_page  404              /404.html;
        # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000
         #注意这一句
          location ~ ^(.+\.php)(.*)$ {
          fastcgi_pass   127.0.0.1:9000;
         fastcgi_index  index.php;
         fastcgi_param  SCRIPT_FILENAME   $document_root$fastcgi_script_name;
         include        fastcgi_params;
         }

        # redirect server error pages to the static page /50x.html

        access_log  #hosts#/#host#/log/#host#.log  #host#;
}</textarea></div>
			<div class="crayon-main" style=" max-width: 645px;">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 13px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-53a0396ddd9e6-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-53a0396ddd9e6-2">2</div><div class="crayon-num" data-line="crayon-53a0396ddd9e6-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-53a0396ddd9e6-4">4</div><div class="crayon-num" data-line="crayon-53a0396ddd9e6-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-53a0396ddd9e6-6">6</div><div class="crayon-num" data-line="crayon-53a0396ddd9e6-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-53a0396ddd9e6-8">8</div><div class="crayon-num" data-line="crayon-53a0396ddd9e6-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-53a0396ddd9e6-10">10</div><div class="crayon-num" data-line="crayon-53a0396ddd9e6-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-53a0396ddd9e6-12">12</div><div class="crayon-num" data-line="crayon-53a0396ddd9e6-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-53a0396ddd9e6-14">14</div><div class="crayon-num" data-line="crayon-53a0396ddd9e6-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-53a0396ddd9e6-16">16</div><div class="crayon-num" data-line="crayon-53a0396ddd9e6-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-53a0396ddd9e6-18">18</div><div class="crayon-num" data-line="crayon-53a0396ddd9e6-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-53a0396ddd9e6-20">20</div><div class="crayon-num" data-line="crayon-53a0396ddd9e6-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-53a0396ddd9e6-22">22</div><div class="crayon-num" data-line="crayon-53a0396ddd9e6-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-53a0396ddd9e6-24">24</div><div class="crayon-num" data-line="crayon-53a0396ddd9e6-25">25</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 13px !important; line-height: 15px !important;"><div class="crayon-line" id="crayon-53a0396ddd9e6-1"><span class="i">log_format</span><span class="h">&nbsp;&nbsp;</span><span class="p">#host#&nbsp;&nbsp;'$remote_addr - $remote_user [$time_local] "$request" '</span></div><div class="crayon-line crayon-striped-line" id="crayon-53a0396ddd9e6-2"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="s">'$status $body_bytes_sent "$http_referer" '</span></div><div class="crayon-line" id="crayon-53a0396ddd9e6-3"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="s">'"$http_user_agent" $http_x_forwarded_for'</span><span class="sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-53a0396ddd9e6-4"><span class="e">server</span><span class="h"> </span><span class="sy">{</span></div><div class="crayon-line" id="crayon-53a0396ddd9e6-5"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="i">listen</span><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="cn">80</span><span class="sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-53a0396ddd9e6-6"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="i">server_name</span><span class="h">&nbsp;&nbsp;</span><span class="p">#host#;</span></div><div class="crayon-line" id="crayon-53a0396ddd9e6-7"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="i">root</span><span class="h">&nbsp;&nbsp;</span><span class="p">#hosts#/#host#/html;</span></div><div class="crayon-line crayon-striped-line" id="crayon-53a0396ddd9e6-8"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="e">index </span><span class="v">index</span><span class="sy">.</span><span class="e">html </span><span class="v">index</span><span class="sy">.</span><span class="e">htm </span><span class="v">index</span><span class="sy">.</span><span class="e">php </span><span class="st">default</span><span class="sy">.</span><span class="e">html </span><span class="st">default</span><span class="sy">.</span><span class="e">htm </span><span class="st">default</span><span class="sy">.</span><span class="i">php</span><span class="sy">;</span></div><div class="crayon-line" id="crayon-53a0396ddd9e6-9"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="e">location</span><span class="h"> </span><span class="o">/</span><span class="h"> </span><span class="sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-53a0396ddd9e6-10"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="e">autoindex&nbsp;&nbsp;</span><span class="i">on</span><span class="sy">;</span></div><div class="crayon-line" id="crayon-53a0396ddd9e6-11"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-53a0396ddd9e6-12"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="i">error_page</span><span class="h">&nbsp;&nbsp;</span><span class="cn">404</span><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="o">/</span><span class="cn">404.html</span><span class="sy">;</span></div><div class="crayon-line" id="crayon-53a0396ddd9e6-13"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="p"># pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000</span></div><div class="crayon-line crayon-striped-line" id="crayon-53a0396ddd9e6-14"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="p">#注意这一句</span></div><div class="crayon-line" id="crayon-53a0396ddd9e6-15"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="i">location</span><span class="h"> </span><span class="o">~</span><span class="h"> </span><span class="o">^</span><span class="sy">(</span><span class="sy">.</span><span class="o">+</span><span class="sy">\</span><span class="sy">.</span><span class="i">php</span><span class="sy">)</span><span class="sy">(</span><span class="sy">.</span><span class="o">*</span><span class="sy">)</span><span class="sy">$</span><span class="h"> </span><span class="sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-53a0396ddd9e6-16"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="i">fastcgi_pass</span><span class="h">&nbsp;&nbsp; </span><span class="cn">127.0.0.1</span><span class="o">:</span><span class="cn">9000</span><span class="sy">;</span></div><div class="crayon-line" id="crayon-53a0396ddd9e6-17"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="e">fastcgi_index&nbsp;&nbsp;</span><span class="v">index</span><span class="sy">.</span><span class="i">php</span><span class="sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-53a0396ddd9e6-18"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="e">fastcgi_param&nbsp;&nbsp;</span><span class="i">SCRIPT_FILENAME</span><span class="h">&nbsp;&nbsp; </span><span class="sy">$</span><span class="i">document_root</span><span class="sy">$</span><span class="i">fastcgi_script_name</span><span class="sy">;</span></div><div class="crayon-line" id="crayon-53a0396ddd9e6-19"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="e">include&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="i">fastcgi_params</span><span class="sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-53a0396ddd9e6-20"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="sy">}</span></div><div class="crayon-line" id="crayon-53a0396ddd9e6-21">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-53a0396ddd9e6-22"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="p"># redirect server error pages to the static page /50x.html</span></div><div class="crayon-line" id="crayon-53a0396ddd9e6-23">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-53a0396ddd9e6-24"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="i">access_log</span><span class="h">&nbsp;&nbsp;</span><span class="p">#hosts#/#host#/log/#host#.log&nbsp;&nbsp;#host#;</span></div><div class="crayon-line" id="crayon-53a0396ddd9e6-25"><span class="sy">}</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0141 seconds] -->
<p>注意里面一些关键路径，我用特殊字符组合来表示，这样方便我们添加虚拟注意的时候进行匹配替换</p>
<p>host.sh脚本如下</p><!-- Crayon Syntax Highlighter v2.2.0 -->

		<div id="crayon-53a0396ddda44" class="crayon-syntax crayon-theme-ado crayon-font-courier-new crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover wrap" style=" max-width: 645px; margin-top: 12px; margin-bottom: 12px; float: left; clear: both; font-size: 13px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover hide delay" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><div class="crayon-button crayon-nums-button" title="切换显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 18.2px !important; line-height: 18.2px !important;"></div>
			<div class="crayon-plain-wrap"><textarea  class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;">
#/bin/sh
hosts="/var/www/html" #主机总目录
default="/etc/nginx/default.conf"  #default.conf位置
vhost="/etc/nginx/vhost"  #虚拟主机配置文件目录
echo "1.add ftp user"
echo "please input websit:"
read host
if [ -d "$hosts/$host" ]
then
echo $hosts/$host
echo '[warning]dir is already exists!'
exit 0
fi
echo "add user,please input user name:"
read name
del -r $name &gt;/dev/null 2&gt;&amp;1
adduser -d $hosts/$host -g ftp -s /sbin/nologin $name
passwd $name
chmod 755 $hosts/$host
mkdir -p $hosts/$host/html $hosts/$host/bak $hosts/$host/log
mkdir -p $hosts/$host/bak/code $hosts/$host/bak/sql
echo "mkdir:"$hosts/$host/html $hosts/$host/bak $hosts/$host/log
echo "mkdir:"$hosts/$host/bak/code $hosts/$host/bak/sql
chown -R $name:ftp $hosts/$host
echo "ok,add user success!name=$name,password=youwrite"
echo "If you need a database, please enter a database name, if not required, blank can be"
read database
if [ -n "$database" ]
then
echo "please input dbuser"
read dbuser
echo "please input dbpwd"
read dbpwd
HOSTNAME="127.0.0.1"
PORT="3306"
USERNAME="root"
echo "input root pwd"
read PASSWORD
fi
echo "2.To configure nginx"
cat $default | sed -e "s:#hosts#:${hosts}:g"|sed -e "s/#host#/${host}/g" &gt; $vhost/$host.conf
/usr/sbin/nginx -s reload
echo "config nginx success"
if [ -z "$database"  ]
then
echo 'ok,finish!'
exit 0
fi
echo "3.add mysql user database"

create_db_sql="insert into mysql.user(Host,User,Password) values('localhost','${dbuser}',password('${dbpwd}'))"
mysql -h${HOSTNAME}  -P${PORT}  -u${USERNAME} -p${PASSWORD} -e "{create_db_sql}"
if [ $? -ne 0 ]
then
echo 'add db user error'
exit 0
fi
sleep 1
create_db_sql="create database IF NOT EXISTS ${database}"
mysql -h${HOSTNAME}  -P${PORT}  -u${USERNAME} -p${PASSWORD} -e "{create_db_sql}"
if [ $? -ne 0 ]
then
echo 'add db error'
exit 0
fi
sleep 1
create_db_sql="flush privileges"
mysql -h${HOSTNAME}  -P${PORT}  -u${USERNAME} -p${PASSWORD} -e "{create_db_sql}"

create_db_sql="grant all  on ${database}.* to ${dbuser}@localhost identified by '${dbpwd}'"
mysql -h${HOSTNAME}  -P${PORT}  -u${USERNAME} -p${PASSWORD} -e "${create_db_sql}"
if [ $? -ne 0 ]
then
echo 'user to db user error'
echo $create_db_sql
exit 0
fi
create_db_sql="flush privileges"
mysql -h${HOSTNAME}  -P${PORT}  -u${USERNAME} -p${PASSWORD} -e "{create_db_sql}"
echo 'ok,finish!'</textarea></div>
			<div class="crayon-main" style=" max-width: 645px;">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 13px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-53a0396ddda44-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-53a0396ddda44-2">2</div><div class="crayon-num" data-line="crayon-53a0396ddda44-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-53a0396ddda44-4">4</div><div class="crayon-num" data-line="crayon-53a0396ddda44-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-53a0396ddda44-6">6</div><div class="crayon-num" data-line="crayon-53a0396ddda44-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-53a0396ddda44-8">8</div><div class="crayon-num" data-line="crayon-53a0396ddda44-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-53a0396ddda44-10">10</div><div class="crayon-num" data-line="crayon-53a0396ddda44-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-53a0396ddda44-12">12</div><div class="crayon-num" data-line="crayon-53a0396ddda44-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-53a0396ddda44-14">14</div><div class="crayon-num" data-line="crayon-53a0396ddda44-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-53a0396ddda44-16">16</div><div class="crayon-num" data-line="crayon-53a0396ddda44-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-53a0396ddda44-18">18</div><div class="crayon-num" data-line="crayon-53a0396ddda44-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-53a0396ddda44-20">20</div><div class="crayon-num" data-line="crayon-53a0396ddda44-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-53a0396ddda44-22">22</div><div class="crayon-num" data-line="crayon-53a0396ddda44-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-53a0396ddda44-24">24</div><div class="crayon-num" data-line="crayon-53a0396ddda44-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-53a0396ddda44-26">26</div><div class="crayon-num" data-line="crayon-53a0396ddda44-27">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-53a0396ddda44-28">28</div><div class="crayon-num" data-line="crayon-53a0396ddda44-29">29</div><div class="crayon-num crayon-striped-num" data-line="crayon-53a0396ddda44-30">30</div><div class="crayon-num" data-line="crayon-53a0396ddda44-31">31</div><div class="crayon-num crayon-striped-num" data-line="crayon-53a0396ddda44-32">32</div><div class="crayon-num" data-line="crayon-53a0396ddda44-33">33</div><div class="crayon-num crayon-striped-num" data-line="crayon-53a0396ddda44-34">34</div><div class="crayon-num" data-line="crayon-53a0396ddda44-35">35</div><div class="crayon-num crayon-striped-num" data-line="crayon-53a0396ddda44-36">36</div><div class="crayon-num" data-line="crayon-53a0396ddda44-37">37</div><div class="crayon-num crayon-striped-num" data-line="crayon-53a0396ddda44-38">38</div><div class="crayon-num" data-line="crayon-53a0396ddda44-39">39</div><div class="crayon-num crayon-striped-num" data-line="crayon-53a0396ddda44-40">40</div><div class="crayon-num" data-line="crayon-53a0396ddda44-41">41</div><div class="crayon-num crayon-striped-num" data-line="crayon-53a0396ddda44-42">42</div><div class="crayon-num" data-line="crayon-53a0396ddda44-43">43</div><div class="crayon-num crayon-striped-num" data-line="crayon-53a0396ddda44-44">44</div><div class="crayon-num" data-line="crayon-53a0396ddda44-45">45</div><div class="crayon-num crayon-striped-num" data-line="crayon-53a0396ddda44-46">46</div><div class="crayon-num" data-line="crayon-53a0396ddda44-47">47</div><div class="crayon-num crayon-striped-num" data-line="crayon-53a0396ddda44-48">48</div><div class="crayon-num" data-line="crayon-53a0396ddda44-49">49</div><div class="crayon-num crayon-striped-num" data-line="crayon-53a0396ddda44-50">50</div><div class="crayon-num" data-line="crayon-53a0396ddda44-51">51</div><div class="crayon-num crayon-striped-num" data-line="crayon-53a0396ddda44-52">52</div><div class="crayon-num" data-line="crayon-53a0396ddda44-53">53</div><div class="crayon-num crayon-striped-num" data-line="crayon-53a0396ddda44-54">54</div><div class="crayon-num" data-line="crayon-53a0396ddda44-55">55</div><div class="crayon-num crayon-striped-num" data-line="crayon-53a0396ddda44-56">56</div><div class="crayon-num" data-line="crayon-53a0396ddda44-57">57</div><div class="crayon-num crayon-striped-num" data-line="crayon-53a0396ddda44-58">58</div><div class="crayon-num" data-line="crayon-53a0396ddda44-59">59</div><div class="crayon-num crayon-striped-num" data-line="crayon-53a0396ddda44-60">60</div><div class="crayon-num" data-line="crayon-53a0396ddda44-61">61</div><div class="crayon-num crayon-striped-num" data-line="crayon-53a0396ddda44-62">62</div><div class="crayon-num" data-line="crayon-53a0396ddda44-63">63</div><div class="crayon-num crayon-striped-num" data-line="crayon-53a0396ddda44-64">64</div><div class="crayon-num" data-line="crayon-53a0396ddda44-65">65</div><div class="crayon-num crayon-striped-num" data-line="crayon-53a0396ddda44-66">66</div><div class="crayon-num" data-line="crayon-53a0396ddda44-67">67</div><div class="crayon-num crayon-striped-num" data-line="crayon-53a0396ddda44-68">68</div><div class="crayon-num" data-line="crayon-53a0396ddda44-69">69</div><div class="crayon-num crayon-striped-num" data-line="crayon-53a0396ddda44-70">70</div><div class="crayon-num" data-line="crayon-53a0396ddda44-71">71</div><div class="crayon-num crayon-striped-num" data-line="crayon-53a0396ddda44-72">72</div><div class="crayon-num" data-line="crayon-53a0396ddda44-73">73</div><div class="crayon-num crayon-striped-num" data-line="crayon-53a0396ddda44-74">74</div><div class="crayon-num" data-line="crayon-53a0396ddda44-75">75</div><div class="crayon-num crayon-striped-num" data-line="crayon-53a0396ddda44-76">76</div><div class="crayon-num" data-line="crayon-53a0396ddda44-77">77</div><div class="crayon-num crayon-striped-num" data-line="crayon-53a0396ddda44-78">78</div><div class="crayon-num" data-line="crayon-53a0396ddda44-79">79</div><div class="crayon-num crayon-striped-num" data-line="crayon-53a0396ddda44-80">80</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 13px !important; line-height: 15px !important;"><div class="crayon-line" id="crayon-53a0396ddda44-1"><span class="p">#/bin/sh</span></div><div class="crayon-line crayon-striped-line" id="crayon-53a0396ddda44-2"><span class="v">hosts</span><span class="o">=</span><span class="s">"/var/www/html"</span><span class="h"> </span><span class="p">#主机总目录</span></div><div class="crayon-line" id="crayon-53a0396ddda44-3"><span class="st">default</span><span class="o">=</span><span class="s">"/etc/nginx/default.conf"</span><span class="h">&nbsp;&nbsp;</span><span class="p">#default.conf位置</span></div><div class="crayon-line crayon-striped-line" id="crayon-53a0396ddda44-4"><span class="v">vhost</span><span class="o">=</span><span class="s">"/etc/nginx/vhost"</span><span class="h">&nbsp;&nbsp;</span><span class="p">#虚拟主机配置文件目录</span></div><div class="crayon-line" id="crayon-53a0396ddda44-5"><span class="r">echo</span><span class="h"> </span><span class="s">"1.add ftp user"</span></div><div class="crayon-line crayon-striped-line" id="crayon-53a0396ddda44-6"><span class="r">echo</span><span class="h"> </span><span class="s">"please input websit:"</span></div><div class="crayon-line" id="crayon-53a0396ddda44-7"><span class="r">read</span><span class="h"> </span><span class="e">host</span></div><div class="crayon-line crayon-striped-line" id="crayon-53a0396ddda44-8"><span class="st">if</span><span class="h"> </span><span class="sy">[</span><span class="h"> </span><span class="o">-</span><span class="i">d</span><span class="h"> </span><span class="s">"$hosts/$host"</span><span class="h"> </span><span class="sy">]</span></div><div class="crayon-line" id="crayon-53a0396ddda44-9"><span class="st">then</span></div><div class="crayon-line crayon-striped-line" id="crayon-53a0396ddda44-10"><span class="r">echo</span><span class="h"> </span><span class="v">$hosts</span><span class="o">/</span><span class="v">$host</span></div><div class="crayon-line" id="crayon-53a0396ddda44-11"><span class="r">echo</span><span class="h"> </span><span class="s">'[warning]dir is already exists!'</span></div><div class="crayon-line crayon-striped-line" id="crayon-53a0396ddda44-12"><span class="r">exit</span><span class="h"> </span><span class="cn">0</span></div><div class="crayon-line" id="crayon-53a0396ddda44-13"><span class="st">fi</span></div><div class="crayon-line crayon-striped-line" id="crayon-53a0396ddda44-14"><span class="r">echo</span><span class="h"> </span><span class="s">"add user,please input user name:"</span></div><div class="crayon-line" id="crayon-53a0396ddda44-15"><span class="r">read</span><span class="h"> </span><span class="e">name</span></div><div class="crayon-line crayon-striped-line" id="crayon-53a0396ddda44-16"><span class="i">del</span><span class="h"> </span><span class="o">-</span><span class="i">r</span><span class="h"> </span><span class="v">$name</span><span class="h"> </span><span class="o">&gt;</span><span class="o">/</span><span class="i">dev</span><span class="o">/</span><span class="t">null</span><span class="h"> </span><span class="cn">2</span><span class="o">&gt;</span><span class="o">&amp;</span><span class="cn">1</span></div><div class="crayon-line" id="crayon-53a0396ddda44-17"><span class="i">adduser</span><span class="h"> </span><span class="o">-</span><span class="i">d</span><span class="h"> </span><span class="v">$hosts</span><span class="o">/</span><span class="v">$host</span><span class="h"> </span><span class="o">-</span><span class="i">g</span><span class="h"> </span><span class="i">ftp</span><span class="h"> </span><span class="o">-</span><span class="i">s</span><span class="h"> </span><span class="o">/</span><span class="i">sbin</span><span class="o">/</span><span class="i">nologin</span><span class="h"> </span><span class="v">$name</span></div><div class="crayon-line crayon-striped-line" id="crayon-53a0396ddda44-18"><span class="i">passwd</span><span class="h"> </span><span class="v">$name</span></div><div class="crayon-line" id="crayon-53a0396ddda44-19"><span class="r">chmod</span><span class="h"> </span><span class="cn">755</span><span class="h"> </span><span class="v">$hosts</span><span class="o">/</span><span class="v">$host</span></div><div class="crayon-line crayon-striped-line" id="crayon-53a0396ddda44-20"><span class="r">mkdir</span><span class="h"> </span><span class="o">-</span><span class="i">p</span><span class="h"> </span><span class="v">$hosts</span><span class="o">/</span><span class="v">$host</span><span class="o">/</span><span class="i">html</span><span class="h"> </span><span class="v">$hosts</span><span class="o">/</span><span class="v">$host</span><span class="o">/</span><span class="i">bak</span><span class="h"> </span><span class="v">$hosts</span><span class="o">/</span><span class="v">$host</span><span class="o">/</span><span class="e">log</span></div><div class="crayon-line" id="crayon-53a0396ddda44-21"><span class="r">mkdir</span><span class="h"> </span><span class="o">-</span><span class="i">p</span><span class="h"> </span><span class="v">$hosts</span><span class="o">/</span><span class="v">$host</span><span class="o">/</span><span class="i">bak</span><span class="o">/</span><span class="i">code</span><span class="h"> </span><span class="v">$hosts</span><span class="o">/</span><span class="v">$host</span><span class="o">/</span><span class="i">bak</span><span class="o">/</span><span class="e">sql</span></div><div class="crayon-line crayon-striped-line" id="crayon-53a0396ddda44-22"><span class="r">echo</span><span class="h"> </span><span class="s">"mkdir:"</span><span class="v">$hosts</span><span class="o">/</span><span class="v">$host</span><span class="o">/</span><span class="i">html</span><span class="h"> </span><span class="v">$hosts</span><span class="o">/</span><span class="v">$host</span><span class="o">/</span><span class="i">bak</span><span class="h"> </span><span class="v">$hosts</span><span class="o">/</span><span class="v">$host</span><span class="o">/</span><span class="e">log</span></div><div class="crayon-line" id="crayon-53a0396ddda44-23"><span class="r">echo</span><span class="h"> </span><span class="s">"mkdir:"</span><span class="v">$hosts</span><span class="o">/</span><span class="v">$host</span><span class="o">/</span><span class="i">bak</span><span class="o">/</span><span class="i">code</span><span class="h"> </span><span class="v">$hosts</span><span class="o">/</span><span class="v">$host</span><span class="o">/</span><span class="i">bak</span><span class="o">/</span><span class="e">sql</span></div><div class="crayon-line crayon-striped-line" id="crayon-53a0396ddda44-24"><span class="r">chown</span><span class="h"> </span><span class="o">-</span><span class="i">R</span><span class="h"> </span><span class="v">$name</span><span class="o">:</span><span class="i">ftp</span><span class="h"> </span><span class="v">$hosts</span><span class="o">/</span><span class="v">$host</span></div><div class="crayon-line" id="crayon-53a0396ddda44-25"><span class="r">echo</span><span class="h"> </span><span class="s">"ok,add user success!name=$name,password=youwrite"</span></div><div class="crayon-line crayon-striped-line" id="crayon-53a0396ddda44-26"><span class="r">echo</span><span class="h"> </span><span class="s">"If you need a database, please enter a database name, if not required, blank can be"</span></div><div class="crayon-line" id="crayon-53a0396ddda44-27"><span class="r">read</span><span class="h"> </span><span class="e">database</span></div><div class="crayon-line crayon-striped-line" id="crayon-53a0396ddda44-28"><span class="st">if</span><span class="h"> </span><span class="sy">[</span><span class="h"> </span><span class="o">-</span><span class="i">n</span><span class="h"> </span><span class="s">"$database"</span><span class="h"> </span><span class="sy">]</span></div><div class="crayon-line" id="crayon-53a0396ddda44-29"><span class="st">then</span></div><div class="crayon-line crayon-striped-line" id="crayon-53a0396ddda44-30"><span class="r">echo</span><span class="h"> </span><span class="s">"please input dbuser"</span></div><div class="crayon-line" id="crayon-53a0396ddda44-31"><span class="r">read</span><span class="h"> </span><span class="e">dbuser</span></div><div class="crayon-line crayon-striped-line" id="crayon-53a0396ddda44-32"><span class="r">echo</span><span class="h"> </span><span class="s">"please input dbpwd"</span></div><div class="crayon-line" id="crayon-53a0396ddda44-33"><span class="r">read</span><span class="h"> </span><span class="e">dbpwd</span></div><div class="crayon-line crayon-striped-line" id="crayon-53a0396ddda44-34"><span class="v">HOSTNAME</span><span class="o">=</span><span class="s">"127.0.0.1"</span></div><div class="crayon-line" id="crayon-53a0396ddda44-35"><span class="v">PORT</span><span class="o">=</span><span class="s">"3306"</span></div><div class="crayon-line crayon-striped-line" id="crayon-53a0396ddda44-36"><span class="v">USERNAME</span><span class="o">=</span><span class="s">"root"</span></div><div class="crayon-line" id="crayon-53a0396ddda44-37"><span class="r">echo</span><span class="h"> </span><span class="s">"input root pwd"</span></div><div class="crayon-line crayon-striped-line" id="crayon-53a0396ddda44-38"><span class="r">read</span><span class="h"> </span><span class="e">PASSWORD</span></div><div class="crayon-line" id="crayon-53a0396ddda44-39"><span class="st">fi</span></div><div class="crayon-line crayon-striped-line" id="crayon-53a0396ddda44-40"><span class="r">echo</span><span class="h"> </span><span class="s">"2.To configure nginx"</span></div><div class="crayon-line" id="crayon-53a0396ddda44-41"><span class="r">cat</span><span class="h"> </span><span class="v">$default</span><span class="h"> </span><span class="o">|</span><span class="h"> </span><span class="r">sed</span><span class="h"> </span><span class="o">-</span><span class="i">e</span><span class="h"> </span><span class="s">"s:#hosts#:${hosts}:g"</span><span class="o">|</span><span class="r">sed</span><span class="h"> </span><span class="o">-</span><span class="i">e</span><span class="h"> </span><span class="s">"s/#host#/${host}/g"</span><span class="h"> </span><span class="o">&gt;</span><span class="h"> </span><span class="v">$vhost</span><span class="o">/</span><span class="v">$host</span><span class="e">.conf</span></div><div class="crayon-line crayon-striped-line" id="crayon-53a0396ddda44-42"><span class="o">/</span><span class="i">usr</span><span class="o">/</span><span class="i">sbin</span><span class="o">/</span><span class="i">nginx</span><span class="h"> </span><span class="o">-</span><span class="i">s</span><span class="h"> </span><span class="e">reload</span></div><div class="crayon-line" id="crayon-53a0396ddda44-43"><span class="r">echo</span><span class="h"> </span><span class="s">"config nginx success"</span></div><div class="crayon-line crayon-striped-line" id="crayon-53a0396ddda44-44"><span class="st">if</span><span class="h"> </span><span class="sy">[</span><span class="h"> </span><span class="o">-</span><span class="i">z</span><span class="h"> </span><span class="s">"$database"</span><span class="h">&nbsp;&nbsp;</span><span class="sy">]</span></div><div class="crayon-line" id="crayon-53a0396ddda44-45"><span class="st">then</span></div><div class="crayon-line crayon-striped-line" id="crayon-53a0396ddda44-46"><span class="r">echo</span><span class="h"> </span><span class="s">'ok,finish!'</span></div><div class="crayon-line" id="crayon-53a0396ddda44-47"><span class="r">exit</span><span class="h"> </span><span class="cn">0</span></div><div class="crayon-line crayon-striped-line" id="crayon-53a0396ddda44-48"><span class="st">fi</span></div><div class="crayon-line" id="crayon-53a0396ddda44-49"><span class="r">echo</span><span class="h"> </span><span class="s">"3.add mysql user database"</span></div><div class="crayon-line crayon-striped-line" id="crayon-53a0396ddda44-50">&nbsp;</div><div class="crayon-line" id="crayon-53a0396ddda44-51"><span class="v">create_db_sql</span><span class="o">=</span><span class="s">"insert into mysql.user(Host,User,Password) values('localhost','${dbuser}',password('${dbpwd}'))"</span></div><div class="crayon-line crayon-striped-line" id="crayon-53a0396ddda44-52"><span class="e">mysql</span><span class="h"> </span><span class="o">-</span><span class="e">h</span><span class="sy">$</span><span class="sy">{</span><span class="i">HOSTNAME</span><span class="sy">}</span><span class="h">&nbsp;&nbsp;</span><span class="o">-</span><span class="e">P</span><span class="sy">$</span><span class="sy">{</span><span class="i">PORT</span><span class="sy">}</span><span class="h">&nbsp;&nbsp;</span><span class="o">-</span><span class="e">u</span><span class="sy">$</span><span class="sy">{</span><span class="i">USERNAME</span><span class="sy">}</span><span class="h"> </span><span class="o">-</span><span class="e">p</span><span class="sy">$</span><span class="sy">{</span><span class="i">PASSWORD</span><span class="sy">}</span><span class="h"> </span><span class="o">-</span><span class="i">e</span><span class="h"> </span><span class="s">"{create_db_sql}"</span></div><div class="crayon-line" id="crayon-53a0396ddda44-53"><span class="st">if</span><span class="h"> </span><span class="sy">[</span><span class="h"> </span><span class="sy">$</span><span class="sy">?</span><span class="h"> </span><span class="o">-</span><span class="i">ne</span><span class="h"> </span><span class="cn">0</span><span class="h"> </span><span class="sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-53a0396ddda44-54"><span class="st">then</span></div><div class="crayon-line" id="crayon-53a0396ddda44-55"><span class="r">echo</span><span class="h"> </span><span class="s">'add db user error'</span></div><div class="crayon-line crayon-striped-line" id="crayon-53a0396ddda44-56"><span class="r">exit</span><span class="h"> </span><span class="cn">0</span></div><div class="crayon-line" id="crayon-53a0396ddda44-57"><span class="st">fi</span></div><div class="crayon-line crayon-striped-line" id="crayon-53a0396ddda44-58"><span class="r">sleep</span><span class="h"> </span><span class="cn">1</span></div><div class="crayon-line" id="crayon-53a0396ddda44-59"><span class="v">create_db_sql</span><span class="o">=</span><span class="s">"create database IF NOT EXISTS ${database}"</span></div><div class="crayon-line crayon-striped-line" id="crayon-53a0396ddda44-60"><span class="e">mysql</span><span class="h"> </span><span class="o">-</span><span class="e">h</span><span class="sy">$</span><span class="sy">{</span><span class="i">HOSTNAME</span><span class="sy">}</span><span class="h">&nbsp;&nbsp;</span><span class="o">-</span><span class="e">P</span><span class="sy">$</span><span class="sy">{</span><span class="i">PORT</span><span class="sy">}</span><span class="h">&nbsp;&nbsp;</span><span class="o">-</span><span class="e">u</span><span class="sy">$</span><span class="sy">{</span><span class="i">USERNAME</span><span class="sy">}</span><span class="h"> </span><span class="o">-</span><span class="e">p</span><span class="sy">$</span><span class="sy">{</span><span class="i">PASSWORD</span><span class="sy">}</span><span class="h"> </span><span class="o">-</span><span class="i">e</span><span class="h"> </span><span class="s">"{create_db_sql}"</span></div><div class="crayon-line" id="crayon-53a0396ddda44-61"><span class="st">if</span><span class="h"> </span><span class="sy">[</span><span class="h"> </span><span class="sy">$</span><span class="sy">?</span><span class="h"> </span><span class="o">-</span><span class="i">ne</span><span class="h"> </span><span class="cn">0</span><span class="h"> </span><span class="sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-53a0396ddda44-62"><span class="st">then</span></div><div class="crayon-line" id="crayon-53a0396ddda44-63"><span class="r">echo</span><span class="h"> </span><span class="s">'add db error'</span></div><div class="crayon-line crayon-striped-line" id="crayon-53a0396ddda44-64"><span class="r">exit</span><span class="h"> </span><span class="cn">0</span></div><div class="crayon-line" id="crayon-53a0396ddda44-65"><span class="st">fi</span></div><div class="crayon-line crayon-striped-line" id="crayon-53a0396ddda44-66"><span class="r">sleep</span><span class="h"> </span><span class="cn">1</span></div><div class="crayon-line" id="crayon-53a0396ddda44-67"><span class="v">create_db_sql</span><span class="o">=</span><span class="s">"flush privileges"</span></div><div class="crayon-line crayon-striped-line" id="crayon-53a0396ddda44-68"><span class="e">mysql</span><span class="h"> </span><span class="o">-</span><span class="e">h</span><span class="sy">$</span><span class="sy">{</span><span class="i">HOSTNAME</span><span class="sy">}</span><span class="h">&nbsp;&nbsp;</span><span class="o">-</span><span class="e">P</span><span class="sy">$</span><span class="sy">{</span><span class="i">PORT</span><span class="sy">}</span><span class="h">&nbsp;&nbsp;</span><span class="o">-</span><span class="e">u</span><span class="sy">$</span><span class="sy">{</span><span class="i">USERNAME</span><span class="sy">}</span><span class="h"> </span><span class="o">-</span><span class="e">p</span><span class="sy">$</span><span class="sy">{</span><span class="i">PASSWORD</span><span class="sy">}</span><span class="h"> </span><span class="o">-</span><span class="i">e</span><span class="h"> </span><span class="s">"{create_db_sql}"</span></div><div class="crayon-line" id="crayon-53a0396ddda44-69">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-53a0396ddda44-70"><span class="v">create_db_sql</span><span class="o">=</span><span class="s">"grant all&nbsp;&nbsp;on ${database}.* to ${dbuser}@localhost identified by '${dbpwd}'"</span></div><div class="crayon-line" id="crayon-53a0396ddda44-71"><span class="e">mysql</span><span class="h"> </span><span class="o">-</span><span class="e">h</span><span class="sy">$</span><span class="sy">{</span><span class="i">HOSTNAME</span><span class="sy">}</span><span class="h">&nbsp;&nbsp;</span><span class="o">-</span><span class="e">P</span><span class="sy">$</span><span class="sy">{</span><span class="i">PORT</span><span class="sy">}</span><span class="h">&nbsp;&nbsp;</span><span class="o">-</span><span class="e">u</span><span class="sy">$</span><span class="sy">{</span><span class="i">USERNAME</span><span class="sy">}</span><span class="h"> </span><span class="o">-</span><span class="e">p</span><span class="sy">$</span><span class="sy">{</span><span class="i">PASSWORD</span><span class="sy">}</span><span class="h"> </span><span class="o">-</span><span class="i">e</span><span class="h"> </span><span class="s">"${create_db_sql}"</span></div><div class="crayon-line crayon-striped-line" id="crayon-53a0396ddda44-72"><span class="st">if</span><span class="h"> </span><span class="sy">[</span><span class="h"> </span><span class="sy">$</span><span class="sy">?</span><span class="h"> </span><span class="o">-</span><span class="i">ne</span><span class="h"> </span><span class="cn">0</span><span class="h"> </span><span class="sy">]</span></div><div class="crayon-line" id="crayon-53a0396ddda44-73"><span class="st">then</span></div><div class="crayon-line crayon-striped-line" id="crayon-53a0396ddda44-74"><span class="r">echo</span><span class="h"> </span><span class="s">'user to db user error'</span></div><div class="crayon-line" id="crayon-53a0396ddda44-75"><span class="r">echo</span><span class="h"> </span><span class="v">$create_db_sql</span></div><div class="crayon-line crayon-striped-line" id="crayon-53a0396ddda44-76"><span class="r">exit</span><span class="h"> </span><span class="cn">0</span></div><div class="crayon-line" id="crayon-53a0396ddda44-77"><span class="st">fi</span></div><div class="crayon-line crayon-striped-line" id="crayon-53a0396ddda44-78"><span class="v">create_db_sql</span><span class="o">=</span><span class="s">"flush privileges"</span></div><div class="crayon-line" id="crayon-53a0396ddda44-79"><span class="e">mysql</span><span class="h"> </span><span class="o">-</span><span class="e">h</span><span class="sy">$</span><span class="sy">{</span><span class="i">HOSTNAME</span><span class="sy">}</span><span class="h">&nbsp;&nbsp;</span><span class="o">-</span><span class="e">P</span><span class="sy">$</span><span class="sy">{</span><span class="i">PORT</span><span class="sy">}</span><span class="h">&nbsp;&nbsp;</span><span class="o">-</span><span class="e">u</span><span class="sy">$</span><span class="sy">{</span><span class="i">USERNAME</span><span class="sy">}</span><span class="h"> </span><span class="o">-</span><span class="e">p</span><span class="sy">$</span><span class="sy">{</span><span class="i">PASSWORD</span><span class="sy">}</span><span class="h"> </span><span class="o">-</span><span class="i">e</span><span class="h"> </span><span class="s">"{create_db_sql}"</span></div><div class="crayon-line crayon-striped-line" id="crayon-53a0396ddda44-80"><span class="r">echo</span><span class="h"> </span><span class="s">'ok,finish!'</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0605 seconds] -->
<p>看一下运行效果，sh host.sh</p><!-- Crayon Syntax Highlighter v2.2.0 -->

		<div id="crayon-53a0396dddad3" class="crayon-syntax crayon-theme-ado crayon-font-courier-new crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover wrap" style=" max-width: 645px; margin-top: 12px; margin-bottom: 12px; float: left; clear: both; font-size: 13px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover hide delay" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><div class="crayon-button crayon-nums-button" title="切换显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 18.2px !important; line-height: 18.2px !important;"></div>
			<div class="crayon-plain-wrap"><textarea  class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;">
[root@localhost nginx]# sh 2.sh
1.add ftp user
please input websit:
hhh.com
add user,please input user name:
hhh
更改用户 hhh 的密码 。
新的 密码：
无效的密码： WAY 过短
无效的密码： 是回文
重新输入新的 密码：
passwd： 所有的身份验证令牌已经成功更新。
mkdir:/var/www/html/hhh.com/html /var/www/html/hhh.com/bak /var/www/html/hhh.com/log
mkdir:/var/www/html/hhh.com/bak/code /var/www/html/hhh.com/bak/sql
ok,add user success!name=hhh,password=youwrite
If you need a database, please enter a database name, if not required, blank can be
hhh
please input dbuser
hhh
please input dbpwd
hhh
input root pwd
123456
2.To configure nginx
config nginx success
3.add mysql user database
ok,finish!
[root@localhost nginx]#</textarea></div>
			<div class="crayon-main" style=" max-width: 645px;">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 13px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-53a0396dddad3-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-53a0396dddad3-2">2</div><div class="crayon-num" data-line="crayon-53a0396dddad3-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-53a0396dddad3-4">4</div><div class="crayon-num" data-line="crayon-53a0396dddad3-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-53a0396dddad3-6">6</div><div class="crayon-num" data-line="crayon-53a0396dddad3-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-53a0396dddad3-8">8</div><div class="crayon-num" data-line="crayon-53a0396dddad3-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-53a0396dddad3-10">10</div><div class="crayon-num" data-line="crayon-53a0396dddad3-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-53a0396dddad3-12">12</div><div class="crayon-num" data-line="crayon-53a0396dddad3-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-53a0396dddad3-14">14</div><div class="crayon-num" data-line="crayon-53a0396dddad3-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-53a0396dddad3-16">16</div><div class="crayon-num" data-line="crayon-53a0396dddad3-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-53a0396dddad3-18">18</div><div class="crayon-num" data-line="crayon-53a0396dddad3-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-53a0396dddad3-20">20</div><div class="crayon-num" data-line="crayon-53a0396dddad3-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-53a0396dddad3-22">22</div><div class="crayon-num" data-line="crayon-53a0396dddad3-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-53a0396dddad3-24">24</div><div class="crayon-num" data-line="crayon-53a0396dddad3-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-53a0396dddad3-26">26</div><div class="crayon-num" data-line="crayon-53a0396dddad3-27">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-53a0396dddad3-28">28</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 13px !important; line-height: 15px !important;"><div class="crayon-line" id="crayon-53a0396dddad3-1"><span class="sy">[</span><span class="i">root</span><span class="sy">@</span><span class="e">localhost </span><span class="i">nginx</span><span class="sy">]</span><span class="p"># sh 2.sh</span></div><div class="crayon-line crayon-striped-line" id="crayon-53a0396dddad3-2"><span class="cn">1.add</span><span class="h"> </span><span class="e">ftp </span><span class="e">user</span></div><div class="crayon-line" id="crayon-53a0396dddad3-3"><span class="e">please </span><span class="e">input </span><span class="i">websit</span><span class="o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-53a0396dddad3-4"><span class="v">hhh</span><span class="e">.com</span></div><div class="crayon-line" id="crayon-53a0396dddad3-5"><span class="e">add </span><span class="i">user</span><span class="sy">,</span><span class="e">please </span><span class="e">input </span><span class="e">user </span><span class="i">name</span><span class="o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-53a0396dddad3-6"><span class="i">hhh</span></div><div class="crayon-line" id="crayon-53a0396dddad3-7">更改用户<span class="h"> </span><span class="i">hhh</span><span class="h"> </span>的密码<span class="h"> </span>。</div><div class="crayon-line crayon-striped-line" id="crayon-53a0396dddad3-8">新的<span class="h"> </span>密码：</div><div class="crayon-line" id="crayon-53a0396dddad3-9">无效的密码：<span class="h"> </span><span class="i">WAY</span><span class="h"> </span>过短</div><div class="crayon-line crayon-striped-line" id="crayon-53a0396dddad3-10">无效的密码：<span class="h"> </span>是回文</div><div class="crayon-line" id="crayon-53a0396dddad3-11">重新输入新的<span class="h"> </span>密码：</div><div class="crayon-line crayon-striped-line" id="crayon-53a0396dddad3-12"><span class="i">passwd</span>：<span class="h"> </span>所有的身份验证令牌已经成功更新。</div><div class="crayon-line" id="crayon-53a0396dddad3-13"><span class="r">mkdir</span><span class="o">:</span><span class="o">/</span><span class="t">var</span><span class="o">/</span><span class="i">www</span><span class="o">/</span><span class="i">html</span><span class="o">/</span><span class="v">hhh</span><span class="e">.com</span><span class="o">/</span><span class="i">html</span><span class="h"> </span><span class="o">/</span><span class="t">var</span><span class="o">/</span><span class="i">www</span><span class="o">/</span><span class="i">html</span><span class="o">/</span><span class="v">hhh</span><span class="e">.com</span><span class="o">/</span><span class="i">bak</span><span class="h"> </span><span class="o">/</span><span class="t">var</span><span class="o">/</span><span class="i">www</span><span class="o">/</span><span class="i">html</span><span class="o">/</span><span class="v">hhh</span><span class="e">.com</span><span class="o">/</span><span class="e">log</span></div><div class="crayon-line crayon-striped-line" id="crayon-53a0396dddad3-14"><span class="r">mkdir</span><span class="o">:</span><span class="o">/</span><span class="t">var</span><span class="o">/</span><span class="i">www</span><span class="o">/</span><span class="i">html</span><span class="o">/</span><span class="v">hhh</span><span class="e">.com</span><span class="o">/</span><span class="i">bak</span><span class="o">/</span><span class="i">code</span><span class="h"> </span><span class="o">/</span><span class="t">var</span><span class="o">/</span><span class="i">www</span><span class="o">/</span><span class="i">html</span><span class="o">/</span><span class="v">hhh</span><span class="e">.com</span><span class="o">/</span><span class="i">bak</span><span class="o">/</span><span class="e">sql</span></div><div class="crayon-line" id="crayon-53a0396dddad3-15"><span class="i">ok</span><span class="sy">,</span><span class="e">add </span><span class="e">user </span><span class="i">success</span><span class="o">!</span><span class="v">name</span><span class="o">=</span><span class="i">hhh</span><span class="sy">,</span><span class="v">password</span><span class="o">=</span><span class="e">youwrite</span></div><div class="crayon-line crayon-striped-line" id="crayon-53a0396dddad3-16"><span class="st">If</span><span class="h"> </span><span class="e">you </span><span class="i">need</span><span class="h"> </span><span class="i">a</span><span class="h"> </span><span class="i">database</span><span class="sy">,</span><span class="h"> </span><span class="e">please </span><span class="i">enter</span><span class="h"> </span><span class="i">a</span><span class="h"> </span><span class="e">database </span><span class="i">name</span><span class="sy">,</span><span class="h"> </span><span class="st">if</span><span class="h"> </span><span class="st">not</span><span class="h"> </span><span class="i">required</span><span class="sy">,</span><span class="h"> </span><span class="e">blank </span><span class="e">can </span><span class="e">be</span></div><div class="crayon-line" id="crayon-53a0396dddad3-17"><span class="e">hhh</span></div><div class="crayon-line crayon-striped-line" id="crayon-53a0396dddad3-18"><span class="e">please </span><span class="e">input </span><span class="e">dbuser</span></div><div class="crayon-line" id="crayon-53a0396dddad3-19"><span class="e">hhh</span></div><div class="crayon-line crayon-striped-line" id="crayon-53a0396dddad3-20"><span class="e">please </span><span class="e">input </span><span class="e">dbpwd</span></div><div class="crayon-line" id="crayon-53a0396dddad3-21"><span class="e">hhh</span></div><div class="crayon-line crayon-striped-line" id="crayon-53a0396dddad3-22"><span class="e">input </span><span class="e">root </span><span class="r">pwd</span></div><div class="crayon-line" id="crayon-53a0396dddad3-23"><span class="cn">123456</span></div><div class="crayon-line crayon-striped-line" id="crayon-53a0396dddad3-24"><span class="cn">2.To</span><span class="h"> </span><span class="e">configure </span><span class="e">nginx</span></div><div class="crayon-line" id="crayon-53a0396dddad3-25"><span class="e">config </span><span class="e">nginx </span><span class="i">success</span></div><div class="crayon-line crayon-striped-line" id="crayon-53a0396dddad3-26"><span class="cn">3.add</span><span class="h"> </span><span class="e">mysql </span><span class="e">user </span><span class="e">database</span></div><div class="crayon-line" id="crayon-53a0396dddad3-27"><span class="i">ok</span><span class="sy">,</span><span class="i">finish</span><span class="o">!</span></div><div class="crayon-line crayon-striped-line" id="crayon-53a0396dddad3-28"><span class="sy">[</span><span class="i">root</span><span class="sy">@</span><span class="e">localhost </span><span class="i">nginx</span><span class="sy">]</span><span class="p">#</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0244 seconds] -->
<p>系统会逐个询问输入参数，并且参数是先统一填完，然后程序进行执行，避免中间不小心输入错误无法修改，然后如果无需创建数据库，那么database参数不输入即可。</p>
<p>感兴趣的可以看一下。</p>
<p>&nbsp;</p>
                        <p style="color:#17750A;"><b>程序本天成，妙手偶得之！</b></p>
                         <p>转载请注明：<a href="http://www.521php.com/archives/1739/" title="一键式虚拟主机搭建shell脚本" target="_blank">http://www.521php.com/archives/1739/</a></p>
                        </div>
                  </div><!--toolBar-->
                    <div class="toolBar toolBarTwo">
                    	<UL>
                            <li class="mrinc2 tags2">Tags:<a href="http://www.521php.com/archives/tag/linux/" rel="tag">Linux</a>,<a href="http://www.521php.com/archives/tag/mysql/" rel="tag">mysql</a>,<a href="http://www.521php.com/archives/tag/nginx/" rel="tag">nginx</a>,<a href="http://www.521php.com/archives/tag/shell/" rel="tag">shell</a></li>
                            <LI class="mrinc2 share_r" onmouseover=share_more(1739,this);><A href="javascript:;">分享到...</A> </LI>
                        </UL>
                    </div>
                    <SCRIPT>postArray[1739]=[];postArray[1739][0]="一键式虚拟主机搭建shell脚本";postArray[1739][1]="http://www.521php.com/archives/1739/";postArray[1739][2]="";postArray[1739][3]="http://www.521php.com/wp-content/themes/zeke/img/default.gif";</SCRIPT>
           		</div>
                <div class="content_t_bot"><!--样式尾部--></div>
                </div>
            <div class="navigation">
				<p class="navNew"><a href="http://www.521php.com/archives/1746/" rel="next">php批量去除指定目录的bom头</a></p>
				<p class="navOld"><a href="http://www.521php.com/archives/1735/" rel="prev">shell脚本做nginx日志分析工具</a></p>
	    </div>
           
           <div class="content_text">
               <div class="content_t_top"></div>
               <div class="content_t_main"> <div class="ujian-hook"></div></div>
	       <div class="content_t_bot"><!--样式尾部--></div>
	   </div>
	   <div class="content_text">
               <div class="content_t_top"></div>
               <div class="content_t_main">
               <div class="xgwz">
	       <div>相关文章</div>
			<li><span class="xtitle"><a href="http://www.521php.com/archives/1687/" rel="bookmark" title="在CentOS上通过YUM安装Nginx和PHP-FPM">在CentOS上通过YUM安装Nginx和PHP-FPM</a></span> <span class="xtag">2014-04-25 <a href="http://www.521php.com/archives/category/linux/" title="查看 Linux 中的全部文章" rel="category tag">Linux</a>/<a href="http://www.521php.com/archives/category/team/" title="查看 博采众长 中的全部文章" rel="category tag">博采众长</a>/<a href="http://www.521php.com/archives/category/lovephp/" title="查看 我爱PHP 中的全部文章" rel="category tag">我爱PHP</a></span></li>
<li><span class="xtitle"><a href="http://www.521php.com/archives/737/" rel="bookmark" title="linux学习第一小节">linux学习第一小节</a></span> <span class="xtag">2012-11-24 <a href="http://www.521php.com/archives/category/linux/" title="查看 Linux 中的全部文章" rel="category tag">Linux</a></span></li>
<li><span class="xtitle"><a href="http://www.521php.com/archives/1694/" rel="bookmark" title="redis小解及centos下php-redis扩展安装">redis小解及centos下php-redis扩展安装</a></span> <span class="xtag">2014-04-26 <a href="http://www.521php.com/archives/category/linux/" title="查看 Linux 中的全部文章" rel="category tag">Linux</a>/<a href="http://www.521php.com/archives/category/zong/" title="查看 总结 中的全部文章" rel="category tag">总结</a>/<a href="http://www.521php.com/archives/category/lovephp/" title="查看 我爱PHP 中的全部文章" rel="category tag">我爱PHP</a></span></li>
<li><span class="xtitle"><a href="http://www.521php.com/archives/1722/" rel="bookmark" title="MySql避免全表扫描">MySql避免全表扫描</a></span> <span class="xtag">2014-05-09 <a href="http://www.521php.com/archives/category/zong/" title="查看 总结 中的全部文章" rel="category tag">总结</a>/<a href="http://www.521php.com/archives/category/lovephp/" title="查看 我爱PHP 中的全部文章" rel="category tag">我爱PHP</a>/<a href="http://www.521php.com/archives/category/tj/" title="查看 推荐文章 中的全部文章" rel="category tag">推荐文章</a></span></li>
<li><span class="xtitle"><a href="http://www.521php.com/archives/1361/" rel="bookmark" title="php遍历目录并批量修改文件权限">php遍历目录并批量修改文件权限</a></span> <span class="xtag">2013-06-24 <a href="http://www.521php.com/archives/category/team/" title="查看 博采众长 中的全部文章" rel="category tag">博采众长</a>/<a href="http://www.521php.com/archives/category/lovephp/" title="查看 我爱PHP 中的全部文章" rel="category tag">我爱PHP</a>/<a href="http://www.521php.com/archives/category/tj/" title="查看 推荐文章 中的全部文章" rel="category tag">推荐文章</a></span></li>
<li><span class="xtitle"><a href="http://www.521php.com/archives/848/" rel="bookmark" title="linux系统信息查看命令">linux系统信息查看命令</a></span> <span class="xtag">2012-12-11 <a href="http://www.521php.com/archives/category/linux/" title="查看 Linux 中的全部文章" rel="category tag">Linux</a></span></li>
<li><span class="xtitle"><a href="http://www.521php.com/archives/1667/" rel="bookmark" title="简单的数据迁移shell脚本">简单的数据迁移shell脚本</a></span> <span class="xtag">2014-03-26 <a href="http://www.521php.com/archives/category/linux/" title="查看 Linux 中的全部文章" rel="category tag">Linux</a>/<a href="http://www.521php.com/archives/category/zong/" title="查看 总结 中的全部文章" rel="category tag">总结</a></span></li>
<li><span class="xtitle"><a href="http://www.521php.com/archives/1676/" rel="bookmark" title="linux中软硬链接的区别">linux中软硬链接的区别</a></span> <span class="xtag">2014-04-12 <a href="http://www.521php.com/archives/category/linux/" title="查看 Linux 中的全部文章" rel="category tag">Linux</a>/<a href="http://www.521php.com/archives/category/team/" title="查看 博采众长 中的全部文章" rel="category tag">博采众长</a>/<a href="http://www.521php.com/archives/category/zong/" title="查看 总结 中的全部文章" rel="category tag">总结</a></span></li>
<li><span class="xtitle"><a href="http://www.521php.com/archives/1724/" rel="bookmark" title="linux系统下安装redis">linux系统下安装redis</a></span> <span class="xtag">2014-05-09 <a href="http://www.521php.com/archives/category/linux/" title="查看 Linux 中的全部文章" rel="category tag">Linux</a>/<a href="http://www.521php.com/archives/category/zong/" title="查看 总结 中的全部文章" rel="category tag">总结</a></span></li>
<li><span class="xtitle"><a href="http://www.521php.com/archives/1732/" rel="bookmark" title="初识node,CentOS搭建NodeJS环境，使用nginx反向代理">初识node,CentOS搭建NodeJS环境，使用nginx反向代理</a></span> <span class="xtag">2014-05-22 <a href="http://www.521php.com/archives/category/linux/" title="查看 Linux 中的全部文章" rel="category tag">Linux</a>/<a href="http://www.521php.com/archives/category/zong/" title="查看 总结 中的全部文章" rel="category tag">总结</a></span></li>
</div>
           <div class="content_t_bot"></div>
	   </div>
<!-- You can start editing here. -->
<div id="comment_body">
			<!-- If comments are open, but there are no comments. -->
	 		</div>
<div class="navigation_comments">
		<div class="pagination"></div>
</div>
  <div id="respond">
            	<div class="excerpt_top"></div>
                <div class="excerpt_main">
<h3 class="givetext">发表评论</h3>
<div class="cancel-comment-reply">
		<!--<div id="real-avatar">
			<img alt='' src='http://0.gravatar.com/avatar/?d=http://www.521php.com/wp-content/themes/zeke/MRimg/gravatar.png&amp;s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />	</div>-->
			<small><a rel="nofollow" id="cancel-comment-reply-link" href="/archives/1739/#respond" style="display:none;">点击这里取消回复。</a></small>
		</div>
<form action="http://www.521php.com/wp-comments-post.php" method="post" id="commentform">
<div class="form_box">
<div class="form_infobody">
 	<div id="comment-author-info" class="form_info">
		<div class="author">昵称：<input type="text" class="textfield" name="author" id="author" tabindex="1" value=""></div>
        <p style="height:15px"></p>
		<div class="email">邮箱：<input type="text" class="textfield" name="email" id="email" tabindex="2" value=""></div>
        <p style="height:15px"></p>
		<div class="url">网址：<input type="text" class="textfield" name="url" id="url" tabindex="3" value=""></div>
    </div>
</div>
    <div class="form_text"><textarea name="comment" id="comment" class="textarea"  tabindex="4"  onfocus="if (this.value == 'Make Comments on this Article') {this.value = '';}" onblur="if (this.value == '') {this.value = 'Make Comments on this Article';}">Make Comments on this Article</textarea></div>
</div>
<p></p>
<div class="ajax_box" id="comment_jstext">eg.博客主题调用的是Gravatar头像,你可以通过邮箱注册获得头像.</div>
<div class="form_btn">
<div class="submit_box"><div class="aLeft"><input class="submit" name="submit" type="submit" id="submit" tabindex="5" value="提交留言"><input class="reset" name="reset" type="reset" id="reset" tabindex="6" value="重写"></div><div class="aRight"><input type="checkbox" name="comment_mail_notify" id="comment_mail_notify" value="comment_mail_notify" checked="checked" style="margin-left:0px;" /><label for="comment_mail_notify" style="display: inline;">有人回复时邮件通知我</label> / 快捷键：Ctrl+Enter</label><input type='hidden' name='comment_post_ID' value='1739' id='comment_post_ID' />
<input type='hidden' name='comment_parent' id='comment_parent' value='0' />
</div></div>
</div>
<script type="text/javascript">	//Crel+Enter
			$(document).keypress(function(e){
				if(e.ctrlKey && e.which == 13 || e.which == 10) { 
					$(".submit").click();
					document.body.focus();
				} else if (e.shiftKey && e.which==13 || e.which == 10) {
					$(".submit").click();
				}          
			})
		</script>
</form>
                </div>
                <div class="excerpt_bot"></div>
            </div>
</div>
        </div>
        <div id="sidebar">
			<!--自我介绍-->
			<div class="sidebar_body">
           	  <div class="sidebar_b_top"><!--样式头部--></div>
                <div class="sidebar_b_main">
                	<div class="sid_ify">
                    	<div class="sid_ify_bg">
                            <H3>本站公告</H3>
                        </div>
                    </div>
                    <div class="sid_body"><div><img src="http://www.521php.com/wp-content/themes/zeke/fly.gif" width="200" height="180" /></div>
					<p style="text-align:left; font-size:12px;">程序本天成，妙手偶得之！
<br />趣赔集团刚成立，如果您想投资可直接转入支付宝，和我联系<br /><script>document.write('<a href="http://www.521php.com/payme/" target="_blank"><img src="/wp-content/themes/zeke/btn-index.png" height="40" /></a>');</script> <img src="/wp-content/themes/zeke/gx.gif" height="40" />			
					</p>
                    </div>
                </div>
                <div class="sidebar_b_bot"><!--样式尾部--></div>
            </div>
			<!--日志分类-->

        	<div class="sidebar_body">
           	  <div class="sidebar_b_top"><!--样式头部--></div>
                <div class="sidebar_b_main">
                	<div class="sid_ify">
                    	<div class="sid_ify_bg">
                            <H3>文章分类</H3>
                        </div>
                    </div>
                    <div class="sid_body">
                    	<ul class="sid_lm">
                        		<li class="cat-item cat-item-61"><a href="http://www.521php.com/archives/category/linux/" title="linux服务器">Linux</a> (16)
</li>
	<li class="cat-item cat-item-15"><a href="http://www.521php.com/archives/category/wordpress/" title="在其位，谋其政！">WordPress</a> (8)
</li>
	<li class="cat-item cat-item-41"><a href="http://www.521php.com/archives/category/team/" title="取长补短，好的学习习惯可以让我们少走很多弯路！">博采众长</a> (67)
</li>
	<li class="cat-item cat-item-71"><a href="http://www.521php.com/archives/category/safe/" title="查看 安全 下的所有文章">安全</a> (7)
</li>
	<li class="cat-item cat-item-52"><a href="http://www.521php.com/archives/category/gongneng/" title="查看 小功能 下的所有文章">小功能</a> (55)
</li>
	<li class="cat-item cat-item-12"><a href="http://www.521php.com/archives/category/zong/" title="合理的总结我们的工作，工作就是学习！">总结</a> (60)
</li>
	<li class="cat-item cat-item-10"><a href="http://www.521php.com/archives/category/lovephp/" title="我们共同的php技术博客！总结php知识，交流php编程心得！">我爱PHP</a> (126)
</li>
	<li class="cat-item cat-item-70"><a href="http://www.521php.com/archives/category/tj/" title="查看 推荐文章 下的所有文章">推荐文章</a> (71)
</li>
	<li class="cat-item cat-item-46"><a href="http://www.521php.com/archives/category/else/" title="读书心得，视频感悟，社会舆论，杂七杂八">杂谈</a> (31)
</li>
	<li class="cat-item cat-item-4"><a href="http://www.521php.com/archives/category/cclog/" title="我们不知道人生到底有多长，但是我知道当我们回首看这些的时候一定会深深的感动！">随笔</a> (32)
</li>
                        </ul>
                    </div>
                </div>
                <div class="sidebar_b_bot"><!--样式尾部--></div>
            </div>

	    			<div class="sidebar_body">
           	  <div class="sidebar_b_top"><!--样式头部--></div>
                <div class="sidebar_b_main">
                	<div class="sid_ify">
                    	<div class="sid_ify_bg">
                            <H3><a href="/tg/" title="进入本站推广">进入本站推广</a></H3>
                        </div>
                    </div>
                    <div class="sid_body" align="center">
<iframe name="alimamaifrm" frameborder="0" marginheight="0" marginwidth="0" border="0" scrolling="no" width="210" height="200" src="http://www.taobao.com/go/app/tbk_app/chongzhi_210_200.php?pid=mm_30958902_3426892_13314114&page=chongzhi_210_200.php&size_w=210&size_h=200&stru_phone=1&stru_game=1&stru_travel=1" ></iframe>
                    </div>
                </div>
                <div class="sidebar_b_bot"><!--样式尾部--></div>
            </div>
<!--本站接口-->
            <div class="sidebar_body">
           	  <div class="sidebar_b_top"><!--样式头部--></div>
                <div class="sidebar_b_main">
                	<div class="sid_ify">
                    	<div class="sid_ify_bg">
                            <H3>本站接口</H3>
                        </div>
                    </div>
                    <div class="sid_body">
                    	<ul class="sid_link_text">
                        <li><a href="http://www.521php.com/api/pinyin.php" title="php将中文转化为拼音接口" target="_blank">php将中文转化为拼音接口</a></li>
<li><a href="http://www.521php.com/api/ip.php" title="php获取ip归属地接口" target="_blank">php获取ip归属地接口</a></li>
<li><a href="http://www.521php.com/archives/913/" title="百度谷歌一起搜接口" target="_blank">百度谷歌一起搜接口</a></li>
<li><a href="http://www.521php.com/api/qr/" title="二维码在线生成工具" target="_blank">二维码在线生成工具</a></li>
<li><a href="http://www.521php.com/api/fenci/" title="php智能分词功能" target="_blank">php智能分词功能</a></li>
<li><a href="http://www.521php.com/api/fav/" title="获取指定网站favicon.ico图标接口" target="_blank">获取指定网站favicon.ico图标接口</a></li>
<li><a href="http://www.521php.com/api/pr/" title="权重,pr,alexa及收录情况查询接口" target="_blank">权重,pr,alexa及收录情况查询接口</a></li>
<li><a href="http://www.521php.com/api/sl/" title="php扫雷小游戏" target="_blank">php扫雷小游戏</a></li>
                      </ul>
                    </div>
                </div>
                <div class="sidebar_b_bot"><!--样式尾部--></div>
            </div>
            <!--本站接口-->
            <!--博客归档OR最新文章OR随机日志-->
            <div class="sidebar_body">
           	  <div class="sidebar_b_top"><!--样式头部--></div>
                <div class="sidebar_b_main">
                	<div class="sid_ify">
                    	<div class="sid_ify_bg">
                            <H3><a href="/archives/category/tj/" title="推荐文章">推荐文章</a></H3>
                        </div>
                    </div>
                    <div class="sid_body">
                    	<ul class="sid_Archives sid_link_text">
<li><a href="http://www.521php.com/archives/1253/" title="外链自助上线了" rel="bookmark">
外链自助上线了</a></li>
<li><a href="http://www.521php.com/archives/996/" title="php捕捉各大搜索引擎的蜘蛛、爬虫记录" rel="bookmark">
php捕捉各大搜索引擎的蜘蛛、爬虫记录</a></li>
<li><a href="http://www.521php.com/archives/1365/" title="可逆的php字符加密算法" rel="bookmark">
可逆的php字符加密算法</a></li>
<li><a href="http://www.521php.com/archives/1728/" title="转-技术人员如何参与产品设计讨论：激活那一潭死水" rel="bookmark">
转-技术人员如何参与产品设计讨论：激活那一潭死水</a></li>
<li><a href="http://www.521php.com/archives/913/" title="本站百度和谷歌一起搜接口！(推荐)" rel="bookmark">
本站百度和谷歌一起搜接口！(推荐)</a></li>
<li><a href="http://www.521php.com/archives/1369/" title="php 自定义json_encode和json_decode函数" rel="bookmark">
php 自定义json_encode和json_decode函数</a></li>
<li><a href="http://www.521php.com/archives/682/" title="导医系统开发总结之自己的编程心得" rel="bookmark">
导医系统开发总结之自己的编程心得</a></li>
<li><a href="http://www.521php.com/archives/1203/" title="纯php代码实现伪静态的方法" rel="bookmark">
纯php代码实现伪静态的方法</a></li>
<li><a href="http://www.521php.com/archives/1187/" title="织梦内置标签小优化之四—dede:channelartlist标签" rel="bookmark">
织梦内置标签小优化之四—dede:channelartlist标签</a></li>
<li><a href="http://www.521php.com/archives/1172/" title="织梦内置标签小优化之二——dede:channel标签优化" rel="bookmark">
织梦内置标签小优化之二——dede:channel标签优化</a></li>
</ul>
                    </div>
                </div>
                <div class="sidebar_b_bot"><!--样式尾部--></div>
            </div>
			<div class="sidebar_body">
           	  <div class="sidebar_b_top"><!--样式头部--></div>
                <div class="sidebar_b_main">
                	<div class="sid_ify">
                    	<div class="sid_ify_bg">
                            <H3><a href="/archives/category/lovephp/" title="技术心得">学习之所得</a></H3>
                        </div>
                    </div>
                    <div class="sid_body">
                    	<ul class="sid_Archives sid_link_text">
<li><a href="http://www.521php.com/archives/1746/" title="php批量去除指定目录的bom头" rel="bookmark">
php批量去除指定目录的bom头</a></li>
<li><a href="http://www.521php.com/archives/1739/" title="一键式虚拟主机搭建shell脚本" rel="bookmark">
一键式虚拟主机搭建shell脚本</a></li>
<li><a href="http://www.521php.com/archives/1735/" title="shell脚本做nginx日志分析工具" rel="bookmark">
shell脚本做nginx日志分析工具</a></li>
<li><a href="http://www.521php.com/archives/1722/" title="MySql避免全表扫描" rel="bookmark">
MySql避免全表扫描</a></li>
<li><a href="http://www.521php.com/archives/1716/" title="linux下nginx,php运行用户和ftp用户权限分配" rel="bookmark">
linux下nginx,php运行用户和ftp用户权限分配</a></li>
<li><a href="http://www.521php.com/archives/1708/" title="php的pcntl_fork多进程小解" rel="bookmark">
php的pcntl_fork多进程小解</a></li>
<li><a href="http://www.521php.com/archives/1703/" title="鸟枪换大炮了" rel="bookmark">
鸟枪换大炮了</a></li>
<li><a href="http://www.521php.com/archives/1697/" title="两种方式实现js，ajax的跨域" rel="bookmark">
两种方式实现js，ajax的跨域</a></li>
<li><a href="http://www.521php.com/archives/1694/" title="redis小解及centos下php-redis扩展安装" rel="bookmark">
redis小解及centos下php-redis扩展安装</a></li>
<li><a href="http://www.521php.com/archives/1691/" title="thrift接口框架小解" rel="bookmark">
thrift接口框架小解</a></li>
</ul>
                    </div>
                </div>
                <div class="sidebar_b_bot"><!--样式尾部--></div>
            </div>
			
		<div class="sidebar_body">
           	  <div class="sidebar_b_top"><!--样式头部--></div>
                <div class="sidebar_b_main">
                	<div class="sid_ify">
                    	<div class="sid_ify_bg">
                            <H3><a href="/archives/category/cclog/" title="日志">生活之所感</a></H3>
                        </div>
                    </div>
                    <div class="sid_body">
                    	<ul class="sid_Archives sid_link_text">
<li><a href="http://www.521php.com/archives/1662/" title="近期的一点小感悟" rel="bookmark">
近期的一点小感悟</a></li>
<li><a href="http://www.521php.com/archives/1654/" title="不误正业" rel="bookmark">
不误正业</a></li>
<li><a href="http://www.521php.com/archives/1650/" title="论我的电脑为什么比别人的活的相对长久" rel="bookmark">
论我的电脑为什么比别人的活的相对长久</a></li>
<li><a href="http://www.521php.com/archives/1639/" title="没有正确的标题，只有正确的人" rel="bookmark">
没有正确的标题，只有正确的人</a></li>
<li><a href="http://www.521php.com/archives/1295/" title="阶段性小总结20130525" rel="bookmark">
阶段性小总结20130525</a></li>
<li><a href="http://www.521php.com/archives/1044/" title="职场白领的“攻薪技”" rel="bookmark">
职场白领的“攻薪技”</a></li>
<li><a href="http://www.521php.com/archives/1014/" title="天空海阔，要做最坚强的泡沫" rel="bookmark">
天空海阔，要做最坚强的泡沫</a></li>
<li><a href="http://www.521php.com/archives/985/" title="致师弟师妹的一封信" rel="bookmark">
致师弟师妹的一封信</a></li>
<li><a href="http://www.521php.com/archives/905/" title="2012年12月22日总结" rel="bookmark">
2012年12月22日总结</a></li>
<li><a href="http://www.521php.com/archives/899/" title="我们到底欠缺了什么" rel="bookmark">
我们到底欠缺了什么</a></li>
</ul>
                    </div>
                </div>
                <div class="sidebar_b_bot"><!--样式尾部--></div>
            </div>
			<div class="sidebar_body">
           	  <div class="sidebar_b_top"><!--样式头部--></div>
                <div class="sidebar_b_main">
                	<div class="sid_ify">
                    	<div class="sid_ify_bg">
                            <H3><a href="/archives/category/else/" title="杂谈">杂七杂八</a></H3>
                        </div>
                    </div>
                    <div class="sid_body">
                    	<ul class="sid_Archives sid_link_text">
<li><a href="http://www.521php.com/archives/1728/" title="转-技术人员如何参与产品设计讨论：激活那一潭死水" rel="bookmark">
转-技术人员如何参与产品设计讨论：激活那一潭死水</a></li>
<li><a href="http://www.521php.com/archives/1654/" title="不误正业" rel="bookmark">
不误正业</a></li>
<li><a href="http://www.521php.com/archives/1650/" title="论我的电脑为什么比别人的活的相对长久" rel="bookmark">
论我的电脑为什么比别人的活的相对长久</a></li>
<li><a href="http://www.521php.com/archives/1384/" title="永远不要再犯的 5 个编程错误" rel="bookmark">
永远不要再犯的 5 个编程错误</a></li>
<li><a href="http://www.521php.com/archives/1381/" title="关于PHP的十大误解 你中了几个？" rel="bookmark">
关于PHP的十大误解 你中了几个？</a></li>
<li><a href="http://www.521php.com/archives/1270/" title="软件开发者的四大“看家本事”" rel="bookmark">
软件开发者的四大“看家本事”</a></li>
<li><a href="http://www.521php.com/archives/1263/" title="惹恼程序员的十件事" rel="bookmark">
惹恼程序员的十件事</a></li>
<li><a href="http://www.521php.com/archives/1260/" title="IT经验的七个总结" rel="bookmark">
IT经验的七个总结</a></li>
<li><a href="http://www.521php.com/archives/1057/" title="未来的八种人将被社会淘汰!" rel="bookmark">
未来的八种人将被社会淘汰!</a></li>
<li><a href="http://www.521php.com/archives/1044/" title="职场白领的“攻薪技”" rel="bookmark">
职场白领的“攻薪技”</a></li>
</ul>
                    </div>
                </div>
                <div class="sidebar_b_bot"><!--样式尾部--></div>
            </div>			
			 <!--调用标签云-->
			<div class="sidebar_body">
           	  <div class="sidebar_b_top"><!--样式头部--></div>
                <div class="sidebar_b_main">
                	<div class="sid_ify">
                    	<div class="sid_ify_bg">
                            <H3>标签云</H3>
                        </div>
                    </div>
<!--class="sid_body"-->
                    <div id="div1">
					<a href='http://www.521php.com/archives/tag/access/' class='tag-link-53' title='1 个话题' style='font-size: 12pt;'>access</a>
<a href='http://www.521php.com/archives/tag/ajax/' class='tag-link-57' title='7 个话题' style='font-size: 14.666666666667pt;'>ajax</a>
<a href='http://www.521php.com/archives/tag/apache/' class='tag-link-74' title='1 个话题' style='font-size: 12pt;'>apache</a>
<a href='http://www.521php.com/archives/tag/curl/' class='tag-link-63' title='1 个话题' style='font-size: 12pt;'>curl</a>
<a href='http://www.521php.com/archives/tag/dede/' class='tag-link-28' title='14 个话题' style='font-size: 15.911111111111pt;'>dede</a>
<a href='http://www.521php.com/archives/tag/discuz/' class='tag-link-64' title='1 个话题' style='font-size: 12pt;'>discuz</a>
<a href='http://www.521php.com/archives/tag/flash/' class='tag-link-59' title='1 个话题' style='font-size: 12pt;'>flash</a>
<a href='http://www.521php.com/archives/tag/gdku/' class='tag-link-32' title='2 个话题' style='font-size: 12.8pt;'>GD库</a>
<a href='http://www.521php.com/archives/tag/htaccess/' class='tag-link-69' title='1 个话题' style='font-size: 12pt;'>htaccess</a>
<a href='http://www.521php.com/archives/tag/jquery/' class='tag-link-55' title='1 个话题' style='font-size: 12pt;'>jquery</a>
<a href='http://www.521php.com/archives/tag/js/' class='tag-link-44' title='22 个话题' style='font-size: 16.711111111111pt;'>js</a>
<a href='http://www.521php.com/archives/tag/linux/' class='tag-link-61' title='17 个话题' style='font-size: 16.266666666667pt;'>Linux</a>
<a href='http://www.521php.com/archives/tag/mysql/' class='tag-link-79' title='2 个话题' style='font-size: 12.8pt;'>mysql</a>
<a href='http://www.521php.com/archives/tag/nginx/' class='tag-link-75' title='4 个话题' style='font-size: 13.777777777778pt;'>nginx</a>
<a href='http://www.521php.com/archives/tag/node/' class='tag-link-80' title='1 个话题' style='font-size: 12pt;'>node</a>
<a href='http://www.521php.com/archives/tag/php/' class='tag-link-3' title='125 个话题' style='font-size: 20pt;'>php</a>
<a href='http://www.521php.com/archives/tag/redis/' class='tag-link-77' title='2 个话题' style='font-size: 12.8pt;'>redis</a>
<a href='http://www.521php.com/archives/tag/shell/' class='tag-link-81' title='3 个话题' style='font-size: 13.333333333333pt;'>shell</a>
<a href='http://www.521php.com/archives/tag/sql/' class='tag-link-43' title='4 个话题' style='font-size: 13.777777777778pt;'>sql</a>
<a href='http://www.521php.com/archives/tag/thrift/' class='tag-link-76' title='1 个话题' style='font-size: 12pt;'>thrift</a>
<a href='http://www.521php.com/archives/tag/wordpress/' class='tag-link-15' title='12 个话题' style='font-size: 15.6pt;'>WordPress</a>
<a href='http://www.521php.com/archives/tag/wp-postviews/' class='tag-link-20' title='2 个话题' style='font-size: 12.8pt;'>WP-PostViews</a>
<a href='http://www.521php.com/archives/tag/zip/' class='tag-link-56' title='2 个话题' style='font-size: 12.8pt;'>zip</a>
<a href='http://www.521php.com/archives/tag/zookeeper/' class='tag-link-73' title='1 个话题' style='font-size: 12pt;'>zookeeper</a>
<a href='http://www.521php.com/archives/tag/blog/' class='tag-link-51' title='41 个话题' style='font-size: 17.866666666667pt;'>个人博客</a>
<a href='http://www.521php.com/archives/tag/youhua/' class='tag-link-45' title='20 个话题' style='font-size: 16.533333333333pt;'>优化</a>
<a href='http://www.521php.com/archives/tag/hanshu/' class='tag-link-34' title='30 个话题' style='font-size: 17.288888888889pt;'>函数</a>
<a href='http://www.521php.com/archives/tag/fenye/' class='tag-link-11' title='2 个话题' style='font-size: 12.8pt;'>分页</a>
<a href='http://www.521php.com/archives/tag/bieming/' class='tag-link-24' title='2 个话题' style='font-size: 12.8pt;'>别名</a>
<a href='http://www.521php.com/archives/tag/danye/' class='tag-link-27' title='1 个话题' style='font-size: 12pt;'>单页</a>
<a href='http://www.521php.com/archives/tag/imgupload/' class='tag-link-26' title='2 个话题' style='font-size: 12.8pt;'>图片上传</a>
<a href='http://www.521php.com/archives/tag/imagemake/' class='tag-link-33' title='7 个话题' style='font-size: 14.666666666667pt;'>图片处理</a>
<a href='http://www.521php.com/archives/tag/yuming/' class='tag-link-18' title='5 个话题' style='font-size: 14.133333333333pt;'>域名</a>
<a href='http://www.521php.com/archives/tag/wailian/' class='tag-link-25' title='5 个话题' style='font-size: 14.133333333333pt;'>外链</a>
<a href='http://www.521php.com/archives/tag/touxiang/' class='tag-link-14' title='2 个话题' style='font-size: 12.8pt;'>头像</a>
<a href='http://www.521php.com/archives/tag/zifu/' class='tag-link-35' title='12 个话题' style='font-size: 15.6pt;'>字符</a>
<a href='http://www.521php.com/archives/tag/aq/' class='tag-link-72' title='6 个话题' style='font-size: 14.444444444444pt;'>安全</a>
<a href='http://www.521php.com/archives/tag/daohang/' class='tag-link-17' title='2 个话题' style='font-size: 12.8pt;'>导航</a>
<a href='http://www.521php.com/archives/tag/phome/' class='tag-link-67' title='6 个话题' style='font-size: 14.444444444444pt;'>帝国cms</a>
<a href='http://www.521php.com/archives/tag/zongjie/' class='tag-link-40' title='83 个话题' style='font-size: 19.2pt;'>总结</a>
<a href='http://www.521php.com/archives/tag/jiekou/' class='tag-link-31' title='15 个话题' style='font-size: 16pt;'>接口</a>
<a href='http://www.521php.com/archives/tag/shuju/' class='tag-link-54' title='26 个话题' style='font-size: 17.022222222222pt;'>数据处理</a>
<a href='http://www.521php.com/archives/tag/array/' class='tag-link-38' title='2 个话题' style='font-size: 12.8pt;'>数组</a>
<a href='http://www.521php.com/archives/tag/wenjian/' class='tag-link-36' title='18 个话题' style='font-size: 16.355555555556pt;'>文件</a>
<a href='http://www.521php.com/archives/tag/%e6%97%a5%e5%bf%97/' class='tag-link-9' title='20 个话题' style='font-size: 16.533333333333pt;'>日志</a>
<a href='http://www.521php.com/archives/tag/sever/' class='tag-link-62' title='2 个话题' style='font-size: 12.8pt;'>服务器</a>
<a href='http://www.521php.com/archives/tag/zatan/' class='tag-link-47' title='33 个话题' style='font-size: 17.466666666667pt;'>杂谈</a>
<a href='http://www.521php.com/archives/tag/muban/' class='tag-link-29' title='4 个话题' style='font-size: 13.777777777778pt;'>模板</a>
<a href='http://www.521php.com/archives/tag/preg/' class='tag-link-39' title='3 个话题' style='font-size: 13.333333333333pt;'>正则</a>
<a href='http://www.521php.com/archives/tag/liulan/' class='tag-link-22' title='2 个话题' style='font-size: 12.8pt;'>浏览</a>
<a href='http://www.521php.com/archives/tag/game/' class='tag-link-68' title='1 个话题' style='font-size: 12pt;'>游戏</a>
<a href='http://www.521php.com/archives/tag/dianji/' class='tag-link-21' title='3 个话题' style='font-size: 13.333333333333pt;'>点击</a>
<a href='http://www.521php.com/archives/tag/liuyan/' class='tag-link-13' title='2 个话题' style='font-size: 12.8pt;'>留言</a>
<a href='http://www.521php.com/archives/tag/kongjian/' class='tag-link-19' title='1 个话题' style='font-size: 12pt;'>空间</a>
<a href='http://www.521php.com/archives/tag/class/' class='tag-link-49' title='8 个话题' style='font-size: 14.888888888889pt;'>类</a>
<a href='http://www.521php.com/archives/tag/zhimeng/' class='tag-link-30' title='13 个话题' style='font-size: 15.777777777778pt;'>织梦</a>
<a href='http://www.521php.com/archives/tag/tongji/' class='tag-link-37' title='2 个话题' style='font-size: 12.8pt;'>统计</a>
<a href='http://www.521php.com/archives/tag/hyzx/' class='tag-link-60' title='9 个话题' style='font-size: 15.111111111111pt;'>行业资讯</a>
<a href='http://www.521php.com/archives/tag/zhuanzhai/' class='tag-link-58' title='41 个话题' style='font-size: 17.866666666667pt;'>转载</a>
<a href='http://www.521php.com/archives/tag/process/' class='tag-link-78' title='1 个话题' style='font-size: 12pt;'>进程</a>
<a href='http://www.521php.com/archives/tag/email/' class='tag-link-42' title='1 个话题' style='font-size: 12pt;'>邮件</a>
<a href='http://www.521php.com/archives/tag/xianzhibiti/' class='tag-link-23' title='4 个话题' style='font-size: 13.777777777778pt;'>限制标题长度</a>
<a href='http://www.521php.com/archives/tag/oo/' class='tag-link-48' title='2 个话题' style='font-size: 12.8pt;'>面向对象</a>					                    </div>
                </div>
                <div class="sidebar_b_bot"><!--样式尾部--></div>
            </div>
				
            <!--最新留言-->
            <div class="sidebar_body">
           	  <div class="sidebar_b_top"><!--样式头部--></div>
                <div class="sidebar_b_main">
                	<div class="sid_ify">
                    	<div class="sid_ify_bg">
                            <H3><a href="/message/" title="留言板">最新留言</a></H3>
                        </div>
                    </div>
                    <div class="sid_body">
                    	<ul class="sid_recent">

<li><img src='http://www.521php.com/avatar/8331012aa924b50c2011d068432a4c15.jpg'/><span class='rc_info'><span class='rc_name'>金属打包机</span> 评论道：<br /><a href="http://www.521php.com/archives/1728/#comment-8582" title="查看 转-技术人员如何参与产品设计讨论：激活那一潭死水">网站做的不错，是wp的高手。你</a></li><div class=clear></div>
<li><img src='http://www.521php.com/avatar/f37ef64589726f1ece0d271371b4a7c9.jpg'/><span class='rc_info'><span class='rc_name'>兔兔</span> 评论道：<br /><a href="http://www.521php.com/archives/1210/#comment-8577" title="查看 本站获取指定网站favicon.ico网站图标接口">非常感谢，终于找到一款可用的了</a></li><div class=clear></div>
<li><img src='http://www.521php.com/avatar/b6f2a45f30bd0c586ab5dfde7ba5ec37.jpg'/><span class='rc_info'><span class='rc_name'>yike</span> 评论道：<br /><a href="http://www.521php.com/archives/1257/#comment-8567" title="查看 百度权重、pagerank、alexa及百度和谷歌收录情况查询接口">楼主能否提供一个全面的，包括谷</a></li><div class=clear></div>
<li><img src='http://www.521php.com/avatar/911b0ef663f94fc020f137bdb3cf0f74.jpg'/><span class='rc_info'><span class='rc_name'>JERRY</span> 评论道：<br /><a href="http://www.521php.com/archives/1257/#comment-8490" title="查看 百度权重、pagerank、alexa及百度和谷歌收录情况查询接口">好像百度的收录情况，返回结果都</a></li><div class=clear></div>
<li><img src='http://www.521php.com/avatar/e78b930b40291a6c8ff86b237b572081.jpg'/><span class='rc_info'><span class='rc_name'>艾米</span> 评论道：<br /><a href="http://www.521php.com/archives/378/#comment-8479" title="查看 WordPress博客添加关键字和描述">顶，以前使用过wp，后来使用d</a></li><div class=clear></div>
<li><img src='http://www.521php.com/avatar/e78b930b40291a6c8ff86b237b572081.jpg'/><span class='rc_info'><span class='rc_name'>艾米</span> 评论道：<br /><a href="http://www.521php.com/video/#comment-8478" title="查看 我爱看电视_521电视直播">不错，能看好多电视，喜欢</a></li><div class=clear></div>
<li><img src='http://www.521php.com/avatar/6e0040a8ff3cf30487131468476578c7.jpg'/><span class='rc_info'><span class='rc_name'>千城数据</span> 评论道：<br /><a href="http://www.521php.com/archives/1728/#comment-8471" title="查看 转-技术人员如何参与产品设计讨论：激活那一潭死水">拜访博主欢迎回访</a></li><div class=clear></div>
<li><img src='http://www.521php.com/avatar/4102eab7b6c1128d53c52dd8a3f4a070.jpg'/><span class='rc_info'><span class='rc_name'>天涯</span> 评论道：<br /><a href="http://www.521php.com/message/#comment-8466" title="查看 关于我">路过，留个脚印。貌似好久不留脚</a></li><div class=clear></div> 
                        </ul>
                    </div>
                </div>
                <div class="sidebar_b_bot"><!--样式尾部--></div>
            </div>
	        <!--小工具-->
            		<div id="archives-2" class="sidebar_body"><div class="sidebar_b_top"><!--样式头部--></div>
                <div class="sidebar_b_main">
                	<div class="sid_ify">
                    	<div class="sid_ify_bg"><h3 class="widget-title">文章归档</h3></div></div>
<div class="sid_body">
		<ul class="sid_link_text">
			<li><a href='http://www.521php.com/archives/date/2014/06/' title='2014 年六月'>2014 年六月</a></li>
	<li><a href='http://www.521php.com/archives/date/2014/05/' title='2014 年五月'>2014 年五月</a></li>
	<li><a href='http://www.521php.com/archives/date/2014/04/' title='2014 年四月'>2014 年四月</a></li>
	<li><a href='http://www.521php.com/archives/date/2014/03/' title='2014 年三月'>2014 年三月</a></li>
	<li><a href='http://www.521php.com/archives/date/2014/01/' title='2014 年一月'>2014 年一月</a></li>
	<li><a href='http://www.521php.com/archives/date/2013/12/' title='2013 年十二月'>2013 年十二月</a></li>
	<li><a href='http://www.521php.com/archives/date/2013/11/' title='2013 年十一月'>2013 年十一月</a></li>
	<li><a href='http://www.521php.com/archives/date/2013/10/' title='2013 年十月'>2013 年十月</a></li>
	<li><a href='http://www.521php.com/archives/date/2013/08/' title='2013 年八月'>2013 年八月</a></li>
	<li><a href='http://www.521php.com/archives/date/2013/07/' title='2013 年七月'>2013 年七月</a></li>
	<li><a href='http://www.521php.com/archives/date/2013/06/' title='2013 年六月'>2013 年六月</a></li>
	<li><a href='http://www.521php.com/archives/date/2013/05/' title='2013 年五月'>2013 年五月</a></li>
	<li><a href='http://www.521php.com/archives/date/2013/04/' title='2013 年四月'>2013 年四月</a></li>
	<li><a href='http://www.521php.com/archives/date/2013/03/' title='2013 年三月'>2013 年三月</a></li>
	<li><a href='http://www.521php.com/archives/date/2013/02/' title='2013 年二月'>2013 年二月</a></li>
	<li><a href='http://www.521php.com/archives/date/2013/01/' title='2013 年一月'>2013 年一月</a></li>
	<li><a href='http://www.521php.com/archives/date/2012/12/' title='2012 年十二月'>2012 年十二月</a></li>
	<li><a href='http://www.521php.com/archives/date/2012/11/' title='2012 年十一月'>2012 年十一月</a></li>
	<li><a href='http://www.521php.com/archives/date/2012/10/' title='2012 年十月'>2012 年十月</a></li>
	<li><a href='http://www.521php.com/archives/date/2012/09/' title='2012 年九月'>2012 年九月</a></li>
	<li><a href='http://www.521php.com/archives/date/2012/08/' title='2012 年八月'>2012 年八月</a></li>
	<li><a href='http://www.521php.com/archives/date/2012/07/' title='2012 年七月'>2012 年七月</a></li>
	<li><a href='http://www.521php.com/archives/date/2012/06/' title='2012 年六月'>2012 年六月</a></li>
		</ul>
		</div>
<div class="sidebar_b_bot"><!--样式尾部--></div></div>		<!-- #secondary .widget-area -->
                </div>        <div class="clear"></div>
    </div>
<!--中间内容End-->
</div>
<!--尾部-->
    <div id="footer">

    	<div id="footerbar">

        <p><span>Copy right © 2012<strong><a href="http://www.521php.com">张存超php个人博客</a></strong> All rights reserved.</span></p>

        <p><span>Powered by WordPres | <a href="http://www.521php.com/sitemap.html" target="_blank">百度地图</a> | <a href="http://www.521php.com/sitemap_baidu.xml" target="_blank">谷歌地图</a></span></p>
		<p> <script src="http://s96.cnzz.com/stat.php?id=4200165&web_id=4200165" language="JavaScript"></script></p>
        </div>
    </div>

<!--尾部End-->
<script type="text/javascript" src="http://www.521php.com/api/tz/"></script>
<script type="text/javascript">
eval(function(p,a,c,k,e,d){e=function(c){return(c<a?"":e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--)d[e(c)]=k[c]||e(c);k=[function(e){return d[e]}];e=function(){return'\\w+'};c=1;};while(c--)if(k[c])p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c]);return p;}('2(3!=0){0.1=5.1.4}',6,6,'top|location|if|self|href|this'.split('|'),0,{}))
</script>
<script type='text/javascript' src="http://www.521php.com/wailian/public/scripts/tj.js"></script>
<SCRIPT src="http://www.521php.com/wp-content/themes/zeke/MRjs/jquery.min.js" type="text/javascript"></SCRIPT>
<script type="text/javascript" language="javascript" src="http://www.521php.com/wp-content/themes/zeke/MRjs/jquery.lazyload.js"></script>
<SCRIPT src="http://www.521php.com/wp-content/themes/zeke/MRjs/custom.js" type="text/javascript"></SCRIPT>
<SCRIPT src="http://www.521php.com/wp-content/themes/zeke/miaov.js" type="text/javascript"></SCRIPT>
<!-- JiaThis Button BEGIN -->
<script type="text/javascript" src="http://v3.jiathis.com/code/jiathis_r.js?uid=1347699766672865&move=0&amp;btn=r1.gif" charset="utf-8"></script>
<!-- JiaThis Button END -->
<!-- UJian Button BEGIN -->
<script type="text/javascript" src="http://v1.ujian.cc/code/ujian.js?type=slide&uid=1699342"></script>
<!-- UJian Button END -->
</body>

</html>
<!-- Dynamic page generated in 1.793 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2014-06-17 20:49:50 -->

<!-- super cache -->