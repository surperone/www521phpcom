<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="robots" content="all" />
<title>php生成缩略图类 | 我爱你PHP张存超技术博客</title> 
 
<meta name="description" content="调用的时候：
$image = Helper_Image::createFromFile(‘文件路径’,‘文件保存格式’);

$image-&gt;resampled(‘’, ‘’); //缩放到100px * 100PX
$image-&gt;saveAsJpeg(‘文件路径’ ,'品质(1到1..." />
<meta name="keywords" content="php, 函数, 图片处理, " />
	
<link href="http://www.521php.com/wp-content/themes/zeke/style.css" rel="stylesheet" type="text/css" />
<link href="http://www.521php.com/wp-content/themes/zeke/miaov_style.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="http://www.521php.com/wp-content/themes/zeke/comments-ajax.js"></script>
<link rel='stylesheet' id='crayon-css'  href='http://www.521php.com/wp-content/plugins/crayon-syntax-highlighter/css/min/crayon.min.css?ver=2.2.0' type='text/css' media='all' />
<link rel='stylesheet' id='crayon-theme-ado-css'  href='http://www.521php.com/wp-content/plugins/crayon-syntax-highlighter/themes/ado/ado.css?ver=2.2.0' type='text/css' media='all' />
<link rel='stylesheet' id='crayon-font-courier-new-css'  href='http://www.521php.com/wp-content/plugins/crayon-syntax-highlighter/fonts/courier-new.css?ver=2.2.0' type='text/css' media='all' />
<script type='text/javascript' src='http://www.521php.com/wp-includes/js/jquery/jquery.js?ver=1.7.1'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var CrayonSyntaxSettings = {"version":"2.2.0","is_admin":"0","ajaxurl":"http:\/\/www.521php.com\/wp-admin\/admin-ajax.php","prefix":"crayon-","setting":"crayon-setting","selected":"crayon-setting-selected","changed":"crayon-setting-changed","special":"crayon-setting-special","orig_value":"data-orig-value","debug":""};;
var CrayonSyntaxStrings = {"copy":"\u4f7f\u7528 %s \u590d\u5236\uff0c\u4f7f\u7528 %s \u7c98\u8d34\u3002","minimize":"Click To Expand Code"};
/* ]]> */
</script>
<script type='text/javascript' src='http://www.521php.com/wp-content/plugins/crayon-syntax-highlighter/js/min/crayon.min.js?ver=2.2.0'></script>
<script type='text/javascript' src='http://www.521php.com/wp-includes/js/comment-reply.js?ver=20090102'></script>
<link rel='prev' title='PHP 爬虫记录' href='http://www.521php.com/archives/279/' />
<link rel='next' title='不能有一丝的懈怠' href='http://www.521php.com/archives/297/' />
<link rel='canonical' href='http://www.521php.com/archives/293/' />
<link rel='shortlink' href='http://www.521php.com/?p=293' />
<link rel="Shortcut Icon" type="image/x-icon" href="http://www.521php.com/favicon.ico" /><!--[if lt IE 7]>
<script type="text/javascript" src="/wp-content/themes/MRjs/iepngfix_tilebg.js"></script>
<script type="text/javascript">
// <![CDATA[
if((window.navigator.appName.toUpperCase().indexOf("MICROSOFT")>=0)&&(document.execCommand))
try{
document.execCommand("BackgroundImageCache", false, true);
}
catch(e){}
// ]]>
</script>
<![endif]-->
</head>

<body>
<div id="wrap">
<!--头部-->
	<div id="header">
    	<div id="top">
        	<div class="mrlogo"><a href="http://www.521php.com/" title="  php生成缩略图类-php个人博客,php技术博客,php博客">  php生成缩略图类-php个人博客,php技术博客,php博客</a></div>
            <div class="search"><form method="get" target="_blank" id="searchform" action="http://www.521php.com/so.php">
<input type="hidden" name="url" value="521php.com" />
            <input class="field" name="s" id="s" type="text" value="百度谷歌一起搜！" onfocus="this.value=&#39;&#39;;" onblur="if(this.value==&#39;&#39;){this.value=&#39;百度谷歌一起搜！&#39;;}" />
            <input name="" type="submit" value="" class="so"id="go"  onmouseout="this.className=&#39;so&#39;" onmouseover="this.className=&#39;soHover&#39;" />
            </form></div>
        </div>
        <div id="nav">
        	<div class="menuL"><ul id="menu" class="menu"><li id="menu-item-480" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-480"><a title="返回首页" href="http://www.521php.com/"><span>首页</span></a></li>
<li id="menu-item-41" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-41"><a title="心情随笔" href="http://www.521php.com/archives/category/cclog/"><span>随笔</span></a></li>
<li id="menu-item-43" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-43"><a title="php技术" href="http://www.521php.com/archives/category/lovephp/"><span>我爱PHP</span></a></li>
<li id="menu-item-182" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-182"><a title="博采众长" href="http://www.521php.com/archives/category/team/"><span>博采众长</span></a></li>
<li id="menu-item-1749" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1749"><a href="http://www.521php.com/archives/category/linux/"><span>Linux</span></a></li>
<li id="menu-item-514" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-514"><a title="小功能" href="http://www.521php.com/archives/category/gongneng/"><span>小功能</span></a></li>
<li id="menu-item-479" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-479"><a title="联系我" href="http://www.521php.com/message/"><span>关于我</span></a></li>
<li id="menu-item-1139" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-1139"><a title="相册集" href="/xiangce/"><span>相册</span></a></li>
<li id="menu-item-993" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-993"><a title="友情链接" href="http://www.521php.com/flink/"><span>兄弟链</span></a></li>
<li id="menu-item-1613" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-1613"><a title="cclovepp" href="http://love.521php.com"><span>CClovePP</span></a></li>
<li id="menu-item-1540" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1540"><a href="http://www.521php.com/video/"><span>我爱直播</span></a></li>
<li id="menu-item-1239" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1239"><a title="我爱外链" href="http://www.521php.com/wailian/"><span>外链自助</span></a></li>
</ul><span class="bgic"><img src="/images/bgic.gif"></span></div>
            <div class="rss_ico"><a href="http://www.521php.com/feed/" target="_blank" rel="nofollow" title="RSS订阅">RSS订阅</a></div>
        </div>
    </div>
<!--头部End-->
<div class="share_more" id="share_more" style="DISPLAY: none; LEFT: 160px; POSITION: absolute; TOP: 442px;">
<p onMouseOver="share_more_element.style.display='block';" onmouseout="share_more_element.style.display='none';">
<A class=share>分享到...</A> 
<A class="qqt" href="javascript:doShare('qqt');">腾讯微博</A>
<A class="sinat" href="javascript:doShare('sinat');">新浪微博</A>
<A class="qqpeng" href="javascript:doShare('qqpeng');">QQ朋友</A>
<A class="renren" href="javascript:doShare('renren');">人人网</A>
<A class="douban" href="javascript:doShare('douban');">豆瓣</A></p></div>
<SCRIPT type=text/javascript>
var share_more_element = null;
var share_postid = -1;
var postArray = [];
function getPos(obj){
	var pos = [];
	pos[0] = obj.offsetLeft;//X
	pos[1] = obj.offsetTop;//Y
	while (obj = obj.offsetParent){
		pos[0] += obj.offsetLeft;
		pos[1] += obj.offsetTop;
	}
	return pos;
}
//显示隐藏层
function share_more(postid, obj){
	share_postid = postid;
	var objPos = getPos(obj);
	objPos[0]-=7;objPos[1]-=5;
	if(share_more_element == null)share_more_element=document.getElementById("share_more");
	share_more_element.style.left=objPos[0]+"px";
	share_more_element.style.top=objPos[1]+"px";
	share_more_element.style.display="block";
}
//添加收藏夹
function doShare(stype){
	stitle = postArray[share_postid][0];
	surl = postArray[share_postid][1];
	sdire = postArray[share_postid][2];
	sbanner = postArray[share_postid][3];
	
	blogtitle = '张存超技术博客';
	bloghome = 'http://www.521php.com';
	
	stitle = blogtitle + ' - ' + stitle;
	
	switch(stype){
		case "fav":
			if (document.all){
				window.external.addFavorite(surl,stitle);
			}
			else if (window.sidebar){
				window.sidebar.addPanel(stitle,surl, "");
			}
			else{
				alert("抱歉,您的浏览器不支持添加到收藏夹,换个浏览器试试?");
			}
			break;
		//腾讯微博
		case "qqt":
			u=encodeURIComponent(surl);
			t=encodeURIComponent('#博客#：' + stitle);
			b=encodeURIComponent(sbanner);
			su=encodeURIComponent(bloghome);
			window.open('http://v.t.qq.com/share/share.php?title='+t+'&url='+u+'&site='+su+'&pic='+b,'_blank');	
			break;
		//新浪微博
		case "sinat":
			u=encodeURIComponent(surl);
			t=encodeURIComponent('#博客#：' + stitle);
			b=encodeURIComponent(sbanner);
			su=encodeURIComponent(bloghome);
			window.open('http://v.t.sina.com.cn/share/share.php?title='+t+'&url='+u+'&site='+su+'&pic='+b,'_blank');	
			break;
		//QQ朋友
		case "qqpeng":
			u=encodeURIComponent(surl);
			t=encodeURIComponent(stitle);
			b=encodeURIComponent(sbanner);
			su=encodeURIComponent(bloghome);
			window.open('http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?to=pengyou&title='+t+'&url='+u+'&site='+su+'&pic='+b,'_blank');	
			break;
		//谷歌
		case "googlereader":
			u=encodeURIComponent(surl);
			t=encodeURIComponent(stitle);
			su=encodeURIComponent(bloghome);
			st=encodeURIComponent(blogtitle);
			window.open('http://www.google.com/reader/link?url='+u+'&title='+t+'&snippet=&srcTitle='+st+'&srcUrl='+su,'_blank');
			break;
		//人人网
		case "renren":
			u=encodeURIComponent(surl);
			t=encodeURIComponent(stitle);
			window.open('http://share.renren.com/share/buttonshare.do?link='+u+'&title='+t+'source=&sourceUrl=','_blank');
			break;
		//豆瓣
		case "douban":
			u=encodeURIComponent(surl);
			t=encodeURIComponent(stitle);
			window.open('http://www.douban.com/recommend/?url='+u+'&title='+t,'_blank');
			break;
	}
}
</SCRIPT>

<SCRIPT>postArray[0]=[];postArray[0][0]="张存超技术博客";postArray[0][1]="http://www.521php.com";postArray[0][2]="张存超技术博客 - http://www.521php.com";postArray[0][3]="http://www.521php.com/logo.png";</SCRIPT><!--中间内容-->
    <div id="container">
    	<div id="content">
	<div class="content_text">
          <div class="content_t_top"><!--样式头部--></div>
           		<div class="content_t_main"><div style="margin-left: 20px;">
<!--淘宝内容页推广start-->
		<script type="text/javascript">
     document.write('<a href="http://www.buydazhe.com" title="买就打折网" target="_blank"><img src="http://www.buydazhe.com/them/img/banner1.png" width="640" height="73" /></a>');
</script>
<!--淘宝内容页推广end--></div></div>
<div class="content_t_bot"><!--样式尾部--></div>
</div>
        	<div class="content_text">
            	<div class="content_t_top"><!--样式头部--></div>
           		<div class="content_t_main">
               		<!--ContentTitle-->
                    					<div class="ContentTitle">
                    	<div class="Data">
                        	<div class="DataLeft"><p class="monthB">1</p><p class="dateA">08-2012</p> </div>
                        </div>
                        <div class="Title">
                        	<H3><a href="http://www.521php.com/archives/293/" rel="bookmark">php生成缩略图类</a></H3>
                            <ul>
                            	<li class="mrinc name">地狱中仰望天堂</li>
                                <li class="mrinc date">2012-08-1</li>
                                <li class="mrinc folder"><a href="http://www.521php.com/archives/category/team/" title="查看 博采众长 中的全部文章" rel="category tag">博采众长</a>,<a href="http://www.521php.com/archives/category/lovephp/" title="查看 我爱PHP 中的全部文章" rel="category tag">我爱PHP</a>,<a href="http://www.521php.com/archives/category/tj/" title="查看 推荐文章 中的全部文章" rel="category tag">推荐文章</a></li>
                                <LI class="mrinc browse"><a href="#">浏览:668</a></LI>
                          		<LI class="mrinc like"><a href="http://www.521php.com/archives/293/#respond" title="《php生成缩略图类》上的评论">无评论</a></LI>
                                <li class="mrinc admin"></li>
                            </ul>
                        </div>
                    </div><!--content_banner-->
                    <div class="content_banner">
                    	
                        <div class="text" id="a293"><p>调用的时候：<br />
$image = Helper_Image::createFromFile(‘文件路径’,‘文件保存格式’);</p>
<p>$image-&gt;resampled(‘’, ‘’); //缩放到100px * 100PX<br />
$image-&gt;saveAsJpeg(‘文件路径’ ,&#8217;品质(1到100)&#8217;);<span id="more-293"></span></p><!-- Crayon Syntax Highlighter v2.2.0 -->

		<div id="crayon-53abc34da41c2" class="crayon-syntax crayon-theme-ado crayon-font-courier-new crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover wrap" style=" max-width: 645px; margin-top: 12px; margin-bottom: 12px; float: left; clear: both; font-size: 13px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover hide delay" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><div class="crayon-button crayon-nums-button" title="切换显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div><span class="crayon-language">PHP</span></div></div>
			<div class="crayon-info" style="min-height: 18.2px !important; line-height: 18.2px !important;"></div>
			<div class="crayon-plain-wrap"><textarea  class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;">
resize($width, $height);
     * $image-&amp;gt;saveAsJpeg('2.jpg');
     * @endcode
     *
     * 对于上传的文件，由于其临时文件名中并没有包含扩展名。
     * 因此需要采用下面的方法创建 Image 对象：
     *
     * @code php
     * $ext = pathinfo($_FILES['postfile']['name'], PATHINFO_EXTENSION);
     * $image = Image::createFromFile($_FILES['postfile']['tmp_name'], $ext);
     * @endcode
     *
     * @param string $filename 图像文件的完整路径
     * @param string $fileext 指定扩展名
     *
     * @return Helper_ImageGD 从文件创建的 Helper_ImageGD 对象
     * @throw Q_NotImplementedException
     */
    static function createFromFile($filename, $fileext)
    {
        echo $fileext = trim(strtolower($fileext), '.');
        $ext2functions = array(
            'jpg'  =&amp;gt; 'imagecreatefromjpeg',
            'jpeg' =&amp;gt; 'imagecreatefromjpeg',
            'png'  =&amp;gt; 'imagecreatefrompng',
            'gif'  =&amp;gt; 'imagecreatefromgif'
        );  

        if (!isset($ext2functions[$fileext]))
        {
                throw new Q_NotImplementedException(__('imagecreateform' . $fileext));
        }
        $handle = call_user_func($ext2functions[$fileext], $filename);
        return new Helper_ImageGD($handle);
    }  

        /**
         * 将 16 进制颜色值转换为 rgb 值
     *
     * 用法：
     * @code php
     * $color = '#369';
     * list($r, $g, $b) = Helper_Image::hex2rgb($color);
     * echo "red: {$r}, green: {$g}, blue: {$b}";
     * @endcode
     *
     * @param string $color 颜色值
     * @param string $default 使用无效颜色值时返回的默认颜色
         *
         * @return array 由 RGB 三色组成的数组
         */
        static function hex2rgb($color, $default = 'ffffff')
        {
        $hex = trim($color, '#&amp;amp;Hh');
        $len = strlen($hex);
        if ($len == 3)
        {
            $hex = "{$hex[0]}{$hex[0]}{$hex[1]}{$hex[1]}{$hex[2]}{$hex[2]}";
        }
        elseif ($len &amp;lt; 6)           {               $hex = $default;           }           $dec = hexdec($hex);           return array(($dec &amp;gt;&amp;gt; 16) &amp;amp; 0xff, ($dec &amp;gt;&amp;gt; 8) &amp;amp; 0xff, $dec &amp;amp; 0xff);
        }
}  

/**
* Helper_ImageGD 类封装了一个 gd 句柄，用于对图像进行操作
*
* @author YuLei Liao
* @version $Id: image.php 1937 2009-01-05 19:09:40Z dualface $
* @package helper
*/
class Helper_ImageGD
{
    /**
     * GD 资源句柄
     *
     * @var resource
     */
    protected $_handle = null;  

    /**
     * 构造函数
     *
     * @param resource $handle GD 资源句柄
     */
    function __construct($handle)
    {
        $this-&amp;gt;_handle = $handle;
    }  

    /**
     * 析构函数
     */
    function __destruct()
    {
            $this-&amp;gt;destroy();
    }  

    /**
     * 快速缩放图像到指定大小（质量较差）
     *
     * @param int $width 新的宽度
     * @param int $height 新的高度
     *
     * @return Helper_ImageGD 返回 Helper_ImageGD 对象本身，实现连贯接口
     */
    function resize($width, $height)
    {
        if (is_null($this-&amp;gt;_handle)) return $this;  

        $dest = imagecreatetruecolor($width, $height);
        imagecopyresized($dest, $this-&amp;gt;_handle, 0, 0, 0, 0,
            $width, $height,
            imagesx($this-&amp;gt;_handle), imagesy($this-&amp;gt;_handle));
        imagedestroy($this-&amp;gt;_handle);
        $this-&amp;gt;_handle = $dest;
        return $this;
    }  

    /**
     * 缩放图像到指定大小（质量较好，速度比 resize() 慢）
     *
     * @param int $width 新的宽度
     * @param int $height 新的高度
     *
     * @return Helper_ImageGD 返回 Helper_ImageGD 对象本身，实现连贯接口
     */
    function resampled($width, $height)
    {
        if (is_null($this-&amp;gt;_handle)) return $this;
        $dest = imagecreatetruecolor($width, $height);
        imagecopyresampled($dest, $this-&amp;gt;_handle, 0, 0, 0, 0,
            $width, $height,
            imagesx($this-&amp;gt;_handle), imagesy($this-&amp;gt;_handle));
        imagedestroy($this-&amp;gt;_handle);
        $this-&amp;gt;_handle = $dest;
        return $this;
    }  

    /**
     * 调整图像大小，但不进行缩放操作
     *
     * 用法：
     * @code php
     * $image-&amp;gt;resizeCanvas($width, $height, 'top-left');
     * @endcode
     *
     * $pos 参数指定了调整图像大小时，图像内容按照什么位置对齐。
     * $pos 参数的可用值有：
     *
     * -   left: 左对齐
     * -   right: 右对齐
     * -   center: 中心对齐
     * -   top: 顶部对齐
     * -   bottom: 底部对齐
     * -   top-left, left-top: 左上角对齐
     * -   top-right, right-top: 右上角对齐
     * -   bottom-left, left-bottom: 左下角对齐
     * -   bottom-right, right-bottom: 右下角对齐
     *
     * 如果指定了无效的 $pos 参数，则等同于指定 center。
     *
     * @param int $width 新的高度
     * @param int $height 新的宽度
     * @param string $pos 调整时图像位置的变化
     * @param string $bgcolor 空白部分的默认颜色
     *
     * @return Helper_ImageGD 返回 Helper_ImageGD 对象本身，实现连贯接口
     */
    function resizeCanvas($width, $height, $pos = 'center', $bgcolor = '0xffffff')
    {
        if (is_null($this-&amp;gt;_handle)) return $this;  

        $dest = imagecreatetruecolor($width, $height);
        $sx = imagesx($this-&amp;gt;_handle);
        $sy = imagesy($this-&amp;gt;_handle);  

        // 根据 pos 属性来决定如何定位原始图片
        switch (strtolower($pos))
        {
        case 'left':
            $ox = 0;
            $oy = ($height - $sy) / 2;
            break;
        case 'right':
            $ox = $width - $sx;
            $oy = ($height - $sy) / 2;
            break;
        case 'top':
            $ox = ($width - $sx) / 2;
            $oy = 0;
            break;
        case 'bottom':
            $ox = ($width - $sx) / 2;
            $oy = $height - $sy;
            break;
        case 'top-left':
        case 'left-top':
            $ox = $oy = 0;
            break;
        case 'top-right':
        case 'right-top':
            $ox = $width - $sx;
            $oy = 0;
            break;
        case 'bottom-left':
        case 'left-bottom':
            $ox = 0;
            $oy = $height - $sy;
            break;
        case 'bottom-right':
        case 'right-bottom':
            $ox = $width - $sx;
            $oy = $height - $sy;
            break;
        default:
            $ox = ($width - $sx) / 2;
            $oy = ($height - $sy) / 2;
        }  

        list ($r, $g, $b) = Helper_Image::hex2rgb($bgcolor, '0xffffff');
        $bgcolor = imagecolorallocate($dest, $r, $g, $b);
        imagefilledrectangle($dest, 0, 0, $width, $height, $bgcolor);
        imagecolordeallocate($dest, $bgcolor);  

        imagecopy($dest, $this-&amp;gt;_handle, $ox, $oy, 0, 0, $sx, $sy);
        imagedestroy($this-&amp;gt;_handle);
        $this-&amp;gt;_handle = $dest;  

        return $this;
    }  

    /**
     * 在保持图像长宽比的情况下将图像裁减到指定大小
     *
     * crop() 在缩放图像时，可以保持图像的长宽比，从而保证图像不会拉高或压扁。
     *
     * crop() 默认情况下会按照 $width 和 $height 参数计算出最大缩放比例，
     * 保持裁减后的图像能够最大程度的充满图片。
     *
     * 例如源图的大小是 800 x 600，而指定的 $width 和 $height 是 200 和 100。
     * 那么源图会被首先缩小为 200 x 150 尺寸，然后裁减掉多余的 50 像素高度。
     *
     * 用法：
     * @code php
     * $image-&amp;gt;crop($width, $height);
     * @endcode
     *
     * 如果希望最终生成图片始终包含完整图像内容，那么应该指定 $options 参数。
     * 该参数可用值有：
     *
     * -   fullimage: 是否保持完整图像
     * -   pos: 缩放时的对齐方式
     * -   bgcolor: 缩放时多余部分的背景色
     * -   enlarge: 是否允许放大
     * -   reduce: 是否允许缩小
     *
     * 其中 $options['pos'] 参数的可用值有：
     *
     * -   left: 左对齐
     * -   right: 右对齐
     * -   center: 中心对齐
     * -   top: 顶部对齐
     * -   bottom: 底部对齐
     * -   top-left, left-top: 左上角对齐
     * -   top-right, right-top: 右上角对齐
     * -   bottom-left, left-bottom: 左下角对齐
     * -   bottom-right, right-bottom: 右下角对齐
     *
     * 如果指定了无效的 $pos 参数，则等同于指定 center。
     *
     * $options 中的每一个选项都可以单独指定，例如在允许裁减的情况下将图像放到新图片的右下角。
     *
     * @code php
     * $image-&amp;gt;crop($width, $height, array('pos' =&amp;gt; 'right-bottom'));
     * @endcode
     *
     * @param int $width 新的宽度
     * @param int $height 新的高度
     * @param array $options 裁减选项
     *
     * @return Helper_ImageGD 返回 Helper_ImageGD 对象本身，实现连贯接口
     */
    function crop($width, $height, $options = array())
    {
        if (is_null($this-&amp;gt;_handle)) return $this;  

        $default_options = array(
            'fullimage' =&amp;gt; false,
            'pos'       =&amp;gt; 'center',
            'bgcolor'   =&amp;gt; '0xfff',
            'enlarge'   =&amp;gt; false,
            'reduce'    =&amp;gt; true,
        );
        $options = array_merge($default_options, $options);  

        // 创建目标图像
        $dest = imagecreatetruecolor($width, $height);
        // 填充背景色
        list ($r, $g, $b) = Helper_Image::hex2rgb($options['bgcolor'], '0xffffff');
        $bgcolor = imagecolorallocate($dest, $r, $g, $b);
        imagefilledrectangle($dest, 0, 0, $width, $height, $bgcolor);
        imagecolordeallocate($dest, $bgcolor);  

        // 根据源图计算长宽比
        $full_w = imagesx($this-&amp;gt;_handle);
        $full_h = imagesy($this-&amp;gt;_handle);
        $ratio_w = doubleval($width) / doubleval($full_w);
        $ratio_h = doubleval($height) / doubleval($full_h);  

        if ($options['fullimage'])
        {
            // 如果要保持完整图像，则选择最小的比率
            $ratio = $ratio_w &amp;lt; $ratio_h ? $ratio_w : $ratio_h;           }           else           {               // 否则选择最大的比率               $ratio = $ratio_w &amp;gt; $ratio_h ? $ratio_w : $ratio_h;
        }  

        if (!$options['enlarge'] &amp;amp;&amp;amp; $ratio &amp;gt; 1) $ratio = 1;
        if (!$options['reduce'] &amp;amp;&amp;amp; $ratio &amp;lt; 1) $ratio = 1;                 // 计算目标区域的宽高、位置           $dst_w = $full_w * $ratio;           $dst_h = $full_h * $ratio;                 // 根据 pos 属性来决定如何定位           switch (strtolower($options['pos']))           {           case 'left':               $dst_x = 0;               $dst_y = ($height - $dst_h) / 2;               break;           case 'right':               $dst_x = $width - $dst_w;               $dst_y = ($height - $dst_h) / 2;               break;           case 'top':               $dst_x = ($width - $dst_w) / 2;               $dst_y = 0;               break;           case 'bottom':               $dst_x = ($width - $dst_w) / 2;               $dst_y = $height - $dst_h;               break;           case 'top-left':           case 'left-top':               $dst_x = $dst_y = 0;               break;           case 'top-right':           case 'right-top':               $dst_x = $width - $dst_w;               $dst_y = 0;               break;           case 'bottom-left':           case 'left-bottom':               $dst_x = 0;               $dst_y = $height - $dst_h;               break;           case 'bottom-right':           case 'right-bottom':               $dst_x = $width - $dst_w;               $dst_y = $height - $dst_h;               break;           case 'center':           default:               $dst_x = ($width - $dst_w) / 2;               $dst_y = ($height - $dst_h) / 2;           }                 imagecopyresampled($dest,  $this-&amp;gt;_handle, $dst_x, $dst_y, 0, 0, $dst_w, $dst_h, $full_w, $full_h);
        imagedestroy($this-&amp;gt;_handle);
        $this-&amp;gt;_handle = $dest;  

        return $this;
    }  

    /**
     * 保存为 JPEG 文件
     *
     * @param string $filename 保存文件名
     * @param int $quality 品质参数，默认为 80
     *
     * @return Helper_ImageGD 返回 Helper_ImageGD 对象本身，实现连贯接口
     */
    function saveAsJpeg($filename, $quality = 80)
    {
        imagejpeg($this-&amp;gt;_handle, $filename, $quality);
    }
    /**
     * 保存为 PNG 文件
     *
     * @param string $filename 保存文件名
     *
     * @return Helper_ImageGD 返回 Helper_ImageGD 对象本身，实现连贯接口
     */
    function saveAsPng($filename)
    {
        imagepng($this-&amp;gt;_handle, $filename);
    }  

    /**
     * 保存为 GIF 文件
     *
     * @param string $filename 保存文件名
     *
     * @return Helper_ImageGD 返回 Helper_ImageGD 对象本身，实现连贯接口
     */
    function saveAsGif($filename)
    {
        imagegif($this-&amp;gt;_handle, $filename);
    }  

    /**
     * 销毁内存中的图像
     *
     * @return Helper_ImageGD 返回 Helper_ImageGD 对象本身，实现连贯接口
     */
    function destroy()
    {
            if (!$this-&amp;gt;_handle)
            {
            @imagedestroy($this-&amp;gt;_handle);
            }
        $this-&amp;gt;_handle = null;
        return $this;
    }
}</textarea></div>
			<div class="crayon-main" style=" max-width: 645px;">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 13px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-53abc34da41c2-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-2">2</div><div class="crayon-num" data-line="crayon-53abc34da41c2-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-4">4</div><div class="crayon-num" data-line="crayon-53abc34da41c2-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-6">6</div><div class="crayon-num" data-line="crayon-53abc34da41c2-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-8">8</div><div class="crayon-num" data-line="crayon-53abc34da41c2-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-10">10</div><div class="crayon-num" data-line="crayon-53abc34da41c2-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-12">12</div><div class="crayon-num" data-line="crayon-53abc34da41c2-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-14">14</div><div class="crayon-num" data-line="crayon-53abc34da41c2-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-16">16</div><div class="crayon-num" data-line="crayon-53abc34da41c2-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-18">18</div><div class="crayon-num" data-line="crayon-53abc34da41c2-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-20">20</div><div class="crayon-num" data-line="crayon-53abc34da41c2-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-22">22</div><div class="crayon-num" data-line="crayon-53abc34da41c2-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-24">24</div><div class="crayon-num" data-line="crayon-53abc34da41c2-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-26">26</div><div class="crayon-num" data-line="crayon-53abc34da41c2-27">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-28">28</div><div class="crayon-num" data-line="crayon-53abc34da41c2-29">29</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-30">30</div><div class="crayon-num" data-line="crayon-53abc34da41c2-31">31</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-32">32</div><div class="crayon-num" data-line="crayon-53abc34da41c2-33">33</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-34">34</div><div class="crayon-num" data-line="crayon-53abc34da41c2-35">35</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-36">36</div><div class="crayon-num" data-line="crayon-53abc34da41c2-37">37</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-38">38</div><div class="crayon-num" data-line="crayon-53abc34da41c2-39">39</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-40">40</div><div class="crayon-num" data-line="crayon-53abc34da41c2-41">41</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-42">42</div><div class="crayon-num" data-line="crayon-53abc34da41c2-43">43</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-44">44</div><div class="crayon-num" data-line="crayon-53abc34da41c2-45">45</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-46">46</div><div class="crayon-num" data-line="crayon-53abc34da41c2-47">47</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-48">48</div><div class="crayon-num" data-line="crayon-53abc34da41c2-49">49</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-50">50</div><div class="crayon-num" data-line="crayon-53abc34da41c2-51">51</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-52">52</div><div class="crayon-num" data-line="crayon-53abc34da41c2-53">53</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-54">54</div><div class="crayon-num" data-line="crayon-53abc34da41c2-55">55</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-56">56</div><div class="crayon-num" data-line="crayon-53abc34da41c2-57">57</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-58">58</div><div class="crayon-num" data-line="crayon-53abc34da41c2-59">59</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-60">60</div><div class="crayon-num" data-line="crayon-53abc34da41c2-61">61</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-62">62</div><div class="crayon-num" data-line="crayon-53abc34da41c2-63">63</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-64">64</div><div class="crayon-num" data-line="crayon-53abc34da41c2-65">65</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-66">66</div><div class="crayon-num" data-line="crayon-53abc34da41c2-67">67</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-68">68</div><div class="crayon-num" data-line="crayon-53abc34da41c2-69">69</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-70">70</div><div class="crayon-num" data-line="crayon-53abc34da41c2-71">71</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-72">72</div><div class="crayon-num" data-line="crayon-53abc34da41c2-73">73</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-74">74</div><div class="crayon-num" data-line="crayon-53abc34da41c2-75">75</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-76">76</div><div class="crayon-num" data-line="crayon-53abc34da41c2-77">77</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-78">78</div><div class="crayon-num" data-line="crayon-53abc34da41c2-79">79</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-80">80</div><div class="crayon-num" data-line="crayon-53abc34da41c2-81">81</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-82">82</div><div class="crayon-num" data-line="crayon-53abc34da41c2-83">83</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-84">84</div><div class="crayon-num" data-line="crayon-53abc34da41c2-85">85</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-86">86</div><div class="crayon-num" data-line="crayon-53abc34da41c2-87">87</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-88">88</div><div class="crayon-num" data-line="crayon-53abc34da41c2-89">89</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-90">90</div><div class="crayon-num" data-line="crayon-53abc34da41c2-91">91</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-92">92</div><div class="crayon-num" data-line="crayon-53abc34da41c2-93">93</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-94">94</div><div class="crayon-num" data-line="crayon-53abc34da41c2-95">95</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-96">96</div><div class="crayon-num" data-line="crayon-53abc34da41c2-97">97</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-98">98</div><div class="crayon-num" data-line="crayon-53abc34da41c2-99">99</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-100">100</div><div class="crayon-num" data-line="crayon-53abc34da41c2-101">101</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-102">102</div><div class="crayon-num" data-line="crayon-53abc34da41c2-103">103</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-104">104</div><div class="crayon-num" data-line="crayon-53abc34da41c2-105">105</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-106">106</div><div class="crayon-num" data-line="crayon-53abc34da41c2-107">107</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-108">108</div><div class="crayon-num" data-line="crayon-53abc34da41c2-109">109</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-110">110</div><div class="crayon-num" data-line="crayon-53abc34da41c2-111">111</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-112">112</div><div class="crayon-num" data-line="crayon-53abc34da41c2-113">113</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-114">114</div><div class="crayon-num" data-line="crayon-53abc34da41c2-115">115</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-116">116</div><div class="crayon-num" data-line="crayon-53abc34da41c2-117">117</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-118">118</div><div class="crayon-num" data-line="crayon-53abc34da41c2-119">119</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-120">120</div><div class="crayon-num" data-line="crayon-53abc34da41c2-121">121</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-122">122</div><div class="crayon-num" data-line="crayon-53abc34da41c2-123">123</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-124">124</div><div class="crayon-num" data-line="crayon-53abc34da41c2-125">125</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-126">126</div><div class="crayon-num" data-line="crayon-53abc34da41c2-127">127</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-128">128</div><div class="crayon-num" data-line="crayon-53abc34da41c2-129">129</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-130">130</div><div class="crayon-num" data-line="crayon-53abc34da41c2-131">131</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-132">132</div><div class="crayon-num" data-line="crayon-53abc34da41c2-133">133</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-134">134</div><div class="crayon-num" data-line="crayon-53abc34da41c2-135">135</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-136">136</div><div class="crayon-num" data-line="crayon-53abc34da41c2-137">137</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-138">138</div><div class="crayon-num" data-line="crayon-53abc34da41c2-139">139</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-140">140</div><div class="crayon-num" data-line="crayon-53abc34da41c2-141">141</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-142">142</div><div class="crayon-num" data-line="crayon-53abc34da41c2-143">143</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-144">144</div><div class="crayon-num" data-line="crayon-53abc34da41c2-145">145</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-146">146</div><div class="crayon-num" data-line="crayon-53abc34da41c2-147">147</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-148">148</div><div class="crayon-num" data-line="crayon-53abc34da41c2-149">149</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-150">150</div><div class="crayon-num" data-line="crayon-53abc34da41c2-151">151</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-152">152</div><div class="crayon-num" data-line="crayon-53abc34da41c2-153">153</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-154">154</div><div class="crayon-num" data-line="crayon-53abc34da41c2-155">155</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-156">156</div><div class="crayon-num" data-line="crayon-53abc34da41c2-157">157</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-158">158</div><div class="crayon-num" data-line="crayon-53abc34da41c2-159">159</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-160">160</div><div class="crayon-num" data-line="crayon-53abc34da41c2-161">161</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-162">162</div><div class="crayon-num" data-line="crayon-53abc34da41c2-163">163</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-164">164</div><div class="crayon-num" data-line="crayon-53abc34da41c2-165">165</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-166">166</div><div class="crayon-num" data-line="crayon-53abc34da41c2-167">167</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-168">168</div><div class="crayon-num" data-line="crayon-53abc34da41c2-169">169</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-170">170</div><div class="crayon-num" data-line="crayon-53abc34da41c2-171">171</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-172">172</div><div class="crayon-num" data-line="crayon-53abc34da41c2-173">173</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-174">174</div><div class="crayon-num" data-line="crayon-53abc34da41c2-175">175</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-176">176</div><div class="crayon-num" data-line="crayon-53abc34da41c2-177">177</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-178">178</div><div class="crayon-num" data-line="crayon-53abc34da41c2-179">179</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-180">180</div><div class="crayon-num" data-line="crayon-53abc34da41c2-181">181</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-182">182</div><div class="crayon-num" data-line="crayon-53abc34da41c2-183">183</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-184">184</div><div class="crayon-num" data-line="crayon-53abc34da41c2-185">185</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-186">186</div><div class="crayon-num" data-line="crayon-53abc34da41c2-187">187</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-188">188</div><div class="crayon-num" data-line="crayon-53abc34da41c2-189">189</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-190">190</div><div class="crayon-num" data-line="crayon-53abc34da41c2-191">191</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-192">192</div><div class="crayon-num" data-line="crayon-53abc34da41c2-193">193</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-194">194</div><div class="crayon-num" data-line="crayon-53abc34da41c2-195">195</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-196">196</div><div class="crayon-num" data-line="crayon-53abc34da41c2-197">197</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-198">198</div><div class="crayon-num" data-line="crayon-53abc34da41c2-199">199</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-200">200</div><div class="crayon-num" data-line="crayon-53abc34da41c2-201">201</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-202">202</div><div class="crayon-num" data-line="crayon-53abc34da41c2-203">203</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-204">204</div><div class="crayon-num" data-line="crayon-53abc34da41c2-205">205</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-206">206</div><div class="crayon-num" data-line="crayon-53abc34da41c2-207">207</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-208">208</div><div class="crayon-num" data-line="crayon-53abc34da41c2-209">209</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-210">210</div><div class="crayon-num" data-line="crayon-53abc34da41c2-211">211</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-212">212</div><div class="crayon-num" data-line="crayon-53abc34da41c2-213">213</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-214">214</div><div class="crayon-num" data-line="crayon-53abc34da41c2-215">215</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-216">216</div><div class="crayon-num" data-line="crayon-53abc34da41c2-217">217</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-218">218</div><div class="crayon-num" data-line="crayon-53abc34da41c2-219">219</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-220">220</div><div class="crayon-num" data-line="crayon-53abc34da41c2-221">221</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-222">222</div><div class="crayon-num" data-line="crayon-53abc34da41c2-223">223</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-224">224</div><div class="crayon-num" data-line="crayon-53abc34da41c2-225">225</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-226">226</div><div class="crayon-num" data-line="crayon-53abc34da41c2-227">227</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-228">228</div><div class="crayon-num" data-line="crayon-53abc34da41c2-229">229</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-230">230</div><div class="crayon-num" data-line="crayon-53abc34da41c2-231">231</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-232">232</div><div class="crayon-num" data-line="crayon-53abc34da41c2-233">233</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-234">234</div><div class="crayon-num" data-line="crayon-53abc34da41c2-235">235</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-236">236</div><div class="crayon-num" data-line="crayon-53abc34da41c2-237">237</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-238">238</div><div class="crayon-num" data-line="crayon-53abc34da41c2-239">239</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-240">240</div><div class="crayon-num" data-line="crayon-53abc34da41c2-241">241</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-242">242</div><div class="crayon-num" data-line="crayon-53abc34da41c2-243">243</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-244">244</div><div class="crayon-num" data-line="crayon-53abc34da41c2-245">245</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-246">246</div><div class="crayon-num" data-line="crayon-53abc34da41c2-247">247</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-248">248</div><div class="crayon-num" data-line="crayon-53abc34da41c2-249">249</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-250">250</div><div class="crayon-num" data-line="crayon-53abc34da41c2-251">251</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-252">252</div><div class="crayon-num" data-line="crayon-53abc34da41c2-253">253</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-254">254</div><div class="crayon-num" data-line="crayon-53abc34da41c2-255">255</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-256">256</div><div class="crayon-num" data-line="crayon-53abc34da41c2-257">257</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-258">258</div><div class="crayon-num" data-line="crayon-53abc34da41c2-259">259</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-260">260</div><div class="crayon-num" data-line="crayon-53abc34da41c2-261">261</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-262">262</div><div class="crayon-num" data-line="crayon-53abc34da41c2-263">263</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-264">264</div><div class="crayon-num" data-line="crayon-53abc34da41c2-265">265</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-266">266</div><div class="crayon-num" data-line="crayon-53abc34da41c2-267">267</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-268">268</div><div class="crayon-num" data-line="crayon-53abc34da41c2-269">269</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-270">270</div><div class="crayon-num" data-line="crayon-53abc34da41c2-271">271</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-272">272</div><div class="crayon-num" data-line="crayon-53abc34da41c2-273">273</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-274">274</div><div class="crayon-num" data-line="crayon-53abc34da41c2-275">275</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-276">276</div><div class="crayon-num" data-line="crayon-53abc34da41c2-277">277</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-278">278</div><div class="crayon-num" data-line="crayon-53abc34da41c2-279">279</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-280">280</div><div class="crayon-num" data-line="crayon-53abc34da41c2-281">281</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-282">282</div><div class="crayon-num" data-line="crayon-53abc34da41c2-283">283</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-284">284</div><div class="crayon-num" data-line="crayon-53abc34da41c2-285">285</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-286">286</div><div class="crayon-num" data-line="crayon-53abc34da41c2-287">287</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-288">288</div><div class="crayon-num" data-line="crayon-53abc34da41c2-289">289</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-290">290</div><div class="crayon-num" data-line="crayon-53abc34da41c2-291">291</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-292">292</div><div class="crayon-num" data-line="crayon-53abc34da41c2-293">293</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-294">294</div><div class="crayon-num" data-line="crayon-53abc34da41c2-295">295</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-296">296</div><div class="crayon-num" data-line="crayon-53abc34da41c2-297">297</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-298">298</div><div class="crayon-num" data-line="crayon-53abc34da41c2-299">299</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-300">300</div><div class="crayon-num" data-line="crayon-53abc34da41c2-301">301</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-302">302</div><div class="crayon-num" data-line="crayon-53abc34da41c2-303">303</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-304">304</div><div class="crayon-num" data-line="crayon-53abc34da41c2-305">305</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-306">306</div><div class="crayon-num" data-line="crayon-53abc34da41c2-307">307</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-308">308</div><div class="crayon-num" data-line="crayon-53abc34da41c2-309">309</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-310">310</div><div class="crayon-num" data-line="crayon-53abc34da41c2-311">311</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-312">312</div><div class="crayon-num" data-line="crayon-53abc34da41c2-313">313</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-314">314</div><div class="crayon-num" data-line="crayon-53abc34da41c2-315">315</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-316">316</div><div class="crayon-num" data-line="crayon-53abc34da41c2-317">317</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-318">318</div><div class="crayon-num" data-line="crayon-53abc34da41c2-319">319</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-320">320</div><div class="crayon-num" data-line="crayon-53abc34da41c2-321">321</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-322">322</div><div class="crayon-num" data-line="crayon-53abc34da41c2-323">323</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-324">324</div><div class="crayon-num" data-line="crayon-53abc34da41c2-325">325</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-326">326</div><div class="crayon-num" data-line="crayon-53abc34da41c2-327">327</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-328">328</div><div class="crayon-num" data-line="crayon-53abc34da41c2-329">329</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-330">330</div><div class="crayon-num" data-line="crayon-53abc34da41c2-331">331</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-332">332</div><div class="crayon-num" data-line="crayon-53abc34da41c2-333">333</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-334">334</div><div class="crayon-num" data-line="crayon-53abc34da41c2-335">335</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-336">336</div><div class="crayon-num" data-line="crayon-53abc34da41c2-337">337</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-338">338</div><div class="crayon-num" data-line="crayon-53abc34da41c2-339">339</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-340">340</div><div class="crayon-num" data-line="crayon-53abc34da41c2-341">341</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-342">342</div><div class="crayon-num" data-line="crayon-53abc34da41c2-343">343</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-344">344</div><div class="crayon-num" data-line="crayon-53abc34da41c2-345">345</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-346">346</div><div class="crayon-num" data-line="crayon-53abc34da41c2-347">347</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-348">348</div><div class="crayon-num" data-line="crayon-53abc34da41c2-349">349</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-350">350</div><div class="crayon-num" data-line="crayon-53abc34da41c2-351">351</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-352">352</div><div class="crayon-num" data-line="crayon-53abc34da41c2-353">353</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-354">354</div><div class="crayon-num" data-line="crayon-53abc34da41c2-355">355</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-356">356</div><div class="crayon-num" data-line="crayon-53abc34da41c2-357">357</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-358">358</div><div class="crayon-num" data-line="crayon-53abc34da41c2-359">359</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-360">360</div><div class="crayon-num" data-line="crayon-53abc34da41c2-361">361</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-362">362</div><div class="crayon-num" data-line="crayon-53abc34da41c2-363">363</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-364">364</div><div class="crayon-num" data-line="crayon-53abc34da41c2-365">365</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-366">366</div><div class="crayon-num" data-line="crayon-53abc34da41c2-367">367</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-368">368</div><div class="crayon-num" data-line="crayon-53abc34da41c2-369">369</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-370">370</div><div class="crayon-num" data-line="crayon-53abc34da41c2-371">371</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-372">372</div><div class="crayon-num" data-line="crayon-53abc34da41c2-373">373</div><div class="crayon-num crayon-striped-num" data-line="crayon-53abc34da41c2-374">374</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 13px !important; line-height: 15px !important;"><div class="crayon-line" id="crayon-53abc34da41c2-1"><span class="e">resize</span><span class="sy">(</span><span class="v">$width</span><span class="sy">,</span><span class="h"> </span><span class="v">$height</span><span class="sy">)</span><span class="sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-2"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="o">*</span><span class="h"> </span><span class="v">$image</span><span class="o">-</span><span class="o">&amp;</span><span class="i">gt</span><span class="sy">;</span><span class="e">saveAsJpeg</span><span class="sy">(</span><span class="s">'2.jpg'</span><span class="sy">)</span><span class="sy">;</span></div><div class="crayon-line" id="crayon-53abc34da41c2-3"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="o">*</span><span class="h"> </span><span class="sy">@</span><span class="i">endcode</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-4"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="o">*</span></div><div class="crayon-line" id="crayon-53abc34da41c2-5"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="o">*</span><span class="h"> </span>对于上传的文件，由于其临时文件名中并没有包含扩展名。</div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-6"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="o">*</span><span class="h"> </span>因此需要采用下面的方法创建<span class="h"> </span><span class="i">Image</span><span class="h"> </span>对象：</div><div class="crayon-line" id="crayon-53abc34da41c2-7"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="o">*</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-8"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="o">*</span><span class="h"> </span><span class="sy">@</span><span class="e">code </span><span class="i">php</span></div><div class="crayon-line" id="crayon-53abc34da41c2-9"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="o">*</span><span class="h"> </span><span class="v">$ext</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e">pathinfo</span><span class="sy">(</span><span class="v">$_FILES</span><span class="sy">[</span><span class="s">'postfile'</span><span class="sy">]</span><span class="sy">[</span><span class="s">'name'</span><span class="sy">]</span><span class="sy">,</span><span class="h"> </span><span class="e ">PATHINFO_EXTENSION</span><span class="sy">)</span><span class="sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-10"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="o">*</span><span class="h"> </span><span class="v">$image</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e">Image::</span><span class="e">createFromFile</span><span class="sy">(</span><span class="v">$_FILES</span><span class="sy">[</span><span class="s">'postfile'</span><span class="sy">]</span><span class="sy">[</span><span class="s">'tmp_name'</span><span class="sy">]</span><span class="sy">,</span><span class="h"> </span><span class="v">$ext</span><span class="sy">)</span><span class="sy">;</span></div><div class="crayon-line" id="crayon-53abc34da41c2-11"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="o">*</span><span class="h"> </span><span class="sy">@</span><span class="i">endcode</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-12"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="o">*</span></div><div class="crayon-line" id="crayon-53abc34da41c2-13"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="o">*</span><span class="h"> </span><span class="sy">@</span><span class="e">param </span><span class="t">string</span><span class="h"> </span><span class="v">$filename</span><span class="h"> </span>图像文件的完整路径</div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-14"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="o">*</span><span class="h"> </span><span class="sy">@</span><span class="e">param </span><span class="t">string</span><span class="h"> </span><span class="v">$fileext</span><span class="h"> </span>指定扩展名</div><div class="crayon-line" id="crayon-53abc34da41c2-15"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="o">*</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-16"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="o">*</span><span class="h"> </span><span class="sy">@</span><span class="k ">return</span><span class="h"> </span><span class="i">Helper_ImageGD</span><span class="h"> </span>从文件创建的<span class="h"> </span><span class="i">Helper_ImageGD</span><span class="h"> </span>对象</div><div class="crayon-line" id="crayon-53abc34da41c2-17"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="o">*</span><span class="h"> </span><span class="sy">@</span><span class="st">throw</span><span class="h"> </span><span class="i">Q_NotImplementedException</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-18"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="o">*</span><span class="o">/</span></div><div class="crayon-line" id="crayon-53abc34da41c2-19"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="m">static</span><span class="h"> </span><span class="t">function</span><span class="h"> </span><span class="e">createFromFile</span><span class="sy">(</span><span class="v">$filename</span><span class="sy">,</span><span class="h"> </span><span class="v">$fileext</span><span class="sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-20"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="sy">{</span></div><div class="crayon-line" id="crayon-53abc34da41c2-21"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="k ">echo</span><span class="h"> </span><span class="v">$fileext</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e">trim</span><span class="sy">(</span><span class="e">strtolower</span><span class="sy">(</span><span class="v">$fileext</span><span class="sy">)</span><span class="sy">,</span><span class="h"> </span><span class="s">'.'</span><span class="sy">)</span><span class="sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-22"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="v">$ext2functions</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="t">array</span><span class="sy">(</span></div><div class="crayon-line" id="crayon-53abc34da41c2-23"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="s">'jpg'</span><span class="h">&nbsp;&nbsp;</span><span class="o">=&amp;</span><span class="i">gt</span><span class="sy">;</span><span class="h"> </span><span class="s">'imagecreatefromjpeg'</span><span class="sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-24"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="s">'jpeg'</span><span class="h"> </span><span class="o">=&amp;</span><span class="i">gt</span><span class="sy">;</span><span class="h"> </span><span class="s">'imagecreatefromjpeg'</span><span class="sy">,</span></div><div class="crayon-line" id="crayon-53abc34da41c2-25"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="s">'png'</span><span class="h">&nbsp;&nbsp;</span><span class="o">=&amp;</span><span class="i">gt</span><span class="sy">;</span><span class="h"> </span><span class="s">'imagecreatefrompng'</span><span class="sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-26"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="s">'gif'</span><span class="h">&nbsp;&nbsp;</span><span class="o">=&amp;</span><span class="i">gt</span><span class="sy">;</span><span class="h"> </span><span class="s">'imagecreatefromgif'</span></div><div class="crayon-line" id="crayon-53abc34da41c2-27"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="sy">)</span><span class="sy">;</span><span class="h">&nbsp;&nbsp;</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-28">&nbsp;</div><div class="crayon-line" id="crayon-53abc34da41c2-29"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="o">!</span><span class="k ">isset</span><span class="sy">(</span><span class="v">$ext2functions</span><span class="sy">[</span><span class="v">$fileext</span><span class="sy">]</span><span class="sy">)</span><span class="sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-30"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="sy">{</span></div><div class="crayon-line" id="crayon-53abc34da41c2-31"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="st">throw</span><span class="h"> </span><span class="r">new</span><span class="h"> </span><span class="e">Q_NotImplementedException</span><span class="sy">(</span><span class="e">__</span><span class="sy">(</span><span class="s">'imagecreateform'</span><span class="h"> </span><span class="sy">.</span><span class="h"> </span><span class="v">$fileext</span><span class="sy">)</span><span class="sy">)</span><span class="sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-32"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="sy">}</span></div><div class="crayon-line" id="crayon-53abc34da41c2-33"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="v">$handle</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e">call_user_func</span><span class="sy">(</span><span class="v">$ext2functions</span><span class="sy">[</span><span class="v">$fileext</span><span class="sy">]</span><span class="sy">,</span><span class="h"> </span><span class="v">$filename</span><span class="sy">)</span><span class="sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-34"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="k ">return</span><span class="h"> </span><span class="r">new</span><span class="h"> </span><span class="e">Helper_ImageGD</span><span class="sy">(</span><span class="v">$handle</span><span class="sy">)</span><span class="sy">;</span></div><div class="crayon-line" id="crayon-53abc34da41c2-35"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="sy">}</span><span class="h">&nbsp;&nbsp;</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-36">&nbsp;</div><div class="crayon-line" id="crayon-53abc34da41c2-37"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c">/**</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-38"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; * 将 16 进制颜色值转换为 rgb 值</span></div><div class="crayon-line" id="crayon-53abc34da41c2-39"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; *</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-40"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * 用法：</span></div><div class="crayon-line" id="crayon-53abc34da41c2-41"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * @code php</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-42"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * $color = '#369';</span></div><div class="crayon-line" id="crayon-53abc34da41c2-43"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * list($r, $g, $b) = Helper_Image::hex2rgb($color);</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-44"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * echo "red: {$r}, green: {$g}, blue: {$b}";</span></div><div class="crayon-line" id="crayon-53abc34da41c2-45"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * @endcode</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-46"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; *</span></div><div class="crayon-line" id="crayon-53abc34da41c2-47"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * @param string $color 颜色值</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-48"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * @param string $default 使用无效颜色值时返回的默认颜色</span></div><div class="crayon-line" id="crayon-53abc34da41c2-49"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; *</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-50"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; * @return array 由 RGB 三色组成的数组</span></div><div class="crayon-line" id="crayon-53abc34da41c2-51"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; */</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-52"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="m">static</span><span class="h"> </span><span class="t">function</span><span class="h"> </span><span class="e">hex2rgb</span><span class="sy">(</span><span class="v">$color</span><span class="sy">,</span><span class="h"> </span><span class="v">$default</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="s">'ffffff'</span><span class="sy">)</span></div><div class="crayon-line" id="crayon-53abc34da41c2-53"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-54"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="v">$hex</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e">trim</span><span class="sy">(</span><span class="v">$color</span><span class="sy">,</span><span class="h"> </span><span class="s">'#&amp;amp;Hh'</span><span class="sy">)</span><span class="sy">;</span></div><div class="crayon-line" id="crayon-53abc34da41c2-55"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="v">$len</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e">strlen</span><span class="sy">(</span><span class="v">$hex</span><span class="sy">)</span><span class="sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-56"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">$len</span><span class="h"> </span><span class="o">==</span><span class="h"> </span><span class="cn">3</span><span class="sy">)</span></div><div class="crayon-line" id="crayon-53abc34da41c2-57"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-58"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="v">$hex</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="s">"{$hex[0]}{$hex[0]}{$hex[1]}{$hex[1]}{$hex[2]}{$hex[2]}"</span><span class="sy">;</span></div><div class="crayon-line" id="crayon-53abc34da41c2-59"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-60"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="st">elseif</span><span class="h"> </span><span class="sy">(</span><span class="v">$len</span><span class="h"> </span><span class="o">&amp;</span><span class="i">lt</span><span class="sy">;</span><span class="h"> </span><span class="cn">6</span><span class="sy">)</span><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="sy">{</span><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="v">$hex</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">$default</span><span class="sy">;</span><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="sy">}</span><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="v">$dec</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e">hexdec</span><span class="sy">(</span><span class="v">$hex</span><span class="sy">)</span><span class="sy">;</span><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="k ">return</span><span class="h"> </span><span class="t">array</span><span class="sy">(</span><span class="sy">(</span><span class="v">$dec</span><span class="h"> </span><span class="o">&amp;</span><span class="i">gt</span><span class="sy">;</span><span class="o">&amp;</span><span class="i">gt</span><span class="sy">;</span><span class="h"> </span><span class="cn">16</span><span class="sy">)</span><span class="h"> </span><span class="o">&amp;</span><span class="i">amp</span><span class="sy">;</span><span class="h"> </span><span class="cn">0xff</span><span class="sy">,</span><span class="h"> </span><span class="sy">(</span><span class="v">$dec</span><span class="h"> </span><span class="o">&amp;</span><span class="i">gt</span><span class="sy">;</span><span class="o">&amp;</span><span class="i">gt</span><span class="sy">;</span><span class="h"> </span><span class="cn">8</span><span class="sy">)</span><span class="h"> </span><span class="o">&amp;</span><span class="i">amp</span><span class="sy">;</span><span class="h"> </span><span class="cn">0xff</span><span class="sy">,</span><span class="h"> </span><span class="v">$dec</span><span class="h"> </span><span class="o">&amp;</span><span class="i">amp</span><span class="sy">;</span><span class="h"> </span><span class="cn">0xff</span><span class="sy">)</span><span class="sy">;</span></div><div class="crayon-line" id="crayon-53abc34da41c2-61"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-62"><span class="sy">}</span><span class="h">&nbsp;&nbsp;</span></div><div class="crayon-line" id="crayon-53abc34da41c2-63">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-64"><span class="c">/**</span></div><div class="crayon-line" id="crayon-53abc34da41c2-65"><span class="c">* Helper_ImageGD 类封装了一个 gd 句柄，用于对图像进行操作</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-66"><span class="c">*</span></div><div class="crayon-line" id="crayon-53abc34da41c2-67"><span class="c">* @author YuLei Liao</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-68"><span class="c">* @version $Id: image.php 1937 2009-01-05 19:09:40Z dualface $</span></div><div class="crayon-line" id="crayon-53abc34da41c2-69"><span class="c">* @package helper</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-70"><span class="c">*/</span></div><div class="crayon-line" id="crayon-53abc34da41c2-71"><span class="t">class</span><span class="h"> </span><span class="e">Helper_ImageGD</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-72"><span class="sy">{</span></div><div class="crayon-line" id="crayon-53abc34da41c2-73"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c">/**</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-74"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * GD 资源句柄</span></div><div class="crayon-line" id="crayon-53abc34da41c2-75"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; *</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-76"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * @var resource</span></div><div class="crayon-line" id="crayon-53abc34da41c2-77"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; */</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-78"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="m">protected</span><span class="h"> </span><span class="v">$_handle</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="t">null</span><span class="sy">;</span><span class="h">&nbsp;&nbsp;</span></div><div class="crayon-line" id="crayon-53abc34da41c2-79">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-80"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c">/**</span></div><div class="crayon-line" id="crayon-53abc34da41c2-81"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * 构造函数</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-82"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; *</span></div><div class="crayon-line" id="crayon-53abc34da41c2-83"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * @param resource $handle GD 资源句柄</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-84"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; */</span></div><div class="crayon-line" id="crayon-53abc34da41c2-85"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="t">function</span><span class="h"> </span><span class="e">__construct</span><span class="sy">(</span><span class="v">$handle</span><span class="sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-86"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="sy">{</span></div><div class="crayon-line" id="crayon-53abc34da41c2-87"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="v">$this</span><span class="o">-</span><span class="o">&amp;</span><span class="i">gt</span><span class="sy">;</span><span class="i">_handle</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">$handle</span><span class="sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-88"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="sy">}</span><span class="h">&nbsp;&nbsp;</span></div><div class="crayon-line" id="crayon-53abc34da41c2-89">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-90"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c">/**</span></div><div class="crayon-line" id="crayon-53abc34da41c2-91"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * 析构函数</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-92"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; */</span></div><div class="crayon-line" id="crayon-53abc34da41c2-93"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="t">function</span><span class="h"> </span><span class="e">__destruct</span><span class="sy">(</span><span class="sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-94"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="sy">{</span></div><div class="crayon-line" id="crayon-53abc34da41c2-95"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="v">$this</span><span class="o">-</span><span class="o">&amp;</span><span class="i">gt</span><span class="sy">;</span><span class="e">destroy</span><span class="sy">(</span><span class="sy">)</span><span class="sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-96"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="sy">}</span><span class="h">&nbsp;&nbsp;</span></div><div class="crayon-line" id="crayon-53abc34da41c2-97">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-98"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c">/**</span></div><div class="crayon-line" id="crayon-53abc34da41c2-99"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * 快速缩放图像到指定大小（质量较差）</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-100"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; *</span></div><div class="crayon-line" id="crayon-53abc34da41c2-101"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * @param int $width 新的宽度</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-102"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * @param int $height 新的高度</span></div><div class="crayon-line" id="crayon-53abc34da41c2-103"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; *</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-104"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * @return Helper_ImageGD 返回 Helper_ImageGD 对象本身，实现连贯接口</span></div><div class="crayon-line" id="crayon-53abc34da41c2-105"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; */</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-106"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="t">function</span><span class="h"> </span><span class="e">resize</span><span class="sy">(</span><span class="v">$width</span><span class="sy">,</span><span class="h"> </span><span class="v">$height</span><span class="sy">)</span></div><div class="crayon-line" id="crayon-53abc34da41c2-107"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-108"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="e">is_null</span><span class="sy">(</span><span class="v">$this</span><span class="o">-</span><span class="o">&amp;</span><span class="i">gt</span><span class="sy">;</span><span class="i">_handle</span><span class="sy">)</span><span class="sy">)</span><span class="h"> </span><span class="k ">return</span><span class="h"> </span><span class="v">$this</span><span class="sy">;</span><span class="h">&nbsp;&nbsp;</span></div><div class="crayon-line" id="crayon-53abc34da41c2-109">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-110"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="v">$dest</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e">imagecreatetruecolor</span><span class="sy">(</span><span class="v">$width</span><span class="sy">,</span><span class="h"> </span><span class="v">$height</span><span class="sy">)</span><span class="sy">;</span></div><div class="crayon-line" id="crayon-53abc34da41c2-111"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="e">imagecopyresized</span><span class="sy">(</span><span class="v">$dest</span><span class="sy">,</span><span class="h"> </span><span class="v">$this</span><span class="o">-</span><span class="o">&amp;</span><span class="i">gt</span><span class="sy">;</span><span class="i">_handle</span><span class="sy">,</span><span class="h"> </span><span class="cn">0</span><span class="sy">,</span><span class="h"> </span><span class="cn">0</span><span class="sy">,</span><span class="h"> </span><span class="cn">0</span><span class="sy">,</span><span class="h"> </span><span class="cn">0</span><span class="sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-112"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="v">$width</span><span class="sy">,</span><span class="h"> </span><span class="v">$height</span><span class="sy">,</span></div><div class="crayon-line" id="crayon-53abc34da41c2-113"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="e">imagesx</span><span class="sy">(</span><span class="v">$this</span><span class="o">-</span><span class="o">&amp;</span><span class="i">gt</span><span class="sy">;</span><span class="i">_handle</span><span class="sy">)</span><span class="sy">,</span><span class="h"> </span><span class="e">imagesy</span><span class="sy">(</span><span class="v">$this</span><span class="o">-</span><span class="o">&amp;</span><span class="i">gt</span><span class="sy">;</span><span class="i">_handle</span><span class="sy">)</span><span class="sy">)</span><span class="sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-114"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="e">imagedestroy</span><span class="sy">(</span><span class="v">$this</span><span class="o">-</span><span class="o">&amp;</span><span class="i">gt</span><span class="sy">;</span><span class="i">_handle</span><span class="sy">)</span><span class="sy">;</span></div><div class="crayon-line" id="crayon-53abc34da41c2-115"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="v">$this</span><span class="o">-</span><span class="o">&amp;</span><span class="i">gt</span><span class="sy">;</span><span class="i">_handle</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">$dest</span><span class="sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-116"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="k ">return</span><span class="h"> </span><span class="v">$this</span><span class="sy">;</span></div><div class="crayon-line" id="crayon-53abc34da41c2-117"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="sy">}</span><span class="h">&nbsp;&nbsp;</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-118">&nbsp;</div><div class="crayon-line" id="crayon-53abc34da41c2-119"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c">/**</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-120"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * 缩放图像到指定大小（质量较好，速度比 resize() 慢）</span></div><div class="crayon-line" id="crayon-53abc34da41c2-121"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; *</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-122"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * @param int $width 新的宽度</span></div><div class="crayon-line" id="crayon-53abc34da41c2-123"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * @param int $height 新的高度</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-124"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; *</span></div><div class="crayon-line" id="crayon-53abc34da41c2-125"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * @return Helper_ImageGD 返回 Helper_ImageGD 对象本身，实现连贯接口</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-126"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; */</span></div><div class="crayon-line" id="crayon-53abc34da41c2-127"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="t">function</span><span class="h"> </span><span class="e">resampled</span><span class="sy">(</span><span class="v">$width</span><span class="sy">,</span><span class="h"> </span><span class="v">$height</span><span class="sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-128"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="sy">{</span></div><div class="crayon-line" id="crayon-53abc34da41c2-129"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="e">is_null</span><span class="sy">(</span><span class="v">$this</span><span class="o">-</span><span class="o">&amp;</span><span class="i">gt</span><span class="sy">;</span><span class="i">_handle</span><span class="sy">)</span><span class="sy">)</span><span class="h"> </span><span class="k ">return</span><span class="h"> </span><span class="v">$this</span><span class="sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-130"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="v">$dest</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e">imagecreatetruecolor</span><span class="sy">(</span><span class="v">$width</span><span class="sy">,</span><span class="h"> </span><span class="v">$height</span><span class="sy">)</span><span class="sy">;</span></div><div class="crayon-line" id="crayon-53abc34da41c2-131"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="e">imagecopyresampled</span><span class="sy">(</span><span class="v">$dest</span><span class="sy">,</span><span class="h"> </span><span class="v">$this</span><span class="o">-</span><span class="o">&amp;</span><span class="i">gt</span><span class="sy">;</span><span class="i">_handle</span><span class="sy">,</span><span class="h"> </span><span class="cn">0</span><span class="sy">,</span><span class="h"> </span><span class="cn">0</span><span class="sy">,</span><span class="h"> </span><span class="cn">0</span><span class="sy">,</span><span class="h"> </span><span class="cn">0</span><span class="sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-132"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="v">$width</span><span class="sy">,</span><span class="h"> </span><span class="v">$height</span><span class="sy">,</span></div><div class="crayon-line" id="crayon-53abc34da41c2-133"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="e">imagesx</span><span class="sy">(</span><span class="v">$this</span><span class="o">-</span><span class="o">&amp;</span><span class="i">gt</span><span class="sy">;</span><span class="i">_handle</span><span class="sy">)</span><span class="sy">,</span><span class="h"> </span><span class="e">imagesy</span><span class="sy">(</span><span class="v">$this</span><span class="o">-</span><span class="o">&amp;</span><span class="i">gt</span><span class="sy">;</span><span class="i">_handle</span><span class="sy">)</span><span class="sy">)</span><span class="sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-134"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="e">imagedestroy</span><span class="sy">(</span><span class="v">$this</span><span class="o">-</span><span class="o">&amp;</span><span class="i">gt</span><span class="sy">;</span><span class="i">_handle</span><span class="sy">)</span><span class="sy">;</span></div><div class="crayon-line" id="crayon-53abc34da41c2-135"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="v">$this</span><span class="o">-</span><span class="o">&amp;</span><span class="i">gt</span><span class="sy">;</span><span class="i">_handle</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">$dest</span><span class="sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-136"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="k ">return</span><span class="h"> </span><span class="v">$this</span><span class="sy">;</span></div><div class="crayon-line" id="crayon-53abc34da41c2-137"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="sy">}</span><span class="h">&nbsp;&nbsp;</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-138">&nbsp;</div><div class="crayon-line" id="crayon-53abc34da41c2-139"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c">/**</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-140"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * 调整图像大小，但不进行缩放操作</span></div><div class="crayon-line" id="crayon-53abc34da41c2-141"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; *</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-142"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * 用法：</span></div><div class="crayon-line" id="crayon-53abc34da41c2-143"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * @code php</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-144"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * $image-&amp;gt;resizeCanvas($width, $height, 'top-left');</span></div><div class="crayon-line" id="crayon-53abc34da41c2-145"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * @endcode</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-146"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; *</span></div><div class="crayon-line" id="crayon-53abc34da41c2-147"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * $pos 参数指定了调整图像大小时，图像内容按照什么位置对齐。</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-148"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * $pos 参数的可用值有：</span></div><div class="crayon-line" id="crayon-53abc34da41c2-149"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; *</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-150"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * -&nbsp;&nbsp; left: 左对齐</span></div><div class="crayon-line" id="crayon-53abc34da41c2-151"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * -&nbsp;&nbsp; right: 右对齐</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-152"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * -&nbsp;&nbsp; center: 中心对齐</span></div><div class="crayon-line" id="crayon-53abc34da41c2-153"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * -&nbsp;&nbsp; top: 顶部对齐</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-154"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * -&nbsp;&nbsp; bottom: 底部对齐</span></div><div class="crayon-line" id="crayon-53abc34da41c2-155"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * -&nbsp;&nbsp; top-left, left-top: 左上角对齐</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-156"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * -&nbsp;&nbsp; top-right, right-top: 右上角对齐</span></div><div class="crayon-line" id="crayon-53abc34da41c2-157"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * -&nbsp;&nbsp; bottom-left, left-bottom: 左下角对齐</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-158"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * -&nbsp;&nbsp; bottom-right, right-bottom: 右下角对齐</span></div><div class="crayon-line" id="crayon-53abc34da41c2-159"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; *</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-160"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * 如果指定了无效的 $pos 参数，则等同于指定 center。</span></div><div class="crayon-line" id="crayon-53abc34da41c2-161"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; *</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-162"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * @param int $width 新的高度</span></div><div class="crayon-line" id="crayon-53abc34da41c2-163"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * @param int $height 新的宽度</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-164"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * @param string $pos 调整时图像位置的变化</span></div><div class="crayon-line" id="crayon-53abc34da41c2-165"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * @param string $bgcolor 空白部分的默认颜色</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-166"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; *</span></div><div class="crayon-line" id="crayon-53abc34da41c2-167"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * @return Helper_ImageGD 返回 Helper_ImageGD 对象本身，实现连贯接口</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-168"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; */</span></div><div class="crayon-line" id="crayon-53abc34da41c2-169"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="t">function</span><span class="h"> </span><span class="e">resizeCanvas</span><span class="sy">(</span><span class="v">$width</span><span class="sy">,</span><span class="h"> </span><span class="v">$height</span><span class="sy">,</span><span class="h"> </span><span class="v">$pos</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="s">'center'</span><span class="sy">,</span><span class="h"> </span><span class="v">$bgcolor</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="s">'0xffffff'</span><span class="sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-170"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="sy">{</span></div><div class="crayon-line" id="crayon-53abc34da41c2-171"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="e">is_null</span><span class="sy">(</span><span class="v">$this</span><span class="o">-</span><span class="o">&amp;</span><span class="i">gt</span><span class="sy">;</span><span class="i">_handle</span><span class="sy">)</span><span class="sy">)</span><span class="h"> </span><span class="k ">return</span><span class="h"> </span><span class="v">$this</span><span class="sy">;</span><span class="h">&nbsp;&nbsp;</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-172">&nbsp;</div><div class="crayon-line" id="crayon-53abc34da41c2-173"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="v">$dest</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e">imagecreatetruecolor</span><span class="sy">(</span><span class="v">$width</span><span class="sy">,</span><span class="h"> </span><span class="v">$height</span><span class="sy">)</span><span class="sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-174"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="v">$sx</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e">imagesx</span><span class="sy">(</span><span class="v">$this</span><span class="o">-</span><span class="o">&amp;</span><span class="i">gt</span><span class="sy">;</span><span class="i">_handle</span><span class="sy">)</span><span class="sy">;</span></div><div class="crayon-line" id="crayon-53abc34da41c2-175"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="v">$sy</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e">imagesy</span><span class="sy">(</span><span class="v">$this</span><span class="o">-</span><span class="o">&amp;</span><span class="i">gt</span><span class="sy">;</span><span class="i">_handle</span><span class="sy">)</span><span class="sy">;</span><span class="h">&nbsp;&nbsp;</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-176">&nbsp;</div><div class="crayon-line" id="crayon-53abc34da41c2-177"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c">// 根据 pos 属性来决定如何定位原始图片</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-178"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="st">switch</span><span class="h"> </span><span class="sy">(</span><span class="e">strtolower</span><span class="sy">(</span><span class="v">$pos</span><span class="sy">)</span><span class="sy">)</span></div><div class="crayon-line" id="crayon-53abc34da41c2-179"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-180"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="st">case</span><span class="h"> </span><span class="s">'left'</span><span class="o">:</span></div><div class="crayon-line" id="crayon-53abc34da41c2-181"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="v">$ox</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-182"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="v">$oy</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="sy">(</span><span class="v">$height</span><span class="h"> </span><span class="o">-</span><span class="h"> </span><span class="v">$sy</span><span class="sy">)</span><span class="h"> </span><span class="o">/</span><span class="h"> </span><span class="cn">2</span><span class="sy">;</span></div><div class="crayon-line" id="crayon-53abc34da41c2-183"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="st">break</span><span class="sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-184"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="st">case</span><span class="h"> </span><span class="s">'right'</span><span class="o">:</span></div><div class="crayon-line" id="crayon-53abc34da41c2-185"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="v">$ox</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">$width</span><span class="h"> </span><span class="o">-</span><span class="h"> </span><span class="v">$sx</span><span class="sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-186"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="v">$oy</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="sy">(</span><span class="v">$height</span><span class="h"> </span><span class="o">-</span><span class="h"> </span><span class="v">$sy</span><span class="sy">)</span><span class="h"> </span><span class="o">/</span><span class="h"> </span><span class="cn">2</span><span class="sy">;</span></div><div class="crayon-line" id="crayon-53abc34da41c2-187"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="st">break</span><span class="sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-188"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="st">case</span><span class="h"> </span><span class="s">'top'</span><span class="o">:</span></div><div class="crayon-line" id="crayon-53abc34da41c2-189"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="v">$ox</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="sy">(</span><span class="v">$width</span><span class="h"> </span><span class="o">-</span><span class="h"> </span><span class="v">$sx</span><span class="sy">)</span><span class="h"> </span><span class="o">/</span><span class="h"> </span><span class="cn">2</span><span class="sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-190"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="v">$oy</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span></div><div class="crayon-line" id="crayon-53abc34da41c2-191"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="st">break</span><span class="sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-192"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="st">case</span><span class="h"> </span><span class="s">'bottom'</span><span class="o">:</span></div><div class="crayon-line" id="crayon-53abc34da41c2-193"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="v">$ox</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="sy">(</span><span class="v">$width</span><span class="h"> </span><span class="o">-</span><span class="h"> </span><span class="v">$sx</span><span class="sy">)</span><span class="h"> </span><span class="o">/</span><span class="h"> </span><span class="cn">2</span><span class="sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-194"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="v">$oy</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">$height</span><span class="h"> </span><span class="o">-</span><span class="h"> </span><span class="v">$sy</span><span class="sy">;</span></div><div class="crayon-line" id="crayon-53abc34da41c2-195"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="st">break</span><span class="sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-196"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="st">case</span><span class="h"> </span><span class="s">'top-left'</span><span class="o">:</span></div><div class="crayon-line" id="crayon-53abc34da41c2-197"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="st">case</span><span class="h"> </span><span class="s">'left-top'</span><span class="o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-198"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="v">$ox</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">$oy</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span></div><div class="crayon-line" id="crayon-53abc34da41c2-199"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="st">break</span><span class="sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-200"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="st">case</span><span class="h"> </span><span class="s">'top-right'</span><span class="o">:</span></div><div class="crayon-line" id="crayon-53abc34da41c2-201"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="st">case</span><span class="h"> </span><span class="s">'right-top'</span><span class="o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-202"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="v">$ox</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">$width</span><span class="h"> </span><span class="o">-</span><span class="h"> </span><span class="v">$sx</span><span class="sy">;</span></div><div class="crayon-line" id="crayon-53abc34da41c2-203"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="v">$oy</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-204"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="st">break</span><span class="sy">;</span></div><div class="crayon-line" id="crayon-53abc34da41c2-205"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="st">case</span><span class="h"> </span><span class="s">'bottom-left'</span><span class="o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-206"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="st">case</span><span class="h"> </span><span class="s">'left-bottom'</span><span class="o">:</span></div><div class="crayon-line" id="crayon-53abc34da41c2-207"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="v">$ox</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">0</span><span class="sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-208"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="v">$oy</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">$height</span><span class="h"> </span><span class="o">-</span><span class="h"> </span><span class="v">$sy</span><span class="sy">;</span></div><div class="crayon-line" id="crayon-53abc34da41c2-209"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="st">break</span><span class="sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-210"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="st">case</span><span class="h"> </span><span class="s">'bottom-right'</span><span class="o">:</span></div><div class="crayon-line" id="crayon-53abc34da41c2-211"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="st">case</span><span class="h"> </span><span class="s">'right-bottom'</span><span class="o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-212"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="v">$ox</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">$width</span><span class="h"> </span><span class="o">-</span><span class="h"> </span><span class="v">$sx</span><span class="sy">;</span></div><div class="crayon-line" id="crayon-53abc34da41c2-213"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="v">$oy</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">$height</span><span class="h"> </span><span class="o">-</span><span class="h"> </span><span class="v">$sy</span><span class="sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-214"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="st">break</span><span class="sy">;</span></div><div class="crayon-line" id="crayon-53abc34da41c2-215"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="st">default</span><span class="o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-216"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="v">$ox</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="sy">(</span><span class="v">$width</span><span class="h"> </span><span class="o">-</span><span class="h"> </span><span class="v">$sx</span><span class="sy">)</span><span class="h"> </span><span class="o">/</span><span class="h"> </span><span class="cn">2</span><span class="sy">;</span></div><div class="crayon-line" id="crayon-53abc34da41c2-217"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="v">$oy</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="sy">(</span><span class="v">$height</span><span class="h"> </span><span class="o">-</span><span class="h"> </span><span class="v">$sy</span><span class="sy">)</span><span class="h"> </span><span class="o">/</span><span class="h"> </span><span class="cn">2</span><span class="sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-218"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="sy">}</span><span class="h">&nbsp;&nbsp;</span></div><div class="crayon-line" id="crayon-53abc34da41c2-219">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-220"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="k ">list</span><span class="h"> </span><span class="sy">(</span><span class="v">$r</span><span class="sy">,</span><span class="h"> </span><span class="v">$g</span><span class="sy">,</span><span class="h"> </span><span class="v">$b</span><span class="sy">)</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e">Helper_Image::</span><span class="e">hex2rgb</span><span class="sy">(</span><span class="v">$bgcolor</span><span class="sy">,</span><span class="h"> </span><span class="s">'0xffffff'</span><span class="sy">)</span><span class="sy">;</span></div><div class="crayon-line" id="crayon-53abc34da41c2-221"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="v">$bgcolor</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e">imagecolorallocate</span><span class="sy">(</span><span class="v">$dest</span><span class="sy">,</span><span class="h"> </span><span class="v">$r</span><span class="sy">,</span><span class="h"> </span><span class="v">$g</span><span class="sy">,</span><span class="h"> </span><span class="v">$b</span><span class="sy">)</span><span class="sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-222"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="e">imagefilledrectangle</span><span class="sy">(</span><span class="v">$dest</span><span class="sy">,</span><span class="h"> </span><span class="cn">0</span><span class="sy">,</span><span class="h"> </span><span class="cn">0</span><span class="sy">,</span><span class="h"> </span><span class="v">$width</span><span class="sy">,</span><span class="h"> </span><span class="v">$height</span><span class="sy">,</span><span class="h"> </span><span class="v">$bgcolor</span><span class="sy">)</span><span class="sy">;</span></div><div class="crayon-line" id="crayon-53abc34da41c2-223"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="e">imagecolordeallocate</span><span class="sy">(</span><span class="v">$dest</span><span class="sy">,</span><span class="h"> </span><span class="v">$bgcolor</span><span class="sy">)</span><span class="sy">;</span><span class="h">&nbsp;&nbsp;</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-224">&nbsp;</div><div class="crayon-line" id="crayon-53abc34da41c2-225"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="e">imagecopy</span><span class="sy">(</span><span class="v">$dest</span><span class="sy">,</span><span class="h"> </span><span class="v">$this</span><span class="o">-</span><span class="o">&amp;</span><span class="i">gt</span><span class="sy">;</span><span class="i">_handle</span><span class="sy">,</span><span class="h"> </span><span class="v">$ox</span><span class="sy">,</span><span class="h"> </span><span class="v">$oy</span><span class="sy">,</span><span class="h"> </span><span class="cn">0</span><span class="sy">,</span><span class="h"> </span><span class="cn">0</span><span class="sy">,</span><span class="h"> </span><span class="v">$sx</span><span class="sy">,</span><span class="h"> </span><span class="v">$sy</span><span class="sy">)</span><span class="sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-226"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="e">imagedestroy</span><span class="sy">(</span><span class="v">$this</span><span class="o">-</span><span class="o">&amp;</span><span class="i">gt</span><span class="sy">;</span><span class="i">_handle</span><span class="sy">)</span><span class="sy">;</span></div><div class="crayon-line" id="crayon-53abc34da41c2-227"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="v">$this</span><span class="o">-</span><span class="o">&amp;</span><span class="i">gt</span><span class="sy">;</span><span class="i">_handle</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">$dest</span><span class="sy">;</span><span class="h">&nbsp;&nbsp;</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-228">&nbsp;</div><div class="crayon-line" id="crayon-53abc34da41c2-229"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="k ">return</span><span class="h"> </span><span class="v">$this</span><span class="sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-230"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="sy">}</span><span class="h">&nbsp;&nbsp;</span></div><div class="crayon-line" id="crayon-53abc34da41c2-231">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-232"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c">/**</span></div><div class="crayon-line" id="crayon-53abc34da41c2-233"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * 在保持图像长宽比的情况下将图像裁减到指定大小</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-234"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; *</span></div><div class="crayon-line" id="crayon-53abc34da41c2-235"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * crop() 在缩放图像时，可以保持图像的长宽比，从而保证图像不会拉高或压扁。</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-236"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; *</span></div><div class="crayon-line" id="crayon-53abc34da41c2-237"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * crop() 默认情况下会按照 $width 和 $height 参数计算出最大缩放比例，</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-238"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * 保持裁减后的图像能够最大程度的充满图片。</span></div><div class="crayon-line" id="crayon-53abc34da41c2-239"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; *</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-240"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * 例如源图的大小是 800 x 600，而指定的 $width 和 $height 是 200 和 100。</span></div><div class="crayon-line" id="crayon-53abc34da41c2-241"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * 那么源图会被首先缩小为 200 x 150 尺寸，然后裁减掉多余的 50 像素高度。</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-242"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; *</span></div><div class="crayon-line" id="crayon-53abc34da41c2-243"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * 用法：</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-244"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * @code php</span></div><div class="crayon-line" id="crayon-53abc34da41c2-245"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * $image-&amp;gt;crop($width, $height);</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-246"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * @endcode</span></div><div class="crayon-line" id="crayon-53abc34da41c2-247"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; *</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-248"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * 如果希望最终生成图片始终包含完整图像内容，那么应该指定 $options 参数。</span></div><div class="crayon-line" id="crayon-53abc34da41c2-249"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * 该参数可用值有：</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-250"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; *</span></div><div class="crayon-line" id="crayon-53abc34da41c2-251"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * -&nbsp;&nbsp; fullimage: 是否保持完整图像</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-252"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * -&nbsp;&nbsp; pos: 缩放时的对齐方式</span></div><div class="crayon-line" id="crayon-53abc34da41c2-253"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * -&nbsp;&nbsp; bgcolor: 缩放时多余部分的背景色</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-254"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * -&nbsp;&nbsp; enlarge: 是否允许放大</span></div><div class="crayon-line" id="crayon-53abc34da41c2-255"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * -&nbsp;&nbsp; reduce: 是否允许缩小</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-256"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; *</span></div><div class="crayon-line" id="crayon-53abc34da41c2-257"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * 其中 $options['pos'] 参数的可用值有：</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-258"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; *</span></div><div class="crayon-line" id="crayon-53abc34da41c2-259"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * -&nbsp;&nbsp; left: 左对齐</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-260"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * -&nbsp;&nbsp; right: 右对齐</span></div><div class="crayon-line" id="crayon-53abc34da41c2-261"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * -&nbsp;&nbsp; center: 中心对齐</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-262"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * -&nbsp;&nbsp; top: 顶部对齐</span></div><div class="crayon-line" id="crayon-53abc34da41c2-263"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * -&nbsp;&nbsp; bottom: 底部对齐</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-264"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * -&nbsp;&nbsp; top-left, left-top: 左上角对齐</span></div><div class="crayon-line" id="crayon-53abc34da41c2-265"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * -&nbsp;&nbsp; top-right, right-top: 右上角对齐</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-266"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * -&nbsp;&nbsp; bottom-left, left-bottom: 左下角对齐</span></div><div class="crayon-line" id="crayon-53abc34da41c2-267"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * -&nbsp;&nbsp; bottom-right, right-bottom: 右下角对齐</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-268"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; *</span></div><div class="crayon-line" id="crayon-53abc34da41c2-269"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * 如果指定了无效的 $pos 参数，则等同于指定 center。</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-270"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; *</span></div><div class="crayon-line" id="crayon-53abc34da41c2-271"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * $options 中的每一个选项都可以单独指定，例如在允许裁减的情况下将图像放到新图片的右下角。</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-272"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; *</span></div><div class="crayon-line" id="crayon-53abc34da41c2-273"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * @code php</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-274"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * $image-&amp;gt;crop($width, $height, array('pos' =&amp;gt; 'right-bottom'));</span></div><div class="crayon-line" id="crayon-53abc34da41c2-275"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * @endcode</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-276"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; *</span></div><div class="crayon-line" id="crayon-53abc34da41c2-277"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * @param int $width 新的宽度</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-278"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * @param int $height 新的高度</span></div><div class="crayon-line" id="crayon-53abc34da41c2-279"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * @param array $options 裁减选项</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-280"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; *</span></div><div class="crayon-line" id="crayon-53abc34da41c2-281"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * @return Helper_ImageGD 返回 Helper_ImageGD 对象本身，实现连贯接口</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-282"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; */</span></div><div class="crayon-line" id="crayon-53abc34da41c2-283"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="t">function</span><span class="h"> </span><span class="e">crop</span><span class="sy">(</span><span class="v">$width</span><span class="sy">,</span><span class="h"> </span><span class="v">$height</span><span class="sy">,</span><span class="h"> </span><span class="v">$options</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="t">array</span><span class="sy">(</span><span class="sy">)</span><span class="sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-284"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="sy">{</span></div><div class="crayon-line" id="crayon-53abc34da41c2-285"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="e">is_null</span><span class="sy">(</span><span class="v">$this</span><span class="o">-</span><span class="o">&amp;</span><span class="i">gt</span><span class="sy">;</span><span class="i">_handle</span><span class="sy">)</span><span class="sy">)</span><span class="h"> </span><span class="k ">return</span><span class="h"> </span><span class="v">$this</span><span class="sy">;</span><span class="h">&nbsp;&nbsp;</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-286">&nbsp;</div><div class="crayon-line" id="crayon-53abc34da41c2-287"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="v">$default_options</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="t">array</span><span class="sy">(</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-288"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="s">'fullimage'</span><span class="h"> </span><span class="o">=&amp;</span><span class="i">gt</span><span class="sy">;</span><span class="h"> </span><span class="t">false</span><span class="sy">,</span></div><div class="crayon-line" id="crayon-53abc34da41c2-289"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="s">'pos'</span><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="o">=&amp;</span><span class="i">gt</span><span class="sy">;</span><span class="h"> </span><span class="s">'center'</span><span class="sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-290"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="s">'bgcolor'</span><span class="h">&nbsp;&nbsp; </span><span class="o">=&amp;</span><span class="i">gt</span><span class="sy">;</span><span class="h"> </span><span class="s">'0xfff'</span><span class="sy">,</span></div><div class="crayon-line" id="crayon-53abc34da41c2-291"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="s">'enlarge'</span><span class="h">&nbsp;&nbsp; </span><span class="o">=&amp;</span><span class="i">gt</span><span class="sy">;</span><span class="h"> </span><span class="t">false</span><span class="sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-292"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="s">'reduce'</span><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="o">=&amp;</span><span class="i">gt</span><span class="sy">;</span><span class="h"> </span><span class="t">true</span><span class="sy">,</span></div><div class="crayon-line" id="crayon-53abc34da41c2-293"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="sy">)</span><span class="sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-294"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="v">$options</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e">array_merge</span><span class="sy">(</span><span class="v">$default_options</span><span class="sy">,</span><span class="h"> </span><span class="v">$options</span><span class="sy">)</span><span class="sy">;</span><span class="h">&nbsp;&nbsp;</span></div><div class="crayon-line" id="crayon-53abc34da41c2-295">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-296"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c">// 创建目标图像</span></div><div class="crayon-line" id="crayon-53abc34da41c2-297"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="v">$dest</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e">imagecreatetruecolor</span><span class="sy">(</span><span class="v">$width</span><span class="sy">,</span><span class="h"> </span><span class="v">$height</span><span class="sy">)</span><span class="sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-298"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c">// 填充背景色</span></div><div class="crayon-line" id="crayon-53abc34da41c2-299"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="k ">list</span><span class="h"> </span><span class="sy">(</span><span class="v">$r</span><span class="sy">,</span><span class="h"> </span><span class="v">$g</span><span class="sy">,</span><span class="h"> </span><span class="v">$b</span><span class="sy">)</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e">Helper_Image::</span><span class="e">hex2rgb</span><span class="sy">(</span><span class="v">$options</span><span class="sy">[</span><span class="s">'bgcolor'</span><span class="sy">]</span><span class="sy">,</span><span class="h"> </span><span class="s">'0xffffff'</span><span class="sy">)</span><span class="sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-300"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="v">$bgcolor</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e">imagecolorallocate</span><span class="sy">(</span><span class="v">$dest</span><span class="sy">,</span><span class="h"> </span><span class="v">$r</span><span class="sy">,</span><span class="h"> </span><span class="v">$g</span><span class="sy">,</span><span class="h"> </span><span class="v">$b</span><span class="sy">)</span><span class="sy">;</span></div><div class="crayon-line" id="crayon-53abc34da41c2-301"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="e">imagefilledrectangle</span><span class="sy">(</span><span class="v">$dest</span><span class="sy">,</span><span class="h"> </span><span class="cn">0</span><span class="sy">,</span><span class="h"> </span><span class="cn">0</span><span class="sy">,</span><span class="h"> </span><span class="v">$width</span><span class="sy">,</span><span class="h"> </span><span class="v">$height</span><span class="sy">,</span><span class="h"> </span><span class="v">$bgcolor</span><span class="sy">)</span><span class="sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-302"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="e">imagecolordeallocate</span><span class="sy">(</span><span class="v">$dest</span><span class="sy">,</span><span class="h"> </span><span class="v">$bgcolor</span><span class="sy">)</span><span class="sy">;</span><span class="h">&nbsp;&nbsp;</span></div><div class="crayon-line" id="crayon-53abc34da41c2-303">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-304"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c">// 根据源图计算长宽比</span></div><div class="crayon-line" id="crayon-53abc34da41c2-305"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="v">$full_w</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e">imagesx</span><span class="sy">(</span><span class="v">$this</span><span class="o">-</span><span class="o">&amp;</span><span class="i">gt</span><span class="sy">;</span><span class="i">_handle</span><span class="sy">)</span><span class="sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-306"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="v">$full_h</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e">imagesy</span><span class="sy">(</span><span class="v">$this</span><span class="o">-</span><span class="o">&amp;</span><span class="i">gt</span><span class="sy">;</span><span class="i">_handle</span><span class="sy">)</span><span class="sy">;</span></div><div class="crayon-line" id="crayon-53abc34da41c2-307"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="v">$ratio_w</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e">doubleval</span><span class="sy">(</span><span class="v">$width</span><span class="sy">)</span><span class="h"> </span><span class="o">/</span><span class="h"> </span><span class="e">doubleval</span><span class="sy">(</span><span class="v">$full_w</span><span class="sy">)</span><span class="sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-308"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="v">$ratio_h</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="e">doubleval</span><span class="sy">(</span><span class="v">$height</span><span class="sy">)</span><span class="h"> </span><span class="o">/</span><span class="h"> </span><span class="e">doubleval</span><span class="sy">(</span><span class="v">$full_h</span><span class="sy">)</span><span class="sy">;</span><span class="h">&nbsp;&nbsp;</span></div><div class="crayon-line" id="crayon-53abc34da41c2-309">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-310"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="v">$options</span><span class="sy">[</span><span class="s">'fullimage'</span><span class="sy">]</span><span class="sy">)</span></div><div class="crayon-line" id="crayon-53abc34da41c2-311"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-312"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c">// 如果要保持完整图像，则选择最小的比率</span></div><div class="crayon-line" id="crayon-53abc34da41c2-313"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="v">$ratio</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">$ratio_w</span><span class="h"> </span><span class="o">&amp;</span><span class="i">lt</span><span class="sy">;</span><span class="h"> </span><span class="v">$ratio_h</span><span class="h"> </span><span class="sy">?</span><span class="h"> </span><span class="v">$ratio_w</span><span class="h"> </span><span class="o">:</span><span class="h"> </span><span class="v">$ratio_h</span><span class="sy">;</span><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="sy">}</span><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="st">else</span><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="sy">{</span><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="c">// 否则选择最大的比率&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $ratio = $ratio_w &amp;gt; $ratio_h ? $ratio_w : $ratio_h;</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-314"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="sy">}</span><span class="h">&nbsp;&nbsp;</span></div><div class="crayon-line" id="crayon-53abc34da41c2-315">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-316"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="o">!</span><span class="v">$options</span><span class="sy">[</span><span class="s">'enlarge'</span><span class="sy">]</span><span class="h"> </span><span class="o">&amp;</span><span class="i">amp</span><span class="sy">;</span><span class="o">&amp;</span><span class="i">amp</span><span class="sy">;</span><span class="h"> </span><span class="v">$ratio</span><span class="h"> </span><span class="o">&amp;</span><span class="i">gt</span><span class="sy">;</span><span class="h"> </span><span class="cn">1</span><span class="sy">)</span><span class="h"> </span><span class="v">$ratio</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">1</span><span class="sy">;</span></div><div class="crayon-line" id="crayon-53abc34da41c2-317"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="o">!</span><span class="v">$options</span><span class="sy">[</span><span class="s">'reduce'</span><span class="sy">]</span><span class="h"> </span><span class="o">&amp;</span><span class="i">amp</span><span class="sy">;</span><span class="o">&amp;</span><span class="i">amp</span><span class="sy">;</span><span class="h"> </span><span class="v">$ratio</span><span class="h"> </span><span class="o">&amp;</span><span class="i">lt</span><span class="sy">;</span><span class="h"> </span><span class="cn">1</span><span class="sy">)</span><span class="h"> </span><span class="v">$ratio</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">1</span><span class="sy">;</span><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="c">// 计算目标区域的宽高、位置&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $dst_w = $full_w * $ratio;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $dst_h = $full_h * $ratio;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // 根据 pos 属性来决定如何定位&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; switch (strtolower($options['pos']))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; case 'left':&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $dst_x = 0;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $dst_y = ($height - $dst_h) / 2;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; break;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; case 'right':&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $dst_x = $width - $dst_w;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $dst_y = ($height - $dst_h) / 2;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; break;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; case 'top':&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $dst_x = ($width - $dst_w) / 2;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $dst_y = 0;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; break;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; case 'bottom':&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $dst_x = ($width - $dst_w) / 2;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $dst_y = $height - $dst_h;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; break;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; case 'top-left':&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; case 'left-top':&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $dst_x = $dst_y = 0;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; break;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; case 'top-right':&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; case 'right-top':&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $dst_x = $width - $dst_w;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $dst_y = 0;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; break;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; case 'bottom-left':&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; case 'left-bottom':&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $dst_x = 0;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $dst_y = $height - $dst_h;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; break;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; case 'bottom-right':&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; case 'right-bottom':&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $dst_x = $width - $dst_w;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $dst_y = $height - $dst_h;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; break;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; case 'center':&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; default:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $dst_x = ($width - $dst_w) / 2;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $dst_y = ($height - $dst_h) / 2;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; imagecopyresampled($dest,&nbsp;&nbsp;$this-&amp;gt;_handle, $dst_x, $dst_y, 0, 0, $dst_w, $dst_h, $full_w, $full_h);</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-318"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="e">imagedestroy</span><span class="sy">(</span><span class="v">$this</span><span class="o">-</span><span class="o">&amp;</span><span class="i">gt</span><span class="sy">;</span><span class="i">_handle</span><span class="sy">)</span><span class="sy">;</span></div><div class="crayon-line" id="crayon-53abc34da41c2-319"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="v">$this</span><span class="o">-</span><span class="o">&amp;</span><span class="i">gt</span><span class="sy">;</span><span class="i">_handle</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="v">$dest</span><span class="sy">;</span><span class="h">&nbsp;&nbsp;</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-320">&nbsp;</div><div class="crayon-line" id="crayon-53abc34da41c2-321"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="k ">return</span><span class="h"> </span><span class="v">$this</span><span class="sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-322"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="sy">}</span><span class="h">&nbsp;&nbsp;</span></div><div class="crayon-line" id="crayon-53abc34da41c2-323">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-324"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c">/**</span></div><div class="crayon-line" id="crayon-53abc34da41c2-325"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * 保存为 JPEG 文件</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-326"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; *</span></div><div class="crayon-line" id="crayon-53abc34da41c2-327"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * @param string $filename 保存文件名</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-328"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * @param int $quality 品质参数，默认为 80</span></div><div class="crayon-line" id="crayon-53abc34da41c2-329"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; *</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-330"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * @return Helper_ImageGD 返回 Helper_ImageGD 对象本身，实现连贯接口</span></div><div class="crayon-line" id="crayon-53abc34da41c2-331"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; */</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-332"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="t">function</span><span class="h"> </span><span class="e">saveAsJpeg</span><span class="sy">(</span><span class="v">$filename</span><span class="sy">,</span><span class="h"> </span><span class="v">$quality</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="cn">80</span><span class="sy">)</span></div><div class="crayon-line" id="crayon-53abc34da41c2-333"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-334"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="e">imagejpeg</span><span class="sy">(</span><span class="v">$this</span><span class="o">-</span><span class="o">&amp;</span><span class="i">gt</span><span class="sy">;</span><span class="i">_handle</span><span class="sy">,</span><span class="h"> </span><span class="v">$filename</span><span class="sy">,</span><span class="h"> </span><span class="v">$quality</span><span class="sy">)</span><span class="sy">;</span></div><div class="crayon-line" id="crayon-53abc34da41c2-335"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-336"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c">/**</span></div><div class="crayon-line" id="crayon-53abc34da41c2-337"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * 保存为 PNG 文件</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-338"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; *</span></div><div class="crayon-line" id="crayon-53abc34da41c2-339"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * @param string $filename 保存文件名</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-340"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; *</span></div><div class="crayon-line" id="crayon-53abc34da41c2-341"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * @return Helper_ImageGD 返回 Helper_ImageGD 对象本身，实现连贯接口</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-342"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; */</span></div><div class="crayon-line" id="crayon-53abc34da41c2-343"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="t">function</span><span class="h"> </span><span class="e">saveAsPng</span><span class="sy">(</span><span class="v">$filename</span><span class="sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-344"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="sy">{</span></div><div class="crayon-line" id="crayon-53abc34da41c2-345"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="e">imagepng</span><span class="sy">(</span><span class="v">$this</span><span class="o">-</span><span class="o">&amp;</span><span class="i">gt</span><span class="sy">;</span><span class="i">_handle</span><span class="sy">,</span><span class="h"> </span><span class="v">$filename</span><span class="sy">)</span><span class="sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-346"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="sy">}</span><span class="h">&nbsp;&nbsp;</span></div><div class="crayon-line" id="crayon-53abc34da41c2-347">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-348"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c">/**</span></div><div class="crayon-line" id="crayon-53abc34da41c2-349"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * 保存为 GIF 文件</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-350"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; *</span></div><div class="crayon-line" id="crayon-53abc34da41c2-351"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * @param string $filename 保存文件名</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-352"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; *</span></div><div class="crayon-line" id="crayon-53abc34da41c2-353"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * @return Helper_ImageGD 返回 Helper_ImageGD 对象本身，实现连贯接口</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-354"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; */</span></div><div class="crayon-line" id="crayon-53abc34da41c2-355"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="t">function</span><span class="h"> </span><span class="e">saveAsGif</span><span class="sy">(</span><span class="v">$filename</span><span class="sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-356"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="sy">{</span></div><div class="crayon-line" id="crayon-53abc34da41c2-357"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="e">imagegif</span><span class="sy">(</span><span class="v">$this</span><span class="o">-</span><span class="o">&amp;</span><span class="i">gt</span><span class="sy">;</span><span class="i">_handle</span><span class="sy">,</span><span class="h"> </span><span class="v">$filename</span><span class="sy">)</span><span class="sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-358"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="sy">}</span><span class="h">&nbsp;&nbsp;</span></div><div class="crayon-line" id="crayon-53abc34da41c2-359">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-360"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c">/**</span></div><div class="crayon-line" id="crayon-53abc34da41c2-361"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * 销毁内存中的图像</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-362"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; *</span></div><div class="crayon-line" id="crayon-53abc34da41c2-363"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; * @return Helper_ImageGD 返回 Helper_ImageGD 对象本身，实现连贯接口</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-364"><span class="c">&nbsp;&nbsp;&nbsp;&nbsp; */</span></div><div class="crayon-line" id="crayon-53abc34da41c2-365"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="t">function</span><span class="h"> </span><span class="e">destroy</span><span class="sy">(</span><span class="sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-366"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="sy">{</span></div><div class="crayon-line" id="crayon-53abc34da41c2-367"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="st">if</span><span class="h"> </span><span class="sy">(</span><span class="o">!</span><span class="v">$this</span><span class="o">-</span><span class="o">&amp;</span><span class="i">gt</span><span class="sy">;</span><span class="i">_handle</span><span class="sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-368"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="sy">{</span></div><div class="crayon-line" id="crayon-53abc34da41c2-369"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="sy">@</span><span class="e">imagedestroy</span><span class="sy">(</span><span class="v">$this</span><span class="o">-</span><span class="o">&amp;</span><span class="i">gt</span><span class="sy">;</span><span class="i">_handle</span><span class="sy">)</span><span class="sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-370"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="sy">}</span></div><div class="crayon-line" id="crayon-53abc34da41c2-371"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="v">$this</span><span class="o">-</span><span class="o">&amp;</span><span class="i">gt</span><span class="sy">;</span><span class="i">_handle</span><span class="h"> </span><span class="o">=</span><span class="h"> </span><span class="t">null</span><span class="sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-372"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="k ">return</span><span class="h"> </span><span class="v">$this</span><span class="sy">;</span></div><div class="crayon-line" id="crayon-53abc34da41c2-373"><span class="h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-53abc34da41c2-374"><span class="sy">}</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.2000 seconds] -->
<p>本文链接：<a title="php生成缩略图类" href="http://www.521php.com/archives/293/" target="_blank">http://www.521php.com/archives/293/</a></p>
                        <p style="color:#17750A;"><b>程序本天成，妙手偶得之！</b></p>
                         <p>转载请注明：<a href="http://www.521php.com/archives/293/" title="php生成缩略图类" target="_blank">http://www.521php.com/archives/293/</a></p>
                        </div>
                  </div><!--toolBar-->
                    <div class="toolBar toolBarTwo">
                    	<UL>
                            <li class="mrinc2 tags2">Tags:<a href="http://www.521php.com/archives/tag/php/" rel="tag">php</a>,<a href="http://www.521php.com/archives/tag/hanshu/" rel="tag">函数</a>,<a href="http://www.521php.com/archives/tag/imagemake/" rel="tag">图片处理</a></li>
                            <LI class="mrinc2 share_r" onmouseover=share_more(293,this);><A href="javascript:;">分享到...</A> </LI>
                        </UL>
                    </div>
                    <SCRIPT>postArray[293]=[];postArray[293][0]="php生成缩略图类";postArray[293][1]="http://www.521php.com/archives/293/";postArray[293][2]="";postArray[293][3]="http://www.521php.com/wp-content/themes/zeke/img/default.gif";</SCRIPT>
           		</div>
                <div class="content_t_bot"><!--样式尾部--></div>
                </div>
            <div class="navigation">
				<p class="navNew"><a href="http://www.521php.com/archives/297/" rel="next">不能有一丝的懈怠</a></p>
				<p class="navOld"><a href="http://www.521php.com/archives/279/" rel="prev">PHP 爬虫记录</a></p>
	    </div>
           
           <div class="content_text">
               <div class="content_t_top"></div>
               <div class="content_t_main"> <div class="ujian-hook"></div></div>
	       <div class="content_t_bot"><!--样式尾部--></div>
	   </div>
	   <div class="content_text">
               <div class="content_t_top"></div>
               <div class="content_t_main">
               <div class="xgwz">
	       <div>相关文章</div>
			<li><span class="xtitle"><a href="http://www.521php.com/archives/1166/" rel="bookmark" title="织梦内置标签小优化之一——arclist标签优化">织梦内置标签小优化之一——arclist标签优化</a></span> <span class="xtag">2013-03-29 <a href="http://www.521php.com/archives/category/gongneng/" title="查看 小功能 中的全部文章" rel="category tag">小功能</a>/<a href="http://www.521php.com/archives/category/zong/" title="查看 总结 中的全部文章" rel="category tag">总结</a>/<a href="http://www.521php.com/archives/category/lovephp/" title="查看 我爱PHP 中的全部文章" rel="category tag">我爱PHP</a>/<a href="http://www.521php.com/archives/category/tj/" title="查看 推荐文章 中的全部文章" rel="category tag">推荐文章</a></span></li>
<li><span class="xtitle"><a href="http://www.521php.com/archives/1722/" rel="bookmark" title="MySql避免全表扫描">MySql避免全表扫描</a></span> <span class="xtag">2014-05-09 <a href="http://www.521php.com/archives/category/zong/" title="查看 总结 中的全部文章" rel="category tag">总结</a>/<a href="http://www.521php.com/archives/category/lovephp/" title="查看 我爱PHP 中的全部文章" rel="category tag">我爱PHP</a>/<a href="http://www.521php.com/archives/category/tj/" title="查看 推荐文章 中的全部文章" rel="category tag">推荐文章</a></span></li>
<li><span class="xtitle"><a href="http://www.521php.com/archives/844/" rel="bookmark" title="php curl函数库">php curl函数库</a></span> <span class="xtag">2012-12-07 <a href="http://www.521php.com/archives/category/team/" title="查看 博采众长 中的全部文章" rel="category tag">博采众长</a>/<a href="http://www.521php.com/archives/category/lovephp/" title="查看 我爱PHP 中的全部文章" rel="category tag">我爱PHP</a></span></li>
<li><span class="xtitle"><a href="http://www.521php.com/archives/163/" rel="bookmark" title="php正则修改配置文件">php正则修改配置文件</a></span> <span class="xtag">2012-07-06 <a href="http://www.521php.com/archives/category/lovephp/" title="查看 我爱PHP 中的全部文章" rel="category tag">我爱PHP</a></span></li>
<li><span class="xtitle"><a href="http://www.521php.com/archives/913/" rel="bookmark" title="本站百度和谷歌一起搜接口！(推荐)">本站百度和谷歌一起搜接口！(推荐)</a></span> <span class="xtag">2012-12-25 <a href="http://www.521php.com/archives/category/gongneng/" title="查看 小功能 中的全部文章" rel="category tag">小功能</a>/<a href="http://www.521php.com/archives/category/lovephp/" title="查看 我爱PHP 中的全部文章" rel="category tag">我爱PHP</a>/<a href="http://www.521php.com/archives/category/tj/" title="查看 推荐文章 中的全部文章" rel="category tag">推荐文章</a></span></li>
<li><span class="xtitle"><a href="http://www.521php.com/archives/487/" rel="bookmark" title="php图片批量缩放类可以指定多级目录">php图片批量缩放类可以指定多级目录</a></span> <span class="xtag">2012-09-17 <a href="http://www.521php.com/archives/category/team/" title="查看 博采众长 中的全部文章" rel="category tag">博采众长</a>/<a href="http://www.521php.com/archives/category/gongneng/" title="查看 小功能 中的全部文章" rel="category tag">小功能</a>/<a href="http://www.521php.com/archives/category/lovephp/" title="查看 我爱PHP 中的全部文章" rel="category tag">我爱PHP</a>/<a href="http://www.521php.com/archives/category/tj/" title="查看 推荐文章 中的全部文章" rel="category tag">推荐文章</a></span></li>
<li><span class="xtitle"><a href="http://www.521php.com/archives/371/" rel="bookmark" title="如何写自己的php技术博客">如何写自己的php技术博客</a></span> <span class="xtag">2012-08-31 <a href="http://www.521php.com/archives/category/zong/" title="查看 总结 中的全部文章" rel="category tag">总结</a></span></li>
<li><span class="xtitle"><a href="http://www.521php.com/archives/268/" rel="bookmark" title="关于flush()和ob_flush()">关于flush()和ob_flush()</a></span> <span class="xtag">2012-07-30 <a href="http://www.521php.com/archives/category/team/" title="查看 博采众长 中的全部文章" rel="category tag">博采众长</a>/<a href="http://www.521php.com/archives/category/lovephp/" title="查看 我爱PHP 中的全部文章" rel="category tag">我爱PHP</a></span></li>
<li><span class="xtitle"><a href="http://www.521php.com/archives/347/" rel="bookmark" title="php的MVC、面向对象模式的理解">php的MVC、面向对象模式的理解</a></span> <span class="xtag">2012-08-24 <a href="http://www.521php.com/archives/category/lovephp/" title="查看 我爱PHP 中的全部文章" rel="category tag">我爱PHP</a></span></li>
<li><span class="xtitle"><a href="http://www.521php.com/archives/230/" rel="bookmark" title="Php中一些好用的函数（二）">Php中一些好用的函数（二）</a></span> <span class="xtag">2012-07-14 <a href="http://www.521php.com/archives/category/team/" title="查看 博采众长 中的全部文章" rel="category tag">博采众长</a>/<a href="http://www.521php.com/archives/category/lovephp/" title="查看 我爱PHP 中的全部文章" rel="category tag">我爱PHP</a></span></li>
</div>
           <div class="content_t_bot"></div>
	   </div>
<!-- You can start editing here. -->
<div id="comment_body">
			<!-- If comments are open, but there are no comments. -->
	 		</div>
<div class="navigation_comments">
		<div class="pagination"></div>
</div>
  <div id="respond">
            	<div class="excerpt_top"></div>
                <div class="excerpt_main">
<h3 class="givetext">发表评论</h3>
<div class="cancel-comment-reply">
		<!--<div id="real-avatar">
			<img alt='' src='http://0.gravatar.com/avatar/?d=http://www.521php.com/wp-content/themes/zeke/MRimg/gravatar.png&amp;s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />	</div>-->
			<small><a rel="nofollow" id="cancel-comment-reply-link" href="/archives/293/#respond" style="display:none;">点击这里取消回复。</a></small>
		</div>
<form action="http://www.521php.com/wp-comments-post.php" method="post" id="commentform">
<div class="form_box">
<div class="form_infobody">
 	<div id="comment-author-info" class="form_info">
		<div class="author">昵称：<input type="text" class="textfield" name="author" id="author" tabindex="1" value=""></div>
        <p style="height:15px"></p>
		<div class="email">邮箱：<input type="text" class="textfield" name="email" id="email" tabindex="2" value=""></div>
        <p style="height:15px"></p>
		<div class="url">网址：<input type="text" class="textfield" name="url" id="url" tabindex="3" value=""></div>
    </div>
</div>
    <div class="form_text"><textarea name="comment" id="comment" class="textarea"  tabindex="4"  onfocus="if (this.value == 'Make Comments on this Article') {this.value = '';}" onblur="if (this.value == '') {this.value = 'Make Comments on this Article';}">Make Comments on this Article</textarea></div>
</div>
<p></p>
<div class="ajax_box" id="comment_jstext">eg.博客主题调用的是Gravatar头像,你可以通过邮箱注册获得头像.</div>
<div class="form_btn">
<div class="submit_box"><div class="aLeft"><input class="submit" name="submit" type="submit" id="submit" tabindex="5" value="提交留言"><input class="reset" name="reset" type="reset" id="reset" tabindex="6" value="重写"></div><div class="aRight"><input type="checkbox" name="comment_mail_notify" id="comment_mail_notify" value="comment_mail_notify" checked="checked" style="margin-left:0px;" /><label for="comment_mail_notify" style="display: inline;">有人回复时邮件通知我</label> / 快捷键：Ctrl+Enter</label><input type='hidden' name='comment_post_ID' value='293' id='comment_post_ID' />
<input type='hidden' name='comment_parent' id='comment_parent' value='0' />
</div></div>
</div>
<script type="text/javascript">	//Crel+Enter
			$(document).keypress(function(e){
				if(e.ctrlKey && e.which == 13 || e.which == 10) { 
					$(".submit").click();
					document.body.focus();
				} else if (e.shiftKey && e.which==13 || e.which == 10) {
					$(".submit").click();
				}          
			})
		</script>
</form>
                </div>
                <div class="excerpt_bot"></div>
            </div>
</div>
        </div>
        <div id="sidebar">
			<!--自我介绍-->
			<div class="sidebar_body">
           	  <div class="sidebar_b_top"><!--样式头部--></div>
                <div class="sidebar_b_main">
                	<div class="sid_ify">
                    	<div class="sid_ify_bg">
                            <H3>本站公告</H3>
                        </div>
                    </div>
                    <div class="sid_body"><div><img src="http://www.521php.com/wp-content/themes/zeke/fly.gif" width="200" height="180" /></div>
					<p style="text-align:left; font-size:12px;">程序本天成，妙手偶得之！
<br />趣赔集团刚成立，如果您想投资可直接转入支付宝，和我联系<br /><script>document.write('<a href="http://www.521php.com/payme/" target="_blank"><img src="/wp-content/themes/zeke/btn-index.png" height="40" /></a>');</script> <img src="/wp-content/themes/zeke/gx.gif" height="40" />			
					</p>
                    </div>
                </div>
                <div class="sidebar_b_bot"><!--样式尾部--></div>
            </div>
			<!--日志分类-->

        	<div class="sidebar_body">
           	  <div class="sidebar_b_top"><!--样式头部--></div>
                <div class="sidebar_b_main">
                	<div class="sid_ify">
                    	<div class="sid_ify_bg">
                            <H3>文章分类</H3>
                        </div>
                    </div>
                    <div class="sid_body">
                    	<ul class="sid_lm">
                        		<li class="cat-item cat-item-61"><a href="http://www.521php.com/archives/category/linux/" title="linux服务器">Linux</a> (16)
</li>
	<li class="cat-item cat-item-15"><a href="http://www.521php.com/archives/category/wordpress/" title="在其位，谋其政！">WordPress</a> (8)
</li>
	<li class="cat-item cat-item-41"><a href="http://www.521php.com/archives/category/team/" title="取长补短，好的学习习惯可以让我们少走很多弯路！">博采众长</a> (67)
</li>
	<li class="cat-item cat-item-71"><a href="http://www.521php.com/archives/category/safe/" title="查看 安全 下的所有文章">安全</a> (7)
</li>
	<li class="cat-item cat-item-52"><a href="http://www.521php.com/archives/category/gongneng/" title="查看 小功能 下的所有文章">小功能</a> (55)
</li>
	<li class="cat-item cat-item-12"><a href="http://www.521php.com/archives/category/zong/" title="合理的总结我们的工作，工作就是学习！">总结</a> (60)
</li>
	<li class="cat-item cat-item-10"><a href="http://www.521php.com/archives/category/lovephp/" title="我们共同的php技术博客！总结php知识，交流php编程心得！">我爱PHP</a> (126)
</li>
	<li class="cat-item cat-item-70"><a href="http://www.521php.com/archives/category/tj/" title="查看 推荐文章 下的所有文章">推荐文章</a> (71)
</li>
	<li class="cat-item cat-item-46"><a href="http://www.521php.com/archives/category/else/" title="读书心得，视频感悟，社会舆论，杂七杂八">杂谈</a> (31)
</li>
	<li class="cat-item cat-item-4"><a href="http://www.521php.com/archives/category/cclog/" title="我们不知道人生到底有多长，但是我知道当我们回首看这些的时候一定会深深的感动！">随笔</a> (32)
</li>
                        </ul>
                    </div>
                </div>
                <div class="sidebar_b_bot"><!--样式尾部--></div>
            </div>

	    			<div class="sidebar_body">
           	  <div class="sidebar_b_top"><!--样式头部--></div>
                <div class="sidebar_b_main">
                	<div class="sid_ify">
                    	<div class="sid_ify_bg">
                            <H3><a href="/tg/" title="进入本站推广">进入本站推广</a></H3>
                        </div>
                    </div>
                    <div class="sid_body" align="center">
<iframe name="alimamaifrm" frameborder="0" marginheight="0" marginwidth="0" border="0" scrolling="no" width="210" height="200" src="http://www.taobao.com/go/app/tbk_app/chongzhi_210_200.php?pid=mm_30958902_3426892_13314114&page=chongzhi_210_200.php&size_w=210&size_h=200&stru_phone=1&stru_game=1&stru_travel=1" ></iframe>
                    </div>
                </div>
                <div class="sidebar_b_bot"><!--样式尾部--></div>
            </div>
<!--本站接口-->
            <div class="sidebar_body">
           	  <div class="sidebar_b_top"><!--样式头部--></div>
                <div class="sidebar_b_main">
                	<div class="sid_ify">
                    	<div class="sid_ify_bg">
                            <H3>本站接口</H3>
                        </div>
                    </div>
                    <div class="sid_body">
                    	<ul class="sid_link_text">
                        <li><a href="http://www.521php.com/api/pinyin.php" title="php将中文转化为拼音接口" target="_blank">php将中文转化为拼音接口</a></li>
<li><a href="http://www.521php.com/api/ip.php" title="php获取ip归属地接口" target="_blank">php获取ip归属地接口</a></li>
<li><a href="http://www.521php.com/archives/913/" title="百度谷歌一起搜接口" target="_blank">百度谷歌一起搜接口</a></li>
<li><a href="http://www.521php.com/api/qr/" title="二维码在线生成工具" target="_blank">二维码在线生成工具</a></li>
<li><a href="http://www.521php.com/api/fenci/" title="php智能分词功能" target="_blank">php智能分词功能</a></li>
<li><a href="http://www.521php.com/api/fav/" title="获取指定网站favicon.ico图标接口" target="_blank">获取指定网站favicon.ico图标接口</a></li>
<li><a href="http://www.521php.com/api/pr/" title="权重,pr,alexa及收录情况查询接口" target="_blank">权重,pr,alexa及收录情况查询接口</a></li>
<li><a href="http://www.521php.com/api/sl/" title="php扫雷小游戏" target="_blank">php扫雷小游戏</a></li>
                      </ul>
                    </div>
                </div>
                <div class="sidebar_b_bot"><!--样式尾部--></div>
            </div>
            <!--本站接口-->
            <!--博客归档OR最新文章OR随机日志-->
            <div class="sidebar_body">
           	  <div class="sidebar_b_top"><!--样式头部--></div>
                <div class="sidebar_b_main">
                	<div class="sid_ify">
                    	<div class="sid_ify_bg">
                            <H3><a href="/archives/category/tj/" title="推荐文章">推荐文章</a></H3>
                        </div>
                    </div>
                    <div class="sid_body">
                    	<ul class="sid_Archives sid_link_text">
<li><a href="http://www.521php.com/archives/1253/" title="外链自助上线了" rel="bookmark">
外链自助上线了</a></li>
<li><a href="http://www.521php.com/archives/996/" title="php捕捉各大搜索引擎的蜘蛛、爬虫记录" rel="bookmark">
php捕捉各大搜索引擎的蜘蛛、爬虫记录</a></li>
<li><a href="http://www.521php.com/archives/1365/" title="可逆的php字符加密算法" rel="bookmark">
可逆的php字符加密算法</a></li>
<li><a href="http://www.521php.com/archives/1728/" title="转-技术人员如何参与产品设计讨论：激活那一潭死水" rel="bookmark">
转-技术人员如何参与产品设计讨论：激活那一潭死水</a></li>
<li><a href="http://www.521php.com/archives/913/" title="本站百度和谷歌一起搜接口！(推荐)" rel="bookmark">
本站百度和谷歌一起搜接口！(推荐)</a></li>
<li><a href="http://www.521php.com/archives/1369/" title="php 自定义json_encode和json_decode函数" rel="bookmark">
php 自定义json_encode和json_decode函数</a></li>
<li><a href="http://www.521php.com/archives/682/" title="导医系统开发总结之自己的编程心得" rel="bookmark">
导医系统开发总结之自己的编程心得</a></li>
<li><a href="http://www.521php.com/archives/1203/" title="纯php代码实现伪静态的方法" rel="bookmark">
纯php代码实现伪静态的方法</a></li>
<li><a href="http://www.521php.com/archives/1187/" title="织梦内置标签小优化之四—dede:channelartlist标签" rel="bookmark">
织梦内置标签小优化之四—dede:channelartlist标签</a></li>
<li><a href="http://www.521php.com/archives/1172/" title="织梦内置标签小优化之二——dede:channel标签优化" rel="bookmark">
织梦内置标签小优化之二——dede:channel标签优化</a></li>
</ul>
                    </div>
                </div>
                <div class="sidebar_b_bot"><!--样式尾部--></div>
            </div>
			<div class="sidebar_body">
           	  <div class="sidebar_b_top"><!--样式头部--></div>
                <div class="sidebar_b_main">
                	<div class="sid_ify">
                    	<div class="sid_ify_bg">
                            <H3><a href="/archives/category/lovephp/" title="技术心得">学习之所得</a></H3>
                        </div>
                    </div>
                    <div class="sid_body">
                    	<ul class="sid_Archives sid_link_text">
<li><a href="http://www.521php.com/archives/1746/" title="php批量去除指定目录的bom头" rel="bookmark">
php批量去除指定目录的bom头</a></li>
<li><a href="http://www.521php.com/archives/1739/" title="一键式虚拟主机搭建shell脚本" rel="bookmark">
一键式虚拟主机搭建shell脚本</a></li>
<li><a href="http://www.521php.com/archives/1735/" title="shell脚本做nginx日志分析工具" rel="bookmark">
shell脚本做nginx日志分析工具</a></li>
<li><a href="http://www.521php.com/archives/1722/" title="MySql避免全表扫描" rel="bookmark">
MySql避免全表扫描</a></li>
<li><a href="http://www.521php.com/archives/1716/" title="linux下nginx,php运行用户和ftp用户权限分配" rel="bookmark">
linux下nginx,php运行用户和ftp用户权限分配</a></li>
<li><a href="http://www.521php.com/archives/1708/" title="php的pcntl_fork多进程小解" rel="bookmark">
php的pcntl_fork多进程小解</a></li>
<li><a href="http://www.521php.com/archives/1703/" title="鸟枪换大炮了" rel="bookmark">
鸟枪换大炮了</a></li>
<li><a href="http://www.521php.com/archives/1697/" title="两种方式实现js，ajax的跨域" rel="bookmark">
两种方式实现js，ajax的跨域</a></li>
<li><a href="http://www.521php.com/archives/1694/" title="redis小解及centos下php-redis扩展安装" rel="bookmark">
redis小解及centos下php-redis扩展安装</a></li>
<li><a href="http://www.521php.com/archives/1691/" title="thrift接口框架小解" rel="bookmark">
thrift接口框架小解</a></li>
</ul>
                    </div>
                </div>
                <div class="sidebar_b_bot"><!--样式尾部--></div>
            </div>
			
		<div class="sidebar_body">
           	  <div class="sidebar_b_top"><!--样式头部--></div>
                <div class="sidebar_b_main">
                	<div class="sid_ify">
                    	<div class="sid_ify_bg">
                            <H3><a href="/archives/category/cclog/" title="日志">生活之所感</a></H3>
                        </div>
                    </div>
                    <div class="sid_body">
                    	<ul class="sid_Archives sid_link_text">
<li><a href="http://www.521php.com/archives/1662/" title="近期的一点小感悟" rel="bookmark">
近期的一点小感悟</a></li>
<li><a href="http://www.521php.com/archives/1654/" title="不误正业" rel="bookmark">
不误正业</a></li>
<li><a href="http://www.521php.com/archives/1650/" title="论我的电脑为什么比别人的活的相对长久" rel="bookmark">
论我的电脑为什么比别人的活的相对长久</a></li>
<li><a href="http://www.521php.com/archives/1639/" title="没有正确的标题，只有正确的人" rel="bookmark">
没有正确的标题，只有正确的人</a></li>
<li><a href="http://www.521php.com/archives/1295/" title="阶段性小总结20130525" rel="bookmark">
阶段性小总结20130525</a></li>
<li><a href="http://www.521php.com/archives/1044/" title="职场白领的“攻薪技”" rel="bookmark">
职场白领的“攻薪技”</a></li>
<li><a href="http://www.521php.com/archives/1014/" title="天空海阔，要做最坚强的泡沫" rel="bookmark">
天空海阔，要做最坚强的泡沫</a></li>
<li><a href="http://www.521php.com/archives/985/" title="致师弟师妹的一封信" rel="bookmark">
致师弟师妹的一封信</a></li>
<li><a href="http://www.521php.com/archives/905/" title="2012年12月22日总结" rel="bookmark">
2012年12月22日总结</a></li>
<li><a href="http://www.521php.com/archives/899/" title="我们到底欠缺了什么" rel="bookmark">
我们到底欠缺了什么</a></li>
</ul>
                    </div>
                </div>
                <div class="sidebar_b_bot"><!--样式尾部--></div>
            </div>
			<div class="sidebar_body">
           	  <div class="sidebar_b_top"><!--样式头部--></div>
                <div class="sidebar_b_main">
                	<div class="sid_ify">
                    	<div class="sid_ify_bg">
                            <H3><a href="/archives/category/else/" title="杂谈">杂七杂八</a></H3>
                        </div>
                    </div>
                    <div class="sid_body">
                    	<ul class="sid_Archives sid_link_text">
<li><a href="http://www.521php.com/archives/1728/" title="转-技术人员如何参与产品设计讨论：激活那一潭死水" rel="bookmark">
转-技术人员如何参与产品设计讨论：激活那一潭死水</a></li>
<li><a href="http://www.521php.com/archives/1654/" title="不误正业" rel="bookmark">
不误正业</a></li>
<li><a href="http://www.521php.com/archives/1650/" title="论我的电脑为什么比别人的活的相对长久" rel="bookmark">
论我的电脑为什么比别人的活的相对长久</a></li>
<li><a href="http://www.521php.com/archives/1384/" title="永远不要再犯的 5 个编程错误" rel="bookmark">
永远不要再犯的 5 个编程错误</a></li>
<li><a href="http://www.521php.com/archives/1381/" title="关于PHP的十大误解 你中了几个？" rel="bookmark">
关于PHP的十大误解 你中了几个？</a></li>
<li><a href="http://www.521php.com/archives/1270/" title="软件开发者的四大“看家本事”" rel="bookmark">
软件开发者的四大“看家本事”</a></li>
<li><a href="http://www.521php.com/archives/1263/" title="惹恼程序员的十件事" rel="bookmark">
惹恼程序员的十件事</a></li>
<li><a href="http://www.521php.com/archives/1260/" title="IT经验的七个总结" rel="bookmark">
IT经验的七个总结</a></li>
<li><a href="http://www.521php.com/archives/1057/" title="未来的八种人将被社会淘汰!" rel="bookmark">
未来的八种人将被社会淘汰!</a></li>
<li><a href="http://www.521php.com/archives/1044/" title="职场白领的“攻薪技”" rel="bookmark">
职场白领的“攻薪技”</a></li>
</ul>
                    </div>
                </div>
                <div class="sidebar_b_bot"><!--样式尾部--></div>
            </div>			
			 <!--调用标签云-->
			<div class="sidebar_body">
           	  <div class="sidebar_b_top"><!--样式头部--></div>
                <div class="sidebar_b_main">
                	<div class="sid_ify">
                    	<div class="sid_ify_bg">
                            <H3>标签云</H3>
                        </div>
                    </div>
<!--class="sid_body"-->
                    <div id="div1">
					<a href='http://www.521php.com/archives/tag/access/' class='tag-link-53' title='1 个话题' style='font-size: 12pt;'>access</a>
<a href='http://www.521php.com/archives/tag/ajax/' class='tag-link-57' title='7 个话题' style='font-size: 14.666666666667pt;'>ajax</a>
<a href='http://www.521php.com/archives/tag/apache/' class='tag-link-74' title='1 个话题' style='font-size: 12pt;'>apache</a>
<a href='http://www.521php.com/archives/tag/curl/' class='tag-link-63' title='1 个话题' style='font-size: 12pt;'>curl</a>
<a href='http://www.521php.com/archives/tag/dede/' class='tag-link-28' title='14 个话题' style='font-size: 15.911111111111pt;'>dede</a>
<a href='http://www.521php.com/archives/tag/discuz/' class='tag-link-64' title='1 个话题' style='font-size: 12pt;'>discuz</a>
<a href='http://www.521php.com/archives/tag/flash/' class='tag-link-59' title='1 个话题' style='font-size: 12pt;'>flash</a>
<a href='http://www.521php.com/archives/tag/gdku/' class='tag-link-32' title='2 个话题' style='font-size: 12.8pt;'>GD库</a>
<a href='http://www.521php.com/archives/tag/htaccess/' class='tag-link-69' title='1 个话题' style='font-size: 12pt;'>htaccess</a>
<a href='http://www.521php.com/archives/tag/jquery/' class='tag-link-55' title='1 个话题' style='font-size: 12pt;'>jquery</a>
<a href='http://www.521php.com/archives/tag/js/' class='tag-link-44' title='22 个话题' style='font-size: 16.711111111111pt;'>js</a>
<a href='http://www.521php.com/archives/tag/linux/' class='tag-link-61' title='17 个话题' style='font-size: 16.266666666667pt;'>Linux</a>
<a href='http://www.521php.com/archives/tag/mysql/' class='tag-link-79' title='2 个话题' style='font-size: 12.8pt;'>mysql</a>
<a href='http://www.521php.com/archives/tag/nginx/' class='tag-link-75' title='4 个话题' style='font-size: 13.777777777778pt;'>nginx</a>
<a href='http://www.521php.com/archives/tag/node/' class='tag-link-80' title='1 个话题' style='font-size: 12pt;'>node</a>
<a href='http://www.521php.com/archives/tag/php/' class='tag-link-3' title='125 个话题' style='font-size: 20pt;'>php</a>
<a href='http://www.521php.com/archives/tag/redis/' class='tag-link-77' title='2 个话题' style='font-size: 12.8pt;'>redis</a>
<a href='http://www.521php.com/archives/tag/shell/' class='tag-link-81' title='3 个话题' style='font-size: 13.333333333333pt;'>shell</a>
<a href='http://www.521php.com/archives/tag/sql/' class='tag-link-43' title='4 个话题' style='font-size: 13.777777777778pt;'>sql</a>
<a href='http://www.521php.com/archives/tag/thrift/' class='tag-link-76' title='1 个话题' style='font-size: 12pt;'>thrift</a>
<a href='http://www.521php.com/archives/tag/wordpress/' class='tag-link-15' title='12 个话题' style='font-size: 15.6pt;'>WordPress</a>
<a href='http://www.521php.com/archives/tag/wp-postviews/' class='tag-link-20' title='2 个话题' style='font-size: 12.8pt;'>WP-PostViews</a>
<a href='http://www.521php.com/archives/tag/zip/' class='tag-link-56' title='2 个话题' style='font-size: 12.8pt;'>zip</a>
<a href='http://www.521php.com/archives/tag/zookeeper/' class='tag-link-73' title='1 个话题' style='font-size: 12pt;'>zookeeper</a>
<a href='http://www.521php.com/archives/tag/blog/' class='tag-link-51' title='41 个话题' style='font-size: 17.866666666667pt;'>个人博客</a>
<a href='http://www.521php.com/archives/tag/youhua/' class='tag-link-45' title='20 个话题' style='font-size: 16.533333333333pt;'>优化</a>
<a href='http://www.521php.com/archives/tag/hanshu/' class='tag-link-34' title='30 个话题' style='font-size: 17.288888888889pt;'>函数</a>
<a href='http://www.521php.com/archives/tag/fenye/' class='tag-link-11' title='2 个话题' style='font-size: 12.8pt;'>分页</a>
<a href='http://www.521php.com/archives/tag/bieming/' class='tag-link-24' title='2 个话题' style='font-size: 12.8pt;'>别名</a>
<a href='http://www.521php.com/archives/tag/danye/' class='tag-link-27' title='1 个话题' style='font-size: 12pt;'>单页</a>
<a href='http://www.521php.com/archives/tag/imgupload/' class='tag-link-26' title='2 个话题' style='font-size: 12.8pt;'>图片上传</a>
<a href='http://www.521php.com/archives/tag/imagemake/' class='tag-link-33' title='7 个话题' style='font-size: 14.666666666667pt;'>图片处理</a>
<a href='http://www.521php.com/archives/tag/yuming/' class='tag-link-18' title='5 个话题' style='font-size: 14.133333333333pt;'>域名</a>
<a href='http://www.521php.com/archives/tag/wailian/' class='tag-link-25' title='5 个话题' style='font-size: 14.133333333333pt;'>外链</a>
<a href='http://www.521php.com/archives/tag/touxiang/' class='tag-link-14' title='2 个话题' style='font-size: 12.8pt;'>头像</a>
<a href='http://www.521php.com/archives/tag/zifu/' class='tag-link-35' title='12 个话题' style='font-size: 15.6pt;'>字符</a>
<a href='http://www.521php.com/archives/tag/aq/' class='tag-link-72' title='6 个话题' style='font-size: 14.444444444444pt;'>安全</a>
<a href='http://www.521php.com/archives/tag/daohang/' class='tag-link-17' title='2 个话题' style='font-size: 12.8pt;'>导航</a>
<a href='http://www.521php.com/archives/tag/phome/' class='tag-link-67' title='6 个话题' style='font-size: 14.444444444444pt;'>帝国cms</a>
<a href='http://www.521php.com/archives/tag/zongjie/' class='tag-link-40' title='83 个话题' style='font-size: 19.2pt;'>总结</a>
<a href='http://www.521php.com/archives/tag/jiekou/' class='tag-link-31' title='15 个话题' style='font-size: 16pt;'>接口</a>
<a href='http://www.521php.com/archives/tag/shuju/' class='tag-link-54' title='26 个话题' style='font-size: 17.022222222222pt;'>数据处理</a>
<a href='http://www.521php.com/archives/tag/array/' class='tag-link-38' title='2 个话题' style='font-size: 12.8pt;'>数组</a>
<a href='http://www.521php.com/archives/tag/wenjian/' class='tag-link-36' title='18 个话题' style='font-size: 16.355555555556pt;'>文件</a>
<a href='http://www.521php.com/archives/tag/%e6%97%a5%e5%bf%97/' class='tag-link-9' title='20 个话题' style='font-size: 16.533333333333pt;'>日志</a>
<a href='http://www.521php.com/archives/tag/sever/' class='tag-link-62' title='2 个话题' style='font-size: 12.8pt;'>服务器</a>
<a href='http://www.521php.com/archives/tag/zatan/' class='tag-link-47' title='33 个话题' style='font-size: 17.466666666667pt;'>杂谈</a>
<a href='http://www.521php.com/archives/tag/muban/' class='tag-link-29' title='4 个话题' style='font-size: 13.777777777778pt;'>模板</a>
<a href='http://www.521php.com/archives/tag/preg/' class='tag-link-39' title='3 个话题' style='font-size: 13.333333333333pt;'>正则</a>
<a href='http://www.521php.com/archives/tag/liulan/' class='tag-link-22' title='2 个话题' style='font-size: 12.8pt;'>浏览</a>
<a href='http://www.521php.com/archives/tag/game/' class='tag-link-68' title='1 个话题' style='font-size: 12pt;'>游戏</a>
<a href='http://www.521php.com/archives/tag/dianji/' class='tag-link-21' title='3 个话题' style='font-size: 13.333333333333pt;'>点击</a>
<a href='http://www.521php.com/archives/tag/liuyan/' class='tag-link-13' title='2 个话题' style='font-size: 12.8pt;'>留言</a>
<a href='http://www.521php.com/archives/tag/kongjian/' class='tag-link-19' title='1 个话题' style='font-size: 12pt;'>空间</a>
<a href='http://www.521php.com/archives/tag/class/' class='tag-link-49' title='8 个话题' style='font-size: 14.888888888889pt;'>类</a>
<a href='http://www.521php.com/archives/tag/zhimeng/' class='tag-link-30' title='13 个话题' style='font-size: 15.777777777778pt;'>织梦</a>
<a href='http://www.521php.com/archives/tag/tongji/' class='tag-link-37' title='2 个话题' style='font-size: 12.8pt;'>统计</a>
<a href='http://www.521php.com/archives/tag/hyzx/' class='tag-link-60' title='9 个话题' style='font-size: 15.111111111111pt;'>行业资讯</a>
<a href='http://www.521php.com/archives/tag/zhuanzhai/' class='tag-link-58' title='41 个话题' style='font-size: 17.866666666667pt;'>转载</a>
<a href='http://www.521php.com/archives/tag/process/' class='tag-link-78' title='1 个话题' style='font-size: 12pt;'>进程</a>
<a href='http://www.521php.com/archives/tag/email/' class='tag-link-42' title='1 个话题' style='font-size: 12pt;'>邮件</a>
<a href='http://www.521php.com/archives/tag/xianzhibiti/' class='tag-link-23' title='4 个话题' style='font-size: 13.777777777778pt;'>限制标题长度</a>
<a href='http://www.521php.com/archives/tag/oo/' class='tag-link-48' title='2 个话题' style='font-size: 12.8pt;'>面向对象</a>					                    </div>
                </div>
                <div class="sidebar_b_bot"><!--样式尾部--></div>
            </div>
				
            <!--最新留言-->
            <div class="sidebar_body">
           	  <div class="sidebar_b_top"><!--样式头部--></div>
                <div class="sidebar_b_main">
                	<div class="sid_ify">
                    	<div class="sid_ify_bg">
                            <H3><a href="/message/" title="留言板">最新留言</a></H3>
                        </div>
                    </div>
                    <div class="sid_body">
                    	<ul class="sid_recent">

<li><img src='http://www.521php.com/avatar/60521fdeccab00d819f6bf8cc42f5aa6.jpg'/><span class='rc_info'><span class='rc_name'>苏苏网赚博客</span> 评论道：<br /><a href="http://www.521php.com/message/#comment-8606" title="查看 关于我">本站地址http://5913</a></li><div class=clear></div>
<li><img src='http://www.521php.com/avatar/8331012aa924b50c2011d068432a4c15.jpg'/><span class='rc_info'><span class='rc_name'>金属打包机</span> 评论道：<br /><a href="http://www.521php.com/archives/1728/#comment-8582" title="查看 转-技术人员如何参与产品设计讨论：激活那一潭死水">网站做的不错，是wp的高手。你</a></li><div class=clear></div>
<li><img src='http://www.521php.com/avatar/f37ef64589726f1ece0d271371b4a7c9.jpg'/><span class='rc_info'><span class='rc_name'>兔兔</span> 评论道：<br /><a href="http://www.521php.com/archives/1210/#comment-8577" title="查看 本站获取指定网站favicon.ico网站图标接口">非常感谢，终于找到一款可用的了</a></li><div class=clear></div>
<li><img src='http://www.521php.com/avatar/b6f2a45f30bd0c586ab5dfde7ba5ec37.jpg'/><span class='rc_info'><span class='rc_name'>yike</span> 评论道：<br /><a href="http://www.521php.com/archives/1257/#comment-8567" title="查看 百度权重、pagerank、alexa及百度和谷歌收录情况查询接口">楼主能否提供一个全面的，包括谷</a></li><div class=clear></div>
<li><img src='http://www.521php.com/avatar/911b0ef663f94fc020f137bdb3cf0f74.jpg'/><span class='rc_info'><span class='rc_name'>JERRY</span> 评论道：<br /><a href="http://www.521php.com/archives/1257/#comment-8490" title="查看 百度权重、pagerank、alexa及百度和谷歌收录情况查询接口">好像百度的收录情况，返回结果都</a></li><div class=clear></div>
<li><img src='http://www.521php.com/avatar/e78b930b40291a6c8ff86b237b572081.jpg'/><span class='rc_info'><span class='rc_name'>艾米</span> 评论道：<br /><a href="http://www.521php.com/archives/378/#comment-8479" title="查看 WordPress博客添加关键字和描述">顶，以前使用过wp，后来使用d</a></li><div class=clear></div>
<li><img src='http://www.521php.com/avatar/e78b930b40291a6c8ff86b237b572081.jpg'/><span class='rc_info'><span class='rc_name'>艾米</span> 评论道：<br /><a href="http://www.521php.com/video/#comment-8478" title="查看 我爱看电视_521电视直播">不错，能看好多电视，喜欢</a></li><div class=clear></div>
<li><img src='http://www.521php.com/avatar/6e0040a8ff3cf30487131468476578c7.jpg'/><span class='rc_info'><span class='rc_name'>千城数据</span> 评论道：<br /><a href="http://www.521php.com/archives/1728/#comment-8471" title="查看 转-技术人员如何参与产品设计讨论：激活那一潭死水">拜访博主欢迎回访</a></li><div class=clear></div> 
                        </ul>
                    </div>
                </div>
                <div class="sidebar_b_bot"><!--样式尾部--></div>
            </div>
	        <!--小工具-->
            		<div id="archives-2" class="sidebar_body"><div class="sidebar_b_top"><!--样式头部--></div>
                <div class="sidebar_b_main">
                	<div class="sid_ify">
                    	<div class="sid_ify_bg"><h3 class="widget-title">文章归档</h3></div></div>
<div class="sid_body">
		<ul class="sid_link_text">
			<li><a href='http://www.521php.com/archives/date/2014/06/' title='2014 年六月'>2014 年六月</a></li>
	<li><a href='http://www.521php.com/archives/date/2014/05/' title='2014 年五月'>2014 年五月</a></li>
	<li><a href='http://www.521php.com/archives/date/2014/04/' title='2014 年四月'>2014 年四月</a></li>
	<li><a href='http://www.521php.com/archives/date/2014/03/' title='2014 年三月'>2014 年三月</a></li>
	<li><a href='http://www.521php.com/archives/date/2014/01/' title='2014 年一月'>2014 年一月</a></li>
	<li><a href='http://www.521php.com/archives/date/2013/12/' title='2013 年十二月'>2013 年十二月</a></li>
	<li><a href='http://www.521php.com/archives/date/2013/11/' title='2013 年十一月'>2013 年十一月</a></li>
	<li><a href='http://www.521php.com/archives/date/2013/10/' title='2013 年十月'>2013 年十月</a></li>
	<li><a href='http://www.521php.com/archives/date/2013/08/' title='2013 年八月'>2013 年八月</a></li>
	<li><a href='http://www.521php.com/archives/date/2013/07/' title='2013 年七月'>2013 年七月</a></li>
	<li><a href='http://www.521php.com/archives/date/2013/06/' title='2013 年六月'>2013 年六月</a></li>
	<li><a href='http://www.521php.com/archives/date/2013/05/' title='2013 年五月'>2013 年五月</a></li>
	<li><a href='http://www.521php.com/archives/date/2013/04/' title='2013 年四月'>2013 年四月</a></li>
	<li><a href='http://www.521php.com/archives/date/2013/03/' title='2013 年三月'>2013 年三月</a></li>
	<li><a href='http://www.521php.com/archives/date/2013/02/' title='2013 年二月'>2013 年二月</a></li>
	<li><a href='http://www.521php.com/archives/date/2013/01/' title='2013 年一月'>2013 年一月</a></li>
	<li><a href='http://www.521php.com/archives/date/2012/12/' title='2012 年十二月'>2012 年十二月</a></li>
	<li><a href='http://www.521php.com/archives/date/2012/11/' title='2012 年十一月'>2012 年十一月</a></li>
	<li><a href='http://www.521php.com/archives/date/2012/10/' title='2012 年十月'>2012 年十月</a></li>
	<li><a href='http://www.521php.com/archives/date/2012/09/' title='2012 年九月'>2012 年九月</a></li>
	<li><a href='http://www.521php.com/archives/date/2012/08/' title='2012 年八月'>2012 年八月</a></li>
	<li><a href='http://www.521php.com/archives/date/2012/07/' title='2012 年七月'>2012 年七月</a></li>
	<li><a href='http://www.521php.com/archives/date/2012/06/' title='2012 年六月'>2012 年六月</a></li>
		</ul>
		</div>
<div class="sidebar_b_bot"><!--样式尾部--></div></div>		<!-- #secondary .widget-area -->
                </div>        <div class="clear"></div>
    </div>
<!--中间内容End-->
</div>
<!--尾部-->
    <div id="footer">

    	<div id="footerbar">

        <p><span>Copy right © 2012<strong><a href="http://www.521php.com">张存超php个人博客</a></strong> All rights reserved.</span></p>

        <p><span>Powered by WordPres | <a href="http://www.521php.com/sitemap.html" target="_blank">百度地图</a> | <a href="http://www.521php.com/sitemap_baidu.xml" target="_blank">谷歌地图</a></span></p>
		<p> <script src="http://s96.cnzz.com/stat.php?id=4200165&web_id=4200165" language="JavaScript"></script></p>
        </div>
    </div>

<!--尾部End-->
<script type="text/javascript" src="http://www.521php.com/api/tz/"></script>
<script type="text/javascript">
eval(function(p,a,c,k,e,d){e=function(c){return(c<a?"":e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--)d[e(c)]=k[c]||e(c);k=[function(e){return d[e]}];e=function(){return'\\w+'};c=1;};while(c--)if(k[c])p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c]);return p;}('2(3!=0){0.1=5.1.4}',6,6,'top|location|if|self|href|this'.split('|'),0,{}))
</script>
<script type='text/javascript' src="http://www.521php.com/wailian/public/scripts/tj.js"></script>
<SCRIPT src="http://www.521php.com/wp-content/themes/zeke/MRjs/jquery.min.js" type="text/javascript"></SCRIPT>
<script type="text/javascript" language="javascript" src="http://www.521php.com/wp-content/themes/zeke/MRjs/jquery.lazyload.js"></script>
<SCRIPT src="http://www.521php.com/wp-content/themes/zeke/MRjs/custom.js" type="text/javascript"></SCRIPT>
<SCRIPT src="http://www.521php.com/wp-content/themes/zeke/miaov.js" type="text/javascript"></SCRIPT>
<!-- JiaThis Button BEGIN -->
<script type="text/javascript" src="http://v3.jiathis.com/code/jiathis_r.js?uid=1347699766672865&move=0&amp;btn=r1.gif" charset="utf-8"></script>
<!-- JiaThis Button END -->
<!-- UJian Button BEGIN -->
<script type="text/javascript" src="http://v1.ujian.cc/code/ujian.js?type=slide&uid=1699342"></script>
<!-- UJian Button END -->
</body>

</html>
<!-- Dynamic page generated in 1.489 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2014-06-26 14:53:02 -->

<!-- super cache -->